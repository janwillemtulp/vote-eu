var app=function(){"use strict";function t(){}const n=t=>t;function e(t,n){for(const e in n)t[e]=n[e];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function u(t,n,e){const r=n.subscribe(e);t.$$.on_destroy.push(r.unsubscribe?()=>r.unsubscribe():r)}let l="undefined"!=typeof window?()=>window.performance.now():()=>Date.now();const c=new Set;let f,h=!1;function d(){c.forEach(t=>{t[0](l())||(c.delete(t),t[1]())}),(h=c.size>0)&&requestAnimationFrame(d)}function p(t){let n;return h||(h=!0,requestAnimationFrame(d)),{promise:new Promise(e=>{c.add(n=[t,e])}),abort(){c.delete(n)}}}function g(t,n){t.appendChild(n)}function m(t,n,e){t.insertBefore(n,e||null)}function v(t){t.parentNode.removeChild(t)}function y(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function _(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t){return document.createTextNode(t)}function b(){return $(" ")}function x(){return $("")}function M(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function P(t,n,e){null==e?t.removeAttribute(n):t.setAttribute(n,e)}function k(t,n){n=""+n,t.data!==n&&(t.data=n)}function N(t,n,e){t.style.setProperty(n,e)}let C,T=0,A={};function q(t,n,e,r,i,o,a,s=0){const u=16.666/r;let l="{\n";for(let t=0;t<=1;t+=u){const r=n+(e-n)*o(t);l+=100*t+`%{${a(r,1-r)}}\n`}const c=l+`100% {${a(e,1-e)}}\n}`,h=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(c)}_${s}`;if(!A[h]){if(!f){const t=_("style");document.head.appendChild(t),f=t.sheet}A[h]=!0,f.insertRule(`@keyframes ${h} ${c}`,f.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${h} ${r}ms linear ${i}ms 1 both`,T+=1,h}function S(t,n){t.style.animation=(t.style.animation||"").split(", ").filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")).join(", "),n&&!--T&&requestAnimationFrame(()=>{if(T)return;let t=f.cssRules.length;for(;t--;)f.deleteRule(t);A={}})}function I(t){C=t}function D(t){(function(){if(!C)throw new Error("Function called outside component initialization");return C})().$$.after_render.push(t)}const E=[],U=Promise.resolve();let H=!1;const W=[],O=[],L=[];function z(t){W.push(t)}function F(t){O.push(t)}function Y(){const t=new Set;do{for(;E.length;){const t=E.shift();I(t),j(t.$$)}for(;W.length;)W.shift()();for(;O.length;){const n=O.pop();t.has(n)||(n(),t.add(n))}}while(E.length);for(;L.length;)L.pop()();H=!1}function j(t){t.fragment&&(t.update(t.dirty),o(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(F))}let V,R;function Q(){return V||(V=Promise.resolve()).then(()=>{V=null}),V}function B(t,n,e){t.dispatchEvent(function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(`${n?"intro":"outro"}${e}`))}function X(){R={remaining:0,callbacks:[]}}function Z(){R.remaining||o(R.callbacks)}function J(t){R.callbacks.push(t)}function G(e,r,i,a){let s=r(e,i),u=a?0:1,c=null,f=null,h=null;function d(){h&&S(e,h)}function g(t,n){const e=t.b-u;return n*=Math.abs(e),{a:u,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function m(r){const{delay:i=0,duration:a=300,easing:m=n,tick:v=t,css:y}=s,_={start:l()+i,b:r};r||(_.group=R,R.remaining+=1),c?f=_:(y&&(d(),h=q(e,u,r,a,i,m,y)),r&&v(0,1),c=g(_,a),F(()=>B(e,r,"start")),p(t=>{if(f&&t>f.start&&(c=g(f,a),f=null,B(e,c.b,"start"),y&&(d(),h=q(e,u,c.b,c.duration,0,m,s.css))),c)if(t>=c.end)v(u=c.b,1-u),B(e,c.b,"end"),f||(c.b?d():--c.group.remaining||o(c.group.callbacks)),c=null;else if(t>=c.start){const n=t-c.start;u=c.a+c.d*m(n/c.duration),v(u,1-u)}return!(!c&&!f)}))}return{run(t){"function"==typeof s?Q().then(()=>{s=s(),m(t)}):m(t)},end(){d(),c=f=null}}}function K(t,n){const r=n.token={};function i(t,i,o,a){if(n.token!==r)return;n.resolved=o&&{[o]:a};const s=e(e({},n.ctx),n.resolved),u=t&&(n.current=t)(s);n.block&&(n.blocks?n.blocks.forEach((t,e)=>{e!==i&&t&&(X(),J(()=>{t.d(1),n.blocks[e]=null}),t.o(1),Z())}):n.block.d(1),u.c(),u.i&&u.i(1),u.m(n.mount(),n.anchor),Y()),n.block=u,n.blocks&&(n.blocks[i]=u)}if((o=t)&&"function"==typeof o.then){if(t.then(t=>{i(n.then,1,n.value,t)},t=>{i(n.catch,2,n.error,t)}),n.current!==n.pending)return i(n.pending,0),!0}else{if(n.current!==n.then)return i(n.then,1,n.value,t),!0;n.resolved={[n.value]:t}}var o}function tt(t,n,e){const{fragment:i,on_mount:s,on_destroy:u,after_render:l}=t.$$;i.m(n,e),F(()=>{const n=s.map(r).filter(a);u?u.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(F)}function nt(t,n){t.$$.dirty||(E.push(t),H||(H=!0,U.then(Y)),t.$$.dirty=i()),t.$$.dirty[n]=!0}function et(n,e,r,a,s,u){const l=C;I(n);const c=e.props||{},f=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:null};let h=!1;var d;f.ctx=r?r(n,c,(t,e)=>{f.ctx&&s(f.ctx[t],f.ctx[t]=e)&&(f.bound[t]&&f.bound[t](e),h&&nt(n,t))}):c,f.update(),h=!0,o(f.before_render),f.fragment=a(f.ctx),e.target&&(e.hydrate?f.fragment.l((d=e.target,Array.from(d.childNodes))):f.fragment.c(),e.intro&&n.$$.fragment.i&&n.$$.fragment.i(),tt(n,e.target,e.anchor),Y()),I(l)}class rt{$destroy(){var n,e;e=!0,(n=this).$$&&(o(n.$$.on_destroy),n.$$.fragment.d(e),n.$$.on_destroy=n.$$.fragment=null,n.$$.ctx={}),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}var it={},ot={},at=34,st=10,ut=13;function lt(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function ct(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}function ft(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function ht(t){var n,e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+ft(-n,6):n>9999?"+"+ft(n,6):ft(n,4))+"-"+ft(t.getUTCMonth()+1,2)+"-"+ft(t.getUTCDate(),2)+(o?"T"+ft(e,2)+":"+ft(r,2)+":"+ft(i,2)+"."+ft(o,3)+"Z":i?"T"+ft(e,2)+":"+ft(r,2)+":"+ft(i,2)+"Z":r||e?"T"+ft(e,2)+":"+ft(r,2)+"Z":"")}function dt(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return ot;if(l)return l=!1,it;var n,r,i=a;if(t.charCodeAt(i)===at){for(;a++<o&&t.charCodeAt(a)!==at||t.charCodeAt(++a)===at;);return(n=a)>=o?u=!0:(r=t.charCodeAt(a++))===st?l=!0:r===ut&&(l=!0,t.charCodeAt(a)===st&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(n=a++))===st)l=!0;else if(r===ut)l=!0,t.charCodeAt(a)===st&&++a;else if(r!==e)continue;return t.slice(i,n)}return u=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===st&&--o,t.charCodeAt(o-1)===ut&&--o;(r=c())!==ot;){for(var f=[];r!==it&&r!==ot;)f.push(r),r=c();n&&null==(f=n(f,s++))||i.push(f)}return i}function i(n,e){return n.map(function(n){return e.map(function(t){return a(n[t])}).join(t)})}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?ht(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=lt(t);return function(r,i){return n(e(r),i,t)}}(t,n):lt(t)});return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=ct(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=ct(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")}}}var pt=dt(",").parse;dt("\t");function gt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var mt=function(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),function(t,n){return fetch(t,n).then(gt)}(n,e).then(function(n){return t(n,r)})}}(pt);function vt(){}function yt(t){return t()}function _t(t,n){return{subscribe:wt(t,n).subscribe}}function wt(t,n=vt){let e;const r=[];function i(n){if(o=n,(i=t)!=i?o==o:i!==o||i&&"object"==typeof i||"function"==typeof i){if(t=n,!e)return;r.forEach(t=>t[1]()),r.forEach(n=>n[0](t))}var i,o}return{set:i,update:function(n){i(n(t))},subscribe:function(o,a=vt){const s=[o,a];return r.push(s),1===r.length&&(e=n(i)||vt),o(t),()=>{const t=r.indexOf(s);-1!==t&&r.splice(t,1),0===r.length&&e()}}}}function $t(t,n,e){const r=!Array.isArray(t),i=r?[t]:t,o=n.length<2;return _t(e,t=>{let e=!1;const a=[];let s=0,u=vt;const l=()=>{if(s)return;u();const e=n(r?a[0]:a,t);o?t(e):u=function(t){return"function"==typeof t}(e)?e:vt},c=i.map((t,n)=>t.subscribe(t=>{a[n]=t,s&=~(1<<n),e&&l()},()=>{s|=1<<n}));return e=!0,l(),function(){c.forEach(yt),u()}})}function bt(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var xt,Mt,Pt=(1===(xt=bt).length&&(Mt=xt,xt=function(t,n){return bt(Mt(t),n)}),{left:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;xt(t[i],n)<0?e=i+1:r=i}return e},right:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;xt(t[i],n)>0?r=i:e=i+1}return e}}).right;var kt=Math.sqrt(50),Nt=Math.sqrt(10),Ct=Math.sqrt(2);function Tt(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=kt?10:o>=Nt?5:o>=Ct?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=kt?10:o>=Nt?5:o>=Ct?2:1)}const At=wt([]),qt=_t([{code:"AT",name:"Austria",seats:18},{code:"BE",name:"Belgium",seats:21},{code:"BG",name:"Bulgaria",seats:17},{code:"HR",name:"Croatia",seats:11},{code:"CY",name:"Cyprus",seats:6},{code:"CZ",name:"Czech Republic",seats:21},{code:"DK",name:"Denmark",seats:13},{code:"EE",name:"Estonia",seats:6},{code:"FI",name:"Finland",seats:13},{code:"FR",name:"France",seats:74},{code:"DE",name:"Germany",seats:96},{code:"EL",name:"Greece",seats:21},{code:"HU",name:"Hungary",seats:21},{code:"IE",name:"Ireland",seats:11},{code:"IT",name:"Italy",seats:73},{code:"LV",name:"Latvia",seats:8},{code:"LT",name:"Lithuania",seats:11},{code:"LU",name:"Luxembourg",seats:6},{code:"MT",name:"Malta",seats:6},{code:"NL",name:"The Netherlands",seats:26},{code:"PL",name:"Poland",seats:51},{code:"PT",name:"Portugal",seats:21},{code:"RO",name:"Romania",seats:32},{code:"SK",name:"Slovakia",seats:13},{code:"SI",name:"Slovenia",seats:8},{code:"SP",name:"Spain",seats:54},{code:"SE",name:"Sweden",seats:20},{code:"UK",name:"United Kingdom",seats:73}]),St=wt({code:"NL",name:"The Netherlands",seats:26}),It=$t([At,St],([t,n])=>t.filter(t=>t.country_code===n.code)),Dt=wt(!1),Et=wt(null),Ut=new Map;Ut.set(100,"hsl(200, 50%, 50%)"),Ut.set(50,"#999"),Ut.set(0,"hsl(0, 50%, 50%)"),Ut.set(null,"hsl(310, 50%, 70%)");const Ht=new Map;Ht.set(100,"hsl(204, 35%, 78%)"),Ht.set(50,"hsl(0, 0%, 80%)"),Ht.set(0,"hsl(3, 35%, 75%)"),Ht.set(null,"hsl(307, 30%, 83%)");const Wt=new Map;Wt.set(100,"hsl(200, 86%, 21%)"),Wt.set(50,"hsl(0, 0%, 23%)"),Wt.set(0,"hsl(0, 81%, 19%)"),Wt.set(null,"hsl(311, 62%, 20%)");const Ot=new Map;Ot.set(100,"Agree"),Ot.set(50,"Neutral"),Ot.set(0,"Disagree"),Ot.set(null,"No opinion");const Lt=$t(It,t=>t.reduce((t,n)=>{const e=t.find(t=>t.question.id===n.question_id&&t.answer.simplifiedValue===n.simplifiedAnswer);return e?e.parties.push({id:n.party_id,image:n.party_image,name_full:n.party_name_full,name_short:n.party_name_short,motivation:{source:n.motivation_src,link:n.motivation_src_link,text:n.motivation}}):t.push({question:{id:n.question_id,shared_id:n.question_shared_id,text:n.question},answer:{value:n.answer,simplifiedValue:n.simplifiedAnswer,color:Ut.get(n.simplifiedAnswer),colorLight:Ht.get(n.simplifiedAnswer),colorDark:Wt.get(n.simplifiedAnswer),label:Ot.get(n.simplifiedAnswer)},country:{code:n.country_code,name:n.country_name},parties:[{id:n.party_id,image:n.party_image,name_full:n.party_name_full,name_short:n.party_name_short,motivation:{source:n.motivation_src,link:n.motivation_src_link,text:n.motivation}}]}),t.sort((t,n)=>t.question.id-n.question.id)},[])),zt=wt([]);function Ft(t,n){const e=t.filter(t=>0!==t.question[n]&&null!==t.answer.value);return e.reduce((t,e)=>t+2*Math.max(0,e.question[n]*(e.answer.value-50)),0)/e.length}const Yt=$t(Lt,t=>t.reduce((n,e)=>(e.parties.forEach(e=>{if(!n.find(t=>t.id===e.id)){const r=t.filter(t=>t.parties.map(t=>t.id).includes(e.id)),i=r.filter(t=>0!==t.question.xy_lr),o=r.filter(t=>0!==t.question.xy_lc);n.push({...e,spectrum:{leftRight:i.reduce((t,n)=>t+n.question.xy_lr*(n.answer.value-50)+50,0)/i.length,liberalConservative:100-o.reduce((t,n)=>t+n.question.xy_lc*(n.answer.value-50)+50,0)/o.length,environment:Ft(r,"environmental_protection"),eu:Ft(r,"european_integration"),society:Ft(r,"liberal_society"),law:Ft(r,"law_and_order"),economy:Ft(r,"economic_liberalisation"),finance:Ft(r,"restrictive_financial_policy"),immigration:Ft(r,"restrictive_immigration_policy")},opinionCounts:{noOpinion:r.filter(t=>null===t.answer.value).length,shared:r.filter(t=>null!==t.answer.value&&t.parties.length>1).length,unique:r.filter(t=>null!==t.answer.value&&1===t.parties.length).length}})}}),n),[])),jt=$t(It,t=>t.reduce((t,n)=>(t.map(t=>t.id).includes(n.question_id)||t.push({id:n.question_id,shared_id:n.question_shared_id,text:n.question}),t),[])),Vt=$t([Yt,zt],([t,n])=>t.filter(t=>n.includes(t.id)).sort((t,n)=>t.name_short<n.name_short?-1:t.name_short>n.name_short?1:0),[]),Rt=$t([Lt,zt],([t,n])=>t.filter(t=>n.every(n=>t.parties.map(t=>t.id).includes(n))).length,0),Qt=$t([jt,Rt],([t,n])=>t.length-n,0),Bt=t=>""===t?null:+t;async function Xt(t){mt(`./data/${t}.csv`,t=>({...t,answer:Bt(t.answer),simplifiedAnswer:null===Bt(t.answer)?null:Bt(t.answer)<50?0:Bt(t.answer)>50?100:50,party_id:Bt(t.party_id),question_id:Bt(t.question_id),question_shared_id:Bt(t.question_shared_id),country_code:["VL","WA"].includes(t.country_code)?"BE":t.country_code,country_name:["VL","WA"].includes(t.country_code)?"Belgium":t.country_name})).then(t=>{At.set(t)})}function Zt(t,n,e){const r=Object.create(t);return r.country=n[e],r}function Jt(t){var n,e,r,i,o,a=t.country.name;return{c(){n=_("option"),e=$(a),r=b(),n.__value=i=t.country.code,n.value=n.__value,n.selected=o=t.country.code===t.$selectedCountry.code?"selected":""},m(t,i){m(t,n,i),g(n,e),g(n,r)},p(t,r){t.$allCountries&&a!==(a=r.country.name)&&k(e,a),t.$allCountries&&i!==(i=r.country.code)&&(n.__value=i),n.value=n.__value,(t.$allCountries||t.$selectedCountry)&&o!==(o=r.country.code===r.$selectedCountry.code?"selected":"")&&(n.selected=o)},d(t){t&&v(n)}}}function Gt(n){for(var e,r,i=n.$allCountries,o=[],a=0;a<i.length;a+=1)o[a]=Jt(Zt(n,i,a));return{c(){e=_("select");for(var t=0;t<o.length;t+=1)o[t].c();e.className="svelte-xiqido",r=M(e,"change",n.change_handler)},m(t,n){m(t,e,n);for(var r=0;r<o.length;r+=1)o[r].m(e,null)},p(t,n){if(t.$allCountries||t.$selectedCountry){i=n.$allCountries;for(var r=0;r<i.length;r+=1){const a=Zt(n,i,r);o[r]?o[r].p(t,a):(o[r]=Jt(a),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}},i:t,o:t,d(t){t&&v(e),y(o,t),r()}}}function Kt(t,n,e){let r,i,o;function a(t){r=i.find(n=>n.code===t),St.set(r),o=[],zt.set(o),Xt(t)}return u(t,St,t=>{e("$selectedCountry",r=t)}),u(t,qt,t=>{e("$allCountries",i=t)}),u(t,zt,t=>{e("$selectedPartyIds",o=t)}),{setSelectedCountry:a,$selectedCountry:r,$allCountries:i,change_handler:function(){return a(this.value)}}}class tn extends rt{constructor(t){super(),et(this,t,Kt,Gt,s,[])}}function nn(t){var n,e,r,i,o,a,s,u,l,c,f,h=new tn({});return{c(){n=_("div"),e=_("div"),(r=_("div")).innerHTML='<img class="logo svelte-1w3pi2v" src="img/logo.png" alt="2019 vote EU">\n\t\t\t      <h2 class="svelte-1w3pi2v">Vote matching, but the other way around</h2>',i=b(),(o=_("ol")).innerHTML="<li>Give your opinion on any of 22 policy statements</li>\n\t\t\t      <li>This will eliminate parties that don't share your opinion</li>\n\t\t\t      <li>\n\t\t\t        All the opinions that the remaining parties share are automatically marked as well\n\t\t\t      </li>\n\t\t\t      <li>You can only give opinions that are shared by political parties</li>",a=b(),s=_("div"),h.$$.fragment.c(),u=b(),(l=_("button")).textContent="start",N(r,"display","grid"),N(r,"grid-template-rows","1fr 1fr"),N(r,"align-items","end"),o.className="svelte-1w3pi2v",l.className="svelte-1w3pi2v",N(s,"text-align","right"),e.className="content svelte-1w3pi2v",n.className="modal svelte-1w3pi2v",f=M(l,"click",t.click_handler)},m(f,d){m(f,n,d),g(n,e),g(e,r),g(e,i),g(e,o),g(e,a),g(e,s),tt(h,s,null),g(s,u),g(s,l),z(()=>t.div3_binding(n,null)),c=!0},p(t,e){t.items&&(e.div3_binding(null,n),e.div3_binding(n,null))},i(t){c||(h.$$.fragment.i(t),c=!0)},o(t){h.$$.fragment.o(t),c=!1},d(e){e&&v(n),h.$destroy(),t.div3_binding(null,n),f()}}}function en(t,n,e){let r;function i(){document.body.style.overflow="auto",r.style.display="none",e("modal",r)}return{modal:r,closeModal:i,click_handler:function(){return i()},div3_binding:function(t,n){e("modal",r=t)}}}class rn extends rt{constructor(t){super(),et(this,t,en,nn,s,[])}}function on(n){var e,r,i,o,a,s,u;return{c(){e=_("div"),r=$("party opinions:\n  "),i=_("label"),o=_("input"),a=b(),s=_("span"),o.id="opinion-distribution",P(o,"type","checkbox"),o.className="svelte-1qwpvt1",s.className="slider round svelte-1qwpvt1",i.className="switch svelte-1qwpvt1",N(e,"text-align","right"),N(e,"display","flex"),N(e,"justify-content","flex-end"),u=M(o,"click",n.click_handler)},m(t,n){m(t,e,n),g(e,r),g(e,i),g(i,o),g(i,a),g(i,s)},p:t,i:t,o:t,d(t){t&&v(e),u()}}}function an(t,n,e){let r;return u(t,Dt,t=>{e("$showDistributions",r=t)}),{$showDistributions:r,click_handler:function(){const t=r=!r;return Dt.set(r),t}}}class sn extends rt{constructor(t){super(),et(this,t,an,on,s,[])}}function un(t){const n=t-1;return n*n*n+1}function ln(t,{delay:n=0,duration:e=400}){const r=+getComputedStyle(t).opacity;return{delay:n,duration:e,css:t=>`opacity: ${t*r}`}}function cn(t,{delay:n=0,duration:e=400,easing:r=un,x:i=0,y:o=0,opacity:a=0}){const s=getComputedStyle(t),u=+s.opacity,l="none"===s.transform?"":s.transform,c=u*(1-a);return{delay:n,duration:e,easing:r,css:(t,n)=>`\n\t\t\ttransform: ${l} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${u-c*n}`}}function fn(t){var n,e,r,i;return{c(){(n=_("button")).innerHTML='<i class="fas fa-times-circle"></i>\n\t\t\t            clear selection\n\t\t\t          ',n.className="clear-selection svelte-1s1qzpv",i=M(n,"click",t.click_handler)},m(t,e){m(t,n,e),r=!0},i(t){r||(F(()=>{e||(e=G(n,cn,{x:-200,duration:300},!0)),e.run(1)}),r=!0)},o(t){e||(e=G(n,cn,{x:-200,duration:300},!1)),e.run(0),r=!1},d(t){t&&(v(n),e&&e.end()),i()}}}function hn(t){var n,e,r,i,o,a,s,u,l,c,f,h,d,p,y,w,x,M,P,C,T,A,q,S,I,D,E,U,H,W,O,L,z,F,Y,j,V,R,Q,B,G,K=t.$selectedCountry.name,nt=t.$selectedCountry.seats,et=new tn({}),rt=new sn({}),it=new tn({}),ot=new sn({}),at=t.$selectedPartyIds.length>0&&fn(t);return{c(){n=_("header"),e=_("div"),r=_("div"),i=_("div"),o=_("img"),a=b(),s=_("div"),et.$$.fragment.c(),u=b(),rt.$$.fragment.c(),l=b(),c=_("div"),f=_("h1"),h=$(K),d=b(),p=_("p"),y=_("em"),w=$(nt),x=$(" seats"),M=$("\n          in EU parliament"),P=b(),C=_("div"),it.$$.fragment.c(),T=b(),ot.$$.fragment.c(),A=b(),q=_("div"),S=_("div"),at&&at.c(),I=b(),(D=_("div")).textContent="Agree",E=b(),(U=_("div")).textContent="Neutral",H=b(),(W=_("div")).textContent="Disagree",O=b(),(L=_("div")).textContent="No Opinion",z=b(),(F=_("div")).textContent="Agree",Y=b(),(j=_("div")).textContent="Neut.",V=b(),(R=_("div")).textContent="Dis-agr.",Q=b(),(B=_("div")).textContent="No Opin.",o.src="img/logo.png",o.alt="2019 vote EU",o.className="logo svelte-1s1qzpv",s.className="left-country-select svelte-1s1qzpv",i.className="logo-container svelte-1s1qzpv",f.className="svelte-1s1qzpv",p.className="byline svelte-1s1qzpv",c.className="country svelte-1s1qzpv",C.className="right-country-select svelte-1s1qzpv",r.className="country-container svelte-1s1qzpv",N(S,"height","26px"),N(S,"text-align","right"),D.className="opinion-label bigger svelte-1s1qzpv",N(D,"color","hsl(200, 50%, 50%)"),U.className="opinion-label bigger svelte-1s1qzpv",N(U,"color","#999"),W.className="opinion-label bigger svelte-1s1qzpv",N(W,"color","hsl(0, 50%, 50%)"),L.className="opinion-label bigger svelte-1s1qzpv",N(L,"color","hsl(310, 50%, 70%)"),F.className="opinion-label smaller svelte-1s1qzpv",N(F,"color","hsl(200, 50%, 50%)"),j.className="opinion-label smaller svelte-1s1qzpv",N(j,"color","#999"),R.className="opinion-label smaller svelte-1s1qzpv",N(R,"color","hsl(0, 50%, 50%)"),B.className="opinion-label smaller svelte-1s1qzpv",N(B,"color","hsl(310, 50%, 70%)"),q.className="container-headers svelte-1s1qzpv",n.className="svelte-1s1qzpv"},m(t,v){m(t,n,v),g(n,e),g(e,r),g(r,i),g(i,o),g(i,a),g(i,s),tt(et,s,null),g(s,u),tt(rt,s,null),g(r,l),g(r,c),g(c,f),g(f,h),g(c,d),g(c,p),g(p,y),g(y,w),g(y,x),g(p,M),g(r,P),g(r,C),tt(it,C,null),g(C,T),tt(ot,C,null),g(e,A),g(e,q),g(q,S),at&&at.m(S,null),g(q,I),g(q,D),g(q,E),g(q,U),g(q,H),g(q,W),g(q,O),g(q,L),g(q,z),g(q,F),g(q,Y),g(q,j),g(q,V),g(q,R),g(q,Q),g(q,B),G=!0},p(t,n){G&&!t.$selectedCountry||K===(K=n.$selectedCountry.name)||k(h,K),G&&!t.$selectedCountry||nt===(nt=n.$selectedCountry.seats)||k(w,nt),n.$selectedPartyIds.length>0?at?at.i(1):((at=fn(n)).c(),at.i(1),at.m(S,null)):at&&(X(),J(()=>{at.d(1),at=null}),at.o(1),Z())},i(t){G||(et.$$.fragment.i(t),rt.$$.fragment.i(t),it.$$.fragment.i(t),ot.$$.fragment.i(t),at&&at.i(),G=!0)},o(t){et.$$.fragment.o(t),rt.$$.fragment.o(t),it.$$.fragment.o(t),ot.$$.fragment.o(t),at&&at.o(),G=!1},d(t){t&&v(n),et.$destroy(),rt.$destroy(),it.$destroy(),ot.$destroy(),at&&at.d()}}}function dn(t,n,e){let r,i;return u(t,St,t=>{e("$selectedCountry",r=t)}),u(t,zt,t=>{e("$selectedPartyIds",i=t)}),{$selectedCountry:r,$selectedPartyIds:i,click_handler:function(){const t=i=[];return zt.set(i),t}}}class pn extends rt{constructor(t){super(),et(this,t,dn,hn,s,[])}}function gn(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}const mn=Symbol("implicit");function vn(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function yn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function _n(){}var wn="\\s*([+-]?\\d+)\\s*",$n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",bn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xn=/^#([0-9a-f]{3})$/,Mn=/^#([0-9a-f]{6})$/,Pn=new RegExp("^rgb\\("+[wn,wn,wn]+"\\)$"),kn=new RegExp("^rgb\\("+[bn,bn,bn]+"\\)$"),Nn=new RegExp("^rgba\\("+[wn,wn,wn,$n]+"\\)$"),Cn=new RegExp("^rgba\\("+[bn,bn,bn,$n]+"\\)$"),Tn=new RegExp("^hsl\\("+[$n,bn,bn]+"\\)$"),An=new RegExp("^hsla\\("+[$n,bn,bn,$n]+"\\)$"),qn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Sn(t){var n;return t=(t+"").trim().toLowerCase(),(n=xn.exec(t))?new Hn((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=Mn.exec(t))?In(parseInt(n[1],16)):(n=Pn.exec(t))?new Hn(n[1],n[2],n[3],1):(n=kn.exec(t))?new Hn(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Nn.exec(t))?Dn(n[1],n[2],n[3],n[4]):(n=Cn.exec(t))?Dn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Tn.exec(t))?On(n[1],n[2]/100,n[3]/100,1):(n=An.exec(t))?On(n[1],n[2]/100,n[3]/100,n[4]):qn.hasOwnProperty(t)?In(qn[t]):"transparent"===t?new Hn(NaN,NaN,NaN,0):null}function In(t){return new Hn(t>>16&255,t>>8&255,255&t,1)}function Dn(t,n,e,r){return r<=0&&(t=n=e=NaN),new Hn(t,n,e,r)}function En(t){return t instanceof _n||(t=Sn(t)),t?new Hn((t=t.rgb()).r,t.g,t.b,t.opacity):new Hn}function Un(t,n,e,r){return 1===arguments.length?En(t):new Hn(t,n,e,null==r?1:r)}function Hn(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Wn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function On(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Ln(t,n,e,r)}function Ln(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function zn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}vn(_n,Sn,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),vn(Hn,Un,yn(_n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Hn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Hn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Wn(this.r)+Wn(this.g)+Wn(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),vn(Ln,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Ln)return new Ln(t.h,t.s,t.l,t.opacity);if(t instanceof _n||(t=Sn(t)),!t)return new Ln;if(t instanceof Ln)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=n===o?(e-r)/s+6*(e<r):e===o?(r-n)/s+2:(n-e)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Ln(a,s,u,t.opacity)}(t):new Ln(t,n,e,null==r?1:r)},yn(_n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ln(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ln(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Hn(zn(t>=240?t-240:t+120,i,r),zn(t,i,r),zn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Fn=Math.PI/180,Yn=180/Math.PI,jn=.96422,Vn=1,Rn=.82521,Qn=4/29,Bn=6/29,Xn=3*Bn*Bn,Zn=Bn*Bn*Bn;function Jn(t){if(t instanceof Gn)return new Gn(t.l,t.a,t.b,t.opacity);if(t instanceof re){if(isNaN(t.h))return new Gn(t.l,0,0,t.opacity);var n=t.h*Fn;return new Gn(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof Hn||(t=En(t));var e,r,i=ee(t.r),o=ee(t.g),a=ee(t.b),s=Kn((.2225045*i+.7168786*o+.0606169*a)/Vn);return i===o&&o===a?e=r=s:(e=Kn((.4360747*i+.3850649*o+.1430804*a)/jn),r=Kn((.0139322*i+.0971045*o+.7141733*a)/Rn)),new Gn(116*s-16,500*(e-s),200*(s-r),t.opacity)}function Gn(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Kn(t){return t>Zn?Math.pow(t,1/3):t/Xn+Qn}function te(t){return t>Bn?t*t*t:Xn*(t-Qn)}function ne(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ee(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function re(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}vn(Gn,function(t,n,e,r){return 1===arguments.length?Jn(t):new Gn(t,n,e,null==r?1:r)},yn(_n,{brighter:function(t){return new Gn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Gn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new Hn(ne(3.1338561*(n=jn*te(n))-1.6168667*(t=Vn*te(t))-.4906146*(e=Rn*te(e))),ne(-.9787684*n+1.9161415*t+.033454*e),ne(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),vn(re,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof re)return new re(t.h,t.c,t.l,t.opacity);if(t instanceof Gn||(t=Jn(t)),0===t.a&&0===t.b)return new re(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Yn;return new re(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new re(t,n,e,null==r?1:r)},yn(_n,{brighter:function(t){return new re(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new re(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Jn(this).rgb()}}));var ie=-.14861,oe=1.78277,ae=-.29227,se=-.90649,ue=1.97294,le=ue*se,ce=ue*oe,fe=oe*ae-se*ie;function he(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function de(t){return function(){return t}}function pe(t){return 1==(t=+t)?ge:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):de(isNaN(n)?e:n)}}function ge(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):de(isNaN(t)?n:t)}vn(he,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof he)return new he(t.h,t.s,t.l,t.opacity);t instanceof Hn||(t=En(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(fe*r+le*n-ce*e)/(fe+le-ce),o=r-i,a=(ue*(e-i)-ae*o)/se,s=Math.sqrt(a*a+o*o)/(ue*i*(1-i)),u=s?Math.atan2(a,o)*Yn-120:NaN;return new he(u<0?u+360:u,s,i,t.opacity)}(t):new he(t,n,e,null==r?1:r)},yn(_n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new he(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new he(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Fn,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new Hn(255*(n+e*(ie*r+oe*i)),255*(n+e*(ae*r+se*i)),255*(n+e*(ue*r)),this.opacity)}}));var me=function t(n){var e=pe(n);function r(t,n){var r=e((t=Un(t)).r,(n=Un(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=ge(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function ve(t,n){return n-=t=+t,function(e){return t+n*e}}var ye=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_e=new RegExp(ye.source,"g");function we(t,n){var e,r,i,o=ye.lastIndex=_e.lastIndex=0,a=-1,s=[],u=[];for(t+="",n+="";(e=ye.exec(t))&&(r=_e.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(e=e[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:ve(e,r)})),o=_e.lastIndex;return o<n.length&&(i=n.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(n){return t(n)+""}}(u[0].x):function(t){return function(){return t}}(n):(n=u.length,function(t){for(var e,r=0;r<n;++r)s[(e=u[r]).i]=e.x(t);return s.join("")})}function $e(t,n){var e,r=typeof n;return null==n||"boolean"===r?de(n):("number"===r?ve:"string"===r?(e=Sn(n))?(n=e,me):we:n instanceof Sn?me:n instanceof Date?function(t,n){var e=new Date;return n-=t=+t,function(r){return e.setTime(t+n*r),e}}:Array.isArray(n)?function(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=$e(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=$e(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}:ve)(t,n)}function be(t,n){return n-=t=+t,function(e){return Math.round(t+n*e)}}var xe,Me,Pe,ke,Ne=180/Math.PI,Ce={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Te(t,n,e,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Ne,skewX:Math.atan(u)*Ne,scaleX:a,scaleY:s}}function Ae(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,n,null,e);s.push({i:u-4,x:ve(t,i)},{i:u-2,x:ve(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:ve(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,s,u),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:ve(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,s,u),function(t,n,e,r,o,a){if(t!==e||n!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:ve(t,e)},{i:s-2,x:ve(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var n,e=-1,r=u.length;++e<r;)s[(n=u[e]).i]=n.x(t);return s.join("")}}}var qe=Ae(function(t){return"none"===t?Ce:(xe||(xe=document.createElement("DIV"),Me=document.documentElement,Pe=document.defaultView),xe.style.transform=t,t=Pe.getComputedStyle(Me.appendChild(xe),null).getPropertyValue("transform"),Me.removeChild(xe),Te(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Se=Ae(function(t){return null==t?Ce:(ke||(ke=document.createElementNS("http://www.w3.org/2000/svg","g")),ke.setAttribute("transform",t),(t=ke.transform.baseVal.consolidate())?Te((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ce)},", ",")",")");Math.SQRT2;function Ie(t){return+t}var De=[0,1];function Ee(t){return t}function Ue(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function He(t){var n,e=t[0],r=t[t.length-1];return e>r&&(n=e,e=r,r=n),function(t){return Math.max(e,Math.min(r,t))}}function We(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=Ue(i,r),o=e(a,o)):(r=Ue(r,i),o=e(o,a)),function(t){return o(r(t))}}function Oe(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=Ue(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=Pt(t,n,1,r)-1;return o[e](i[e](n))}}function Le(t,n){return function(){var t,n,e,r,i,o,a=De,s=De,u=$e,l=Ee;function c(){return r=Math.min(a.length,s.length)>2?Oe:We,i=o=null,f}function f(n){return isNaN(n=+n)?e:(i||(i=r(a.map(t),s,u)))(t(l(n)))}return f.invert=function(e){return l(n((o||(o=r(s,a.map(t),ve)))(e)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Ie),l===Ee||(l=He(a)),c()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=be,c()},f.clamp=function(t){return arguments.length?(l=t?He(a):Ee,f):l!==Ee},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(e=t,f):e},function(e,r){return t=e,n=r,c()}}()(t,n)}function ze(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function Fe(t){return(t=ze(Math.abs(t)))?t[1]:NaN}var Ye,je=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ve(t){return new Re(t)}function Re(t){if(!(n=je.exec(t)))throw new Error("invalid format: "+t);var n;this.fill=n[1]||" ",this.align=n[2]||">",this.sign=n[3]||"-",this.symbol=n[4]||"",this.zero=!!n[5],this.width=n[6]&&+n[6],this.comma=!!n[7],this.precision=n[8]&&+n[8].slice(1),this.trim=!!n[9],this.type=n[10]||""}function Qe(t,n){var e=ze(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Ve.prototype=Re.prototype,Re.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Be={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return Qe(100*t,n)},r:Qe,s:function(t,n){var e=ze(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Ye=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ze(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Xe(t){return t}var Ze,Je,Ge,Ke=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function tr(t){var n,e,r=t.grouping&&t.thousands?(n=t.grouping,e=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,s=n[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=n[a=(a+1)%n.length];return o.reverse().join(e)}):Xe,i=t.currency,o=t.decimal,a=t.numerals?function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}}(t.numerals):Xe,s=t.percent||"%";function u(t){var n=(t=Ve(t)).fill,e=t.align,u=t.sign,l=t.symbol,c=t.zero,f=t.width,h=t.comma,d=t.precision,p=t.trim,g=t.type;"n"===g?(h=!0,g="g"):Be[g]||(null==d&&(d=12),p=!0,g="g"),(c||"0"===n&&"="===e)&&(c=!0,n="0",e="=");var m="$"===l?i[0]:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",v="$"===l?i[1]:/[%p]/.test(g)?s:"",y=Be[g],_=/[defgprs%]/.test(g);function w(t){var i,s,l,w=m,$=v;if("c"===g)$=y(t)+$,t="";else{var b=(t=+t)<0;if(t=y(Math.abs(t),d),p&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),b&&0==+t&&(b=!1),w=(b?"("===u?u:"-":"-"===u||"("===u?"":u)+w,$=("s"===g?Ke[8+Ye/3]:"")+$+(b&&"("===u?")":""),_)for(i=-1,s=t.length;++i<s;)if(48>(l=t.charCodeAt(i))||l>57){$=(46===l?o+t.slice(i+1):t.slice(i))+$,t=t.slice(0,i);break}}h&&!c&&(t=r(t,1/0));var x=w.length+t.length+$.length,M=x<f?new Array(f-x+1).join(n):"";switch(h&&c&&(t=r(M+t,M.length?f-$.length:1/0),M=""),e){case"<":t=w+t+$+M;break;case"=":t=w+M+t+$;break;case"^":t=M.slice(0,x=M.length>>1)+w+t+$+M.slice(x);break;default:t=M+w+t+$}return a(t)}return d=null==d?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),w.toString=function(){return t+""},w}return{format:u,formatPrefix:function(t,n){var e=u(((t=Ve(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Fe(n)/3))),i=Math.pow(10,-r),o=Ke[8+r/3];return function(t){return e(i*t)+o}}}}function nr(t,n,e,r){var i,o=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=kt?i*=10:o>=Nt?i*=5:o>=Ct&&(i*=2),n<t?-i:i}(t,n,e);switch((r=Ve(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Fe(n)/3)))-Fe(Math.abs(t)))}(o,a))||(r.precision=i),Ge(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Fe(n)-Fe(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Fe(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Je(r)}function er(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,i,o,a,s=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=Tt(t,n,e))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return nr(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i=n(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=Tt(s,u,e))>0?r=Tt(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,e):r<0&&(r=Tt(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,e)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,n(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,n(i)),t},t}Ze=tr({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Je=Ze.format,Ge=Ze.formatPrefix;var rr=new Date,ir=new Date;function or(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var a,s=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return s;do{s.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<r);return s},i.filter=function(e){return or(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return rr.setTime(+n),ir.setTime(+r),t(rr),t(ir),Math.floor(e(rr,ir))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}var ar=or(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});ar.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?or(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):ar:null};var sr=6e4,ur=6048e5,lr=(or(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),or(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,n){t.setTime(+t+n*sr)},function(t,n){return(n-t)/sr},function(t){return t.getMinutes()}),or(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*sr)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),or(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*sr)/864e5},function(t){return t.getDate()-1}));function cr(t){return or(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*sr)/ur})}var fr=cr(0),hr=cr(1),dr=(cr(2),cr(3),cr(4)),pr=(cr(5),cr(6),or(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),or(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));pr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?or(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};or(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*sr)},function(t,n){return(n-t)/sr},function(t){return t.getUTCMinutes()}),or(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()});var gr=or(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1});function mr(t){return or(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/ur})}var vr=mr(0),yr=mr(1),_r=(mr(2),mr(3),mr(4)),wr=(mr(5),mr(6),or(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),or(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function $r(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function br(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function xr(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}wr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?or(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var Mr,Pr,kr,Nr={"-":"",_:" ",0:"0"},Cr=/^\s*\d+/,Tr=/^%/,Ar=/[\\^$*+?|[\]().{}]/g;function qr(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Sr(t){return t.replace(Ar,"\\$&")}function Ir(t){return new RegExp("^(?:"+t.map(Sr).join("|")+")","i")}function Dr(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function Er(t,n,e){var r=Cr.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Ur(t,n,e){var r=Cr.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Hr(t,n,e){var r=Cr.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Wr(t,n,e){var r=Cr.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Or(t,n,e){var r=Cr.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function Lr(t,n,e){var r=Cr.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function zr(t,n,e){var r=Cr.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Fr(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Yr(t,n,e){var r=Cr.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function jr(t,n,e){var r=Cr.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Vr(t,n,e){var r=Cr.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Rr(t,n,e){var r=Cr.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function Qr(t,n,e){var r=Cr.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function Br(t,n,e){var r=Cr.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function Xr(t,n,e){var r=Cr.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Zr(t,n,e){var r=Cr.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Jr(t,n,e){var r=Tr.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Gr(t,n,e){var r=Cr.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Kr(t,n,e){var r=Cr.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function ti(t,n){return qr(t.getDate(),n,2)}function ni(t,n){return qr(t.getHours(),n,2)}function ei(t,n){return qr(t.getHours()%12||12,n,2)}function ri(t,n){return qr(1+lr.count(pr(t),t),n,3)}function ii(t,n){return qr(t.getMilliseconds(),n,3)}function oi(t,n){return ii(t,n)+"000"}function ai(t,n){return qr(t.getMonth()+1,n,2)}function si(t,n){return qr(t.getMinutes(),n,2)}function ui(t,n){return qr(t.getSeconds(),n,2)}function li(t){var n=t.getDay();return 0===n?7:n}function ci(t,n){return qr(fr.count(pr(t),t),n,2)}function fi(t,n){var e=t.getDay();return t=e>=4||0===e?dr(t):dr.ceil(t),qr(dr.count(pr(t),t)+(4===pr(t).getDay()),n,2)}function hi(t){return t.getDay()}function di(t,n){return qr(hr.count(pr(t),t),n,2)}function pi(t,n){return qr(t.getFullYear()%100,n,2)}function gi(t,n){return qr(t.getFullYear()%1e4,n,4)}function mi(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+qr(n/60|0,"0",2)+qr(n%60,"0",2)}function vi(t,n){return qr(t.getUTCDate(),n,2)}function yi(t,n){return qr(t.getUTCHours(),n,2)}function _i(t,n){return qr(t.getUTCHours()%12||12,n,2)}function wi(t,n){return qr(1+gr.count(wr(t),t),n,3)}function $i(t,n){return qr(t.getUTCMilliseconds(),n,3)}function bi(t,n){return $i(t,n)+"000"}function xi(t,n){return qr(t.getUTCMonth()+1,n,2)}function Mi(t,n){return qr(t.getUTCMinutes(),n,2)}function Pi(t,n){return qr(t.getUTCSeconds(),n,2)}function ki(t){var n=t.getUTCDay();return 0===n?7:n}function Ni(t,n){return qr(vr.count(wr(t),t),n,2)}function Ci(t,n){var e=t.getUTCDay();return t=e>=4||0===e?_r(t):_r.ceil(t),qr(_r.count(wr(t),t)+(4===wr(t).getUTCDay()),n,2)}function Ti(t){return t.getUTCDay()}function Ai(t,n){return qr(yr.count(wr(t),t),n,2)}function qi(t,n){return qr(t.getUTCFullYear()%100,n,2)}function Si(t,n){return qr(t.getUTCFullYear()%1e4,n,4)}function Ii(){return"+0000"}function Di(){return"%"}function Ei(t){return+t}function Ui(t){return Math.floor(+t/1e3)}!function(t){Mr=function(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=Ir(i),c=Dr(i),f=Ir(o),h=Dr(o),d=Ir(a),p=Dr(a),g=Ir(s),m=Dr(s),v=Ir(u),y=Dr(u),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:ti,e:ti,f:oi,H:ni,I:ei,j:ri,L:ii,m:ai,M:si,p:function(t){return i[+(t.getHours()>=12)]},Q:Ei,s:Ui,S:ui,u:li,U:ci,V:fi,w:hi,W:di,x:null,X:null,y:pi,Y:gi,Z:mi,"%":Di},w={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:vi,e:vi,f:bi,H:yi,I:_i,j:wi,L:$i,m:xi,M:Mi,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:Ei,s:Ui,S:Pi,u:ki,U:Ni,V:Ci,w:Ti,W:Ai,x:null,X:null,y:qi,Y:Si,Z:Ii,"%":Di},$={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.w=h[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=y[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.m=m[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,e,r){return M(t,n,e,r)},d:jr,e:jr,f:Zr,H:Rr,I:Rr,j:Vr,L:Xr,m:Yr,M:Qr,p:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.p=c[r[0].toLowerCase()],e+r[0].length):-1},Q:Gr,s:Kr,S:Br,u:Ur,U:Hr,V:Wr,w:Er,W:Or,x:function(t,n,r){return M(t,e,n,r)},X:function(t,n,e){return M(t,r,n,e)},y:zr,Y:Lr,Z:Fr,"%":Jr};function b(t,n){return function(e){var r,i,o,a=[],s=-1,u=0,l=t.length;for(e instanceof Date||(e=new Date(+e));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=Nr[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function x(t,n){return function(e){var r,i,o=xr(1900);if(M(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=br(xr(o.y))).getUTCDay(),r=i>4||0===i?yr.ceil(r):yr(r),r=gr.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=n(xr(o.y))).getDay(),r=i>4||0===i?hr.ceil(r):hr(r),r=lr.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?br(xr(o.y)).getUTCDay():n(xr(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,br(o)):n(o)}}function M(t,n,e,r){for(var i,o,a=0,s=n.length,u=e.length;a<s;){if(r>=u)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=$[i in Nr?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return _.x=b(e,_),_.X=b(r,_),_.c=b(n,_),w.x=b(e,w),w.X=b(r,w),w.c=b(n,w),{format:function(t){var n=b(t+="",_);return n.toString=function(){return t},n},parse:function(t){var n=x(t+="",$r);return n.toString=function(){return t},n},utcFormat:function(t){var n=b(t+="",w);return n.toString=function(){return t},n},utcParse:function(t){var n=x(t,br);return n.toString=function(){return t},n}}}(t),Mr.format,Mr.parse,Pr=Mr.utcFormat,kr=Mr.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||Pr("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||kr("%Y-%m-%dT%H:%M:%S.%LZ");var Hi=Math.PI,Wi=2*Hi,Oi=Wi-1e-6;function Li(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function zi(){return new Li}function Fi(t){return function(){return t}}Li.prototype=zi.prototype={constructor:Li,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,s=e-t,u=r-n,l=o-t,c=a-n,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var h=e-o,d=r-a,p=s*s+u*u,g=h*h+d*d,m=Math.sqrt(p),v=Math.sqrt(f),y=i*Math.tan((Hi-Math.acos((p+f-g)/(2*m*v)))/2),_=y/v,w=y/m;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*l)+","+(n+_*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>l*d)+","+(this._x1=t+w*s)+","+(this._y1=n+w*u)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n;var a=(e=+e)*Math.cos(r),s=e*Math.sin(r),u=t+a,l=n+s,c=1^o,f=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),e&&(f<0&&(f=f%Wi+Wi),f>Oi?this._+="A"+e+","+e+",0,1,"+c+","+(t-a)+","+(n-s)+"A"+e+","+e+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>1e-6&&(this._+="A"+e+","+e+",0,"+ +(f>=Hi)+","+c+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};Math.PI;function Yi(t){this._context=t}function ji(t){return new Yi(t)}function Vi(t){return t[0]}function Ri(t){return t[1]}function Qi(){var t=Vi,n=Ri,e=Fi(!0),r=null,i=ji,o=null;function a(a){var s,u,l,c=a.length,f=!1;for(null==r&&(o=i(l=zi())),s=0;s<=c;++s)!(s<c&&e(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(u,s,a),+n(u,s,a));if(l)return o=null,l+""||null}return a.x=function(n){return arguments.length?(t="function"==typeof n?n:Fi(+n),a):t},a.y=function(t){return arguments.length?(n="function"==typeof t?t:Fi(+t),a):n},a.defined=function(t){return arguments.length?(e="function"==typeof t?t:Fi(!!t),a):e},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function Bi(t){return t<0?-1:1}function Xi(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Bi(o)+Bi(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Zi(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Ji(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*n,o-s,a-s*e,o,a)}function Gi(t){this._context=t}function Ki(t){this._context=new to(t)}function to(t){this._context=t}function no(t){return new Ki(t)}Yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},Gi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ji(this,this._t0,Zi(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Ji(this,Zi(this,e=Xi(this,t,n)),e);break;default:Ji(this,this._t0,e=Xi(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(Ki.prototype=Object.create(Gi.prototype)).point=function(t,n){Gi.prototype.point.call(this,n,t)},to.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}};var eo="http://www.w3.org/1999/xhtml",ro={svg:"http://www.w3.org/2000/svg",xhtml:eo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function io(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),ro.hasOwnProperty(n)?{space:ro[n],local:t}:t}function oo(t){var n=io(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===eo&&n.documentElement.namespaceURI===eo?n.createElement(t):n.createElementNS(e,t)}})(n)}function ao(){}function so(t){return null==t?ao:function(){return this.querySelector(t)}}function uo(){return[]}function lo(t){return null==t?uo:function(){return this.querySelectorAll(t)}}function co(t){return function(){return this.matches(t)}}function fo(t){return new Array(t.length)}function ho(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}ho.prototype={constructor:ho,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var po="$";function go(t,n,e,r,i,o){for(var a,s=0,u=n.length,l=o.length;s<l;++s)(a=n[s])?(a.__data__=o[s],r[s]=a):e[s]=new ho(t,o[s]);for(;s<u;++s)(a=n[s])&&(i[s]=a)}function mo(t,n,e,r,i,o,a){var s,u,l,c={},f=n.length,h=o.length,d=new Array(f);for(s=0;s<f;++s)(u=n[s])&&(d[s]=l=po+a.call(u,u.__data__,s,n),l in c?i[s]=u:c[l]=u);for(s=0;s<h;++s)(u=c[l=po+a.call(t,o[s],s,o)])?(r[s]=u,u.__data__=o[s],c[l]=null):e[s]=new ho(t,o[s]);for(s=0;s<f;++s)(u=n[s])&&c[d[s]]===u&&(i[s]=u)}function vo(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function yo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _o(t,n){return t.style.getPropertyValue(n)||yo(t).getComputedStyle(t,null).getPropertyValue(n)}function wo(t){return t.trim().split(/^|\s+/)}function $o(t){return t.classList||new bo(t)}function bo(t){this._node=t,this._names=wo(t.getAttribute("class")||"")}function xo(t,n){for(var e=$o(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Mo(t,n){for(var e=$o(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Po(){this.textContent=""}function ko(){this.innerHTML=""}function No(){this.nextSibling&&this.parentNode.appendChild(this)}function Co(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function To(){return null}function Ao(){var t=this.parentNode;t&&t.removeChild(this)}function qo(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function So(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}bo.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Io={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Io={mouseenter:"mouseover",mouseleave:"mouseout"}));function Do(t,n,e){return t=Eo(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function Eo(t,n,e){return function(r){try{t.call(this,this.__data__,n,e)}finally{}}}function Uo(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function Ho(t,n,e){var r=Io.hasOwnProperty(t.type)?Do:Eo;return function(i,o,a){var s,u=this.__on,l=r(n,o,a);if(u)for(var c=0,f=u.length;c<f;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=e),void(s.value=n);this.addEventListener(t.type,l,e),s={type:t.type,name:t.name,value:n,listener:l,capture:e},u?u.push(s):this.__on=[s]}}function Wo(t,n,e){var r=yo(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}var Oo=[null];function Lo(t,n){this._groups=t,this._parents=n}function zo(){return new Lo([[document.documentElement]],Oo)}Lo.prototype=zo.prototype={constructor:Lo,select:function(t){"function"!=typeof t&&(t=so(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,s=n[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new Lo(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=lo(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,s=n[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new Lo(r,i)},filter:function(t){"function"!=typeof t&&(t=co(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Lo(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),c=-1,this.each(function(t){p[++c]=t}),p;var e,r=n?mo:go,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,s=new Array(a),u=new Array(a),l=new Array(a),c=0;c<a;++c){var f=i[c],h=o[c],d=h.length,p=t.call(f,f&&f.__data__,c,i),g=p.length,m=u[c]=new Array(g),v=s[c]=new Array(g);r(f,h,m,v,l[c]=new Array(d),p,n);for(var y,_,w=0,$=0;w<g;++w)if(y=m[w]){for(w>=$&&($=w+1);!(_=v[$])&&++$<g;);y._next=_||null}}return(s=new Lo(s,i))._enter=u,s._exit=l,s},enter:function(){return new Lo(this._enter||this._groups.map(fo),this._parents)},exit:function(){return new Lo(this._exit||this._groups.map(fo),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=n[s],c=e[s],f=l.length,h=a[s]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;s<r;++s)a[s]=n[s];return new Lo(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=vo);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,s=e[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(n)}return new Lo(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=io(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):_o(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=wo(t+"");if(arguments.length<2){for(var r=$o(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?xo:Mo)(this,t)}}:n?function(t){return function(){xo(this,t)}}:function(t){return function(){Mo(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?Po:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ko:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(No)},lower:function(){return this.each(Co)},append:function(t){var n="function"==typeof t?t:oo(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:oo(t),r=null==n?To:"function"==typeof n?n:so(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Ao)},clone:function(t){return this.select(t?So:qo)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=n?Ho:Uo,null==e&&(e=!1),r=0;r<a;++r)this.each(s(o[r],n,e));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return Wo(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return Wo(this,t,n)}})(t,n))}};var Fo={value:function(){}};function Yo(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new jo(r)}function jo(t){this._=t}function Vo(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function Ro(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Fo,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}jo.prototype=Yo.prototype={constructor:jo,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<s;)if(e=(t=o[a]).type)i[e]=Ro(i[e],t.name,n);else if(null==n)for(e in i)i[e]=Ro(i[e],t.name,null);return this}for(;++a<s;)if((e=(t=o[a]).type)&&(e=Vo(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new jo(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var Qo,Bo,Xo=0,Zo=0,Jo=0,Go=1e3,Ko=0,ta=0,na=0,ea="object"==typeof performance&&performance.now?performance:Date,ra="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ia(){return ta||(ra(oa),ta=ea.now()+na)}function oa(){ta=0}function aa(){this._call=this._time=this._next=null}function sa(t,n,e){var r=new aa;return r.restart(t,n,e),r}function ua(){ta=(Ko=ea.now())+na,Xo=Zo=0;try{!function(){ia(),++Xo;for(var t,n=Qo;n;)(t=ta-n._time)>=0&&n._call.call(null,t),n=n._next;--Xo}()}finally{Xo=0,function(){var t,n,e=Qo,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Qo=n);Bo=t,ca(r)}(),ta=0}}function la(){var t=ea.now(),n=t-Ko;n>Go&&(na-=n,Ko=t)}function ca(t){Xo||(Zo&&(Zo=clearTimeout(Zo)),t-ta>24?(t<1/0&&(Zo=setTimeout(ua,t-ea.now()-na)),Jo&&(Jo=clearInterval(Jo))):(Jo||(Ko=ea.now(),Jo=setInterval(la,Go)),Xo=1,ra(ua)))}function fa(t,n,e){var r=new aa;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r}aa.prototype=sa.prototype={constructor:aa,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?ia():+e)+(null==n?0:+n),this._next||Bo===this||(Bo?Bo._next=this:Qo=this,Bo=this),this._call=t,this._time=e,ca()},stop:function(){this._call&&(this._call=null,this._time=1/0,ca())}};var ha=Yo("start","end","cancel","interrupt"),da=[],pa=0,ga=1,ma=2,va=3,ya=4,_a=5,wa=6;function $a(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(u){var l,c,f,h;if(e.state!==ga)return s();for(l in i)if((h=i[l]).name===e.name){if(h.state===va)return fa(o);h.state===ya?(h.state=wa,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<n&&(h.state=wa,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(fa(function(){e.state===va&&(e.state=ya,e.timer.restart(a,e.delay,e.time),a(u))}),e.state=ma,e.on.call("start",t,t.__data__,e.index,e.group),e.state===ma){for(e.state=va,r=new Array(f=e.tween.length),l=0,c=-1;l<f;++l)(h=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(r[++c]=h);r.length=c+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(s),e.state=_a,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);e.state===_a&&(e.on.call("end",t,t.__data__,e.index,e.group),s())}function s(){for(var r in e.state=wa,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=sa(function(t){e.state=ga,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:i,on:ha,tween:da,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:pa})}function ba(t,n){var e=Ma(t,n);if(e.state>pa)throw new Error("too late; already scheduled");return e}function xa(t,n){var e=Ma(t,n);if(e.state>va)throw new Error("too late; already running");return e}function Ma(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Pa(t,n,e){var r=t._id;return t.each(function(){var t=xa(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return Ma(t,r).value[n]}}function ka(t,n){var e;return("number"==typeof n?ve:n instanceof Sn?me:(e=Sn(n))?(n=e,me):we)(t,n)}var Na=zo.prototype.constructor;function Ca(t){return function(){this.style.removeProperty(t)}}var Ta=0;function Aa(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function qa(){return++Ta}var Sa=zo.prototype;Aa.prototype=function(t){return zo().transition(t)}.prototype={constructor:Aa,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=so(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),h=0;h<c;++h)(s=l[h])&&(u=t.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,$a(f[h],n,e,h,f,Ma(s,e)));return new Aa(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=lo(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var h,d=t.call(u,u.__data__,f,l),p=Ma(u,e),g=0,m=d.length;g<m;++g)(h=d[g])&&$a(h,n,e,g,d,p);o.push(d),a.push(u)}return new Aa(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=co(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Aa(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=n[s],c=e[s],f=l.length,h=a[s]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;s<r;++s)a[s]=n[s];return new Aa(a,this._parents,this._name,this._id)},selection:function(){return new Na(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=qa(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=Ma(a,n);$a(a,t,e,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Aa(r,this._parents,t,e)},call:Sa.call,nodes:Sa.nodes,node:Sa.node,size:Sa.size,empty:Sa.empty,each:Sa.each,on:function(t,n){var e=this._id;return arguments.length<2?Ma(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(n)?ba:xa;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=io(t),r="transform"===e?Se:ka;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var a,s,u=e(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=n(r=a,u));this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var a,s,u=e(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=n(r=a,u));this.removeAttribute(t)}})(e,r,Pa(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}:function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}})(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=io(t);return this.tween(e,(r.local?function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n(e))}}(t,i)),e}return i._value=n,i}:function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n(e))}}(t,i)),e}return i._value=n,i})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?qe:ka;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=_o(this,t),a=(this.style.removeProperty(t),_o(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,Ca(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=_o(this,t),s=e(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=_o(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=n(r=a,s))}}(t,r,Pa(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,s="end."+a;return function(){var u=xa(this,t),l=u.on,c=null==u.value[a]?o||(o=Ca(n)):void 0;l===e&&i===c||(r=(e=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=_o(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n(r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Pa(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}));var t},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Ma(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=xa(this,t),o=i.tween;if(o!==e)for(var a=0,s=(r=e=o).length;a<s;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=xa(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},u=0,l=i.length;u<l;++u)if(i[u].name===n){i[u]=s;break}u===l&&i.push(s)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){ba(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){ba(this,t).delay=n}})(n,t)):Ma(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){xa(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){xa(this,t).duration=n}})(n,t)):Ma(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){xa(this,t).ease=n}}(n,t)):Ma(this.node(),n).ease},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};e.each(function(){var e=xa(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),e.on=n})})}};Math.PI,Math.PI;var Ia={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Da(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return Ia.time=ia(),Ia;return e}function Ea(t,n,e){const r=Object.create(t);return r.party=n[e],r.i=e,r}function Ua(t,n,e){const r=Object.create(t);return r.opinion=n[e],r}function Ha(t,n,e){const r=Object.create(t);return r.party=n[e],r}function Wa(t,n,e){const r=Object.create(t);return r.opinion=n[e],r}function Oa(t){var n,e,r,i,o,a,s,u,l,c=!t.$showDistributions&&!t.includesSelectedPartyIds(t.opinion)&&La(t);function f(){return t.click_handler(t)}return{c(){n=w("g"),e=w("rect"),c&&c.c(),o=$("\n            }\n          "),P(e,"x",r=t.xc(t.opinion.answer.simplifiedValue)),P(e,"y",i=t.y(t.opinion.question.id)),P(e,"width",t.answerWidth),P(e,"height",Ba),N(e,"fill",t.includesSelectedPartyIds(t.opinion)?t.opinion.answer.colorLight:"#eee"),P(e,"class","svelte-1fs1wcy"),P(n,"class",a="answer "+(t.includesSelectedPartyIds(t.opinion)?"":"hoverable")+" svelte-1fs1wcy"),l=M(n,"click",f)},m(t,r){m(t,n,r),g(n,e),c&&c.m(n,null),g(n,o),u=!0},p(s,l){t=l,u&&!s.xc&&!s.$opinions||r===(r=t.xc(t.opinion.answer.simplifiedValue))||P(e,"x",r),u&&!s.y&&!s.$opinions||i===(i=t.y(t.opinion.question.id))||P(e,"y",i),u&&!s.answerWidth||P(e,"width",t.answerWidth),(!u||s.includesSelectedPartyIds||s.$opinions)&&N(e,"fill",t.includesSelectedPartyIds(t.opinion)?t.opinion.answer.colorLight:"#eee"),t.$showDistributions||t.includesSelectedPartyIds(t.opinion)?c&&(c.d(1),c=null):c?c.p(s,t):((c=La(t)).c(),c.m(n,o)),u&&!s.includesSelectedPartyIds&&!s.$opinions||a===(a="answer "+(t.includesSelectedPartyIds(t.opinion)?"":"hoverable")+" svelte-1fs1wcy")||P(n,"class",a)},i(t){u||(F(()=>{s||(s=G(n,ln,{duration:0},!0)),s.run(1)}),u=!0)},o(t){s||(s=G(n,ln,{duration:0},!1)),s.run(0),u=!1},d(t){t&&v(n),c&&c.d(),t&&s&&s.end(),l()}}}function La(t){var n,e,r,i,o,a=t.opinion.answer.label;return{c(){n=w("text"),e=$(a),P(n,"x",r=t.xc(t.opinion.answer.simplifiedValue)),P(n,"y",i=t.y(t.opinion.question.id)),P(n,"dx",o=t.answerWidth/2),P(n,"dy",Ba/2),P(n,"class","answer-label svelte-1fs1wcy"),N(n,"fill","#ccc")},m(t,r){m(t,n,r),g(n,e)},p(t,s){t.$opinions&&a!==(a=s.opinion.answer.label)&&k(e,a),(t.xc||t.$opinions)&&r!==(r=s.xc(s.opinion.answer.simplifiedValue))&&P(n,"x",r),(t.y||t.$opinions)&&i!==(i=s.y(s.opinion.question.id))&&P(n,"y",i),t.answerWidth&&o!==(o=s.answerWidth/2)&&P(n,"dx",o)},d(t){t&&v(n)}}}function za(t){var n,e,r=(0===t.$selectedPartyIds.length||t.opinion.parties.map(Xa).some(t.func_1))&&Oa(t);return{c(){r&&r.c(),n=x()},m(t,i){r&&r.m(t,i),m(t,n,i),e=!0},p(t,e){0===e.$selectedPartyIds.length||e.opinion.parties.map(Xa).some(e.func_1)?r?(r.p(t,e),r.i(1)):((r=Oa(e)).c(),r.i(1),r.m(n.parentNode,n)):r&&(X(),J(()=>{r.d(1),r=null}),r.o(1),Z())},i(t){e||(r&&r.i(),e=!0)},o(t){r&&r.o(),e=!1},d(t){r&&r.d(t),t&&v(n)}}}function Fa(t){for(var n,e,r,i=0===t.$selectedPartyIds.length?t.nonSelectedPartyPaths:t.selectedPartyPaths,o=[],a=0;a<i.length;a+=1)o[a]=Ya(Ha(t,i,a));function s(t,n,e){o[t]&&(n&&J(()=>{o[t].d(n),o[t]=null}),o[t].o(e))}var u=t.$opinions,l=[];for(a=0;a<u.length;a+=1)l[a]=Ra(Ua(t,u,a));function c(t,n,e){l[t]&&(n&&J(()=>{l[t].d(n),l[t]=null}),l[t].o(e))}return{c(){for(var t=0;t<o.length;t+=1)o[t].c();n=x();for(t=0;t<l.length;t+=1)l[t].c();e=x()},m(t,i){for(var a=0;a<o.length;a+=1)o[a].m(t,i);m(t,n,i);for(a=0;a<l.length;a+=1)l[a].m(t,i);m(t,e,i),r=!0},p(t,r){if(t.barWidth||t.rowHeight||t.getPath||t.$selectedPartyIds||t.nonSelectedPartyPaths||t.selectedPartyPaths||t.filterOpinionsByParty||t.pathStyle){i=0===r.$selectedPartyIds.length?r.nonSelectedPartyPaths:r.selectedPartyPaths;for(var a=0;a<i.length;a+=1){const e=Ha(r,i,a);o[a]?(o[a].p(t,e),o[a].i(1)):(o[a]=Ya(e),o[a].c(),o[a].i(1),o[a].m(n.parentNode,n))}for(X();a<o.length;a+=1)s(a,1,1);Z()}if(t.xc||t.$opinions||t.y||t.filteredOpinionParties||t.$hoverPartyId||t.xOffset||t.barWidth||t.includesSelectedPartyIds||t.rowHeight||t.$selectedPartyIds||t.containerWidth){u=r.$opinions;for(a=0;a<u.length;a+=1){const n=Ua(r,u,a);l[a]?(l[a].p(t,n),l[a].i(1)):(l[a]=Ra(n),l[a].c(),l[a].i(1),l[a].m(e.parentNode,e))}for(X();a<l.length;a+=1)c(a,1,1);Z()}},i(t){if(!r){for(var n=0;n<i.length;n+=1)o[n].i();for(n=0;n<u.length;n+=1)l[n].i();r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)s(t,0);l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)c(t,0);r=!1},d(t){y(o,t),t&&v(n),y(l,t),t&&v(e)}}}function Ya(t){var n,e,r,i,o,a;return{c(){P(n=w("path"),"transform",e="translate("+t.barWidth/2+", "+Ba+")"),P(n,"d",r=t.getPath(t.party.id,t.filterOpinionsByParty(t.party).reduce(Za,[]))),P(n,"style",i=t.pathStyle(t.party)),P(n,"class","svelte-1fs1wcy")},m(t,e){m(t,n,e),a=!0},p(t,o){a&&!t.barWidth||e===(e="translate("+o.barWidth/2+", "+Ba+")")||P(n,"transform",e),(!a||t.getPath||t.$selectedPartyIds||t.nonSelectedPartyPaths||t.selectedPartyPaths)&&r!==(r=o.getPath(o.party.id,o.filterOpinionsByParty(o.party).reduce(Za,[])))&&P(n,"d",r),(!a||t.pathStyle||t.$selectedPartyIds||t.nonSelectedPartyPaths||t.selectedPartyPaths)&&i!==(i=o.pathStyle(o.party))&&P(n,"style",i)},i(t){a||(F(()=>{o||(o=G(n,ln,{duration:0},!0)),o.run(1)}),a=!0)},o(t){o||(o=G(n,ln,{duration:0},!1)),o.run(0),a=!1},d(t){t&&(v(n),o&&o.end())}}}function ja(t){var n,e,r,i,o,a,s=t.party.name_short,u=t.party.name_short;return{c(){n=w("text"),e=$(s),i=w("text"),o=$(u),P(n,"dx",r=t.xOffset(t.opinion)+t.i*t.barWidth+t.barWidth/2),P(n,"dy",30),N(n,"text-anchor","middle"),N(n,"fill",t.includesSelectedPartyIds(t.opinion)?t.opinion.answer.colorLight:"#eee"),N(n,"stroke",t.includesSelectedPartyIds(t.opinion)?t.opinion.answer.colorLight:"#eee"),N(n,"stroke-width","7"),P(i,"dx",a=t.xOffset(t.opinion)+t.i*t.barWidth+t.barWidth/2),P(i,"dy",30),N(i,"text-anchor","middle")},m(t,r){m(t,n,r),g(n,e),m(t,i,r),g(i,o)},p(t,l){(t.filteredOpinionParties||t.$opinions)&&s!==(s=l.party.name_short)&&k(e,s),(t.xOffset||t.$opinions||t.barWidth)&&r!==(r=l.xOffset(l.opinion)+l.i*l.barWidth+l.barWidth/2)&&P(n,"dx",r),(t.includesSelectedPartyIds||t.$opinions)&&(N(n,"fill",l.includesSelectedPartyIds(l.opinion)?l.opinion.answer.colorLight:"#eee"),N(n,"stroke",l.includesSelectedPartyIds(l.opinion)?l.opinion.answer.colorLight:"#eee")),(t.filteredOpinionParties||t.$opinions)&&u!==(u=l.party.name_short)&&k(o,u),(t.xOffset||t.$opinions||t.barWidth)&&a!==(a=l.xOffset(l.opinion)+l.i*l.barWidth+l.barWidth/2)&&P(i,"dx",a)},d(t){t&&(v(n),v(i))}}}function Va(e){var r,i,a,s,u,c;function f(){return e.click_handler_1(e)}function h(...t){return e.mouseover_handler(e,...t)}var d=e.party&&e.party.id===e.$hoverPartyId&&ja(e);return{c(){r=w("rect"),d&&d.c(),s=x(),P(r,"x",i=e.xOffset(e.opinion)+e.i*e.barWidth),P(r,"y",Ba/2-Ba/4/2),P(r,"width",e.barWidth),P(r,"height",Ba/4),N(r,"fill",e.$selectedPartyIds.includes(e.party.id)?e.opinion.answer.color:e.opinion.answer.colorLight),N(r,"stroke",e.containerWidth<368?(e.$selectedPartyIds.includes(e.party.id),e.opinion.answer.color):"black"),P(r,"class","party-answer svelte-1fs1wcy"),c=[M(r,"click",f),M(r,"mouseover",h),M(r,"mouseout",e.mouseout_handler)]},m(t,n){m(t,r,n),d&&d.m(t,n),m(t,s,n),u=!0},p(t,n){e=n,(!u||t.xOffset||t.$opinions||t.barWidth)&&i!==(i=e.xOffset(e.opinion)+e.i*e.barWidth)&&P(r,"x",i),u&&!t.barWidth||P(r,"width",e.barWidth),(!u||t.$selectedPartyIds||t.filteredOpinionParties||t.$opinions)&&N(r,"fill",e.$selectedPartyIds.includes(e.party.id)?e.opinion.answer.color:e.opinion.answer.colorLight),(!u||t.containerWidth||t.$selectedPartyIds||t.filteredOpinionParties||t.$opinions)&&N(r,"stroke",e.containerWidth<368?(e.$selectedPartyIds.includes(e.party.id),e.opinion.answer.color):"black"),e.party&&e.party.id===e.$hoverPartyId?d?d.p(t,e):((d=ja(e)).c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},i(t){u||(a&&a.end(1),u=!0)},o(i){i&&(a=function(e,r,i){let a,s=r(e,i),u=!0;const c=R;function f(){const{delay:r=0,duration:i=300,easing:f=n,tick:h=t,css:d}=s;d&&(a=q(e,1,0,i,r,f,d));const g=l()+r,m=g+i;p(t=>{if(u){if(t>=m)return h(0,1),--c.remaining||o(c.callbacks),!1;if(t>=g){const n=f((t-g)/i);h(1-n,n)}}return u})}return c.remaining+=1,"function"==typeof s?Q().then(()=>{s=s(),f()}):f(),{end(t){t&&s.tick&&s.tick(1,0),u&&(a&&S(e,a),u=!1)}}}(r,e.scaleToZero,{x:e.xOffset(e.opinion)+e.i*e.barWidth})),u=!1},d(t){t&&(v(r),a&&a.end()),d&&d.d(t),t&&v(s),o(c)}}}function Ra(t){for(var n,e,r,i=t.filteredOpinionParties(t.opinion),o=[],a=0;a<i.length;a+=1)o[a]=Va(Ea(t,i,a));function s(t,n,e){o[t]&&(n&&J(()=>{o[t].d(n),o[t]=null}),o[t].o(e))}return{c(){n=w("g");for(var r=0;r<o.length;r+=1)o[r].c();P(n,"transform",e="translate("+t.xc(t.opinion.answer.simplifiedValue)+", "+t.y(t.opinion.question.id)+")")},m(t,e){m(t,n,e);for(var i=0;i<o.length;i+=1)o[i].m(n,null);r=!0},p(t,a){if(t.filteredOpinionParties||t.$opinions||t.$hoverPartyId||t.xOffset||t.barWidth||t.includesSelectedPartyIds||t.rowHeight||t.$selectedPartyIds||t.containerWidth){i=a.filteredOpinionParties(a.opinion);for(var u=0;u<i.length;u+=1){const e=Ea(a,i,u);o[u]?(o[u].p(t,e),o[u].i(1)):(o[u]=Va(e),o[u].c(),o[u].i(1),o[u].m(n,null))}for(X();u<o.length;u+=1)s(u,1,1);Z()}(!r||t.xc||t.$opinions||t.y)&&e!==(e="translate("+a.xc(a.opinion.answer.simplifiedValue)+", "+a.y(a.opinion.question.id)+")")&&P(n,"transform",e)},i(t){if(!r){for(var n=0;n<i.length;n+=1)o[n].i();r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)s(t,0);r=!1},d(t){t&&v(n),y(o,t)}}}function Qa(t){var n,e,r,i,o,a,s;F(t.onwindowresize);for(var u=t.$opinions,l=[],c=0;c<u.length;c+=1)l[c]=za(Wa(t,u,c));function f(t,n,e){l[t]&&(n&&J(()=>{l[t].d(n),l[t]=null}),l[t].o(e))}var h=t.$showDistributions&&Fa(t);return{c(){n=_("div"),e=w("svg"),r=w("g");for(var a=0;a<l.length;a+=1)l[a].c();i=x(),h&&h.c(),P(e,"width",o=t.Math.min(t.containerWidth,540)),P(e,"height",22*Ba+22),s=M(window,"resize",t.onwindowresize)},m(t,o){m(t,n,o),g(n,e),g(e,r);for(var s=0;s<l.length;s+=1)l[s].m(r,null);g(r,i),h&&h.m(r,null),a=!0},p(t,n){if(t.$selectedPartyIds||t.$opinions||t.includesSelectedPartyIds||t.$showDistributions||t.xc||t.y||t.answerWidth||t.rowHeight){u=n.$opinions;for(var s=0;s<u.length;s+=1){const e=Wa(n,u,s);l[s]?(l[s].p(t,e),l[s].i(1)):(l[s]=za(e),l[s].c(),l[s].i(1),l[s].m(r,i))}for(X();s<l.length;s+=1)f(s,1,1);Z()}n.$showDistributions?h?(h.p(t,n),h.i(1)):((h=Fa(n)).c(),h.i(1),h.m(r,null)):h&&(X(),J(()=>{h.d(1),h=null}),h.o(1),Z()),a&&!t.containerWidth||o===(o=n.Math.min(n.containerWidth,540))||P(e,"width",o)},i(t){if(!a){for(var n=0;n<u.length;n+=1)l[n].i();h&&h.i(),a=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)f(t,0);h&&h.o(),a=!1},d(t){t&&v(n),y(l,t),h&&h.d(),s()}}}zo.prototype.interrupt=function(t){return this.each(function(){!function(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>ma&&e.state<_a,e.state=wa,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)})},zo.prototype.transition=function(t){var n,e;t instanceof Aa?(n=t._id,t=t._name):(n=qa(),(e=Ia).time=ia(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&$a(a,t,n,l,s,e||Da(a,n));return new Aa(r,this._parents,t,n)};let Ba=100;function Xa(t){return t.id}function Za(t,n){return t.concat([n,n,n])}function Ja(t,n,e){let r,i,o,a,s;u(t,Lt,t=>{e("$opinions",r=t)}),u(t,zt,t=>{e("$selectedPartyIds",i=t)}),u(t,Yt,t=>{e("$allParties",o=t)}),u(t,Et,t=>{e("$hoverPartyId",a=t)}),u(t,Dt,t=>{e("$showDistributions",s=t)});let l,c,f,h,d,p,g,m,v,y,_,w,$,b,x=9,M=135,{containerHeight:P}=n;function k(t){const n=t.parties.map(t=>t.id);0===i.length?(i=n,zt.set(i)):i.some(t=>n.includes(t))?(i=i.filter(t=>n.includes(t)),zt.set(i)):(i=n,zt.set(i))}return D(()=>{l<768?(e("barWidth",x=(l-210)/4/15),e("answerWidth",M=(l-210)/4)):l<940?(e("barWidth",x=f/4/15),e("answerWidth",M=f/4)):(e("barWidth",x=9),e("answerWidth",M=135))}),t.$set=(t=>{"containerHeight"in t&&e("containerHeight",P=t.containerHeight)}),t.$$.update=((t={innerWidth:1,answerWidth:1,$opinions:1,rowHeight:1,$selectedPartyIds:1,barWidth:1,xc:1,xOffset:1,$allParties:1,mousePos:1,innerHeight:1,popupHeight:1,$hoverPartyId:1})=>{t.innerWidth&&e("containerWidth",f=l?l<768?l-210:l-400:540),t.answerWidth&&e("xc",h=function t(){var n=new Map,e=[],r=[],i=mn;function o(t){var o=t+"",a=n.get(o);if(!a){if(i!==mn)return i;n.set(o,a=e.push(t))}return r[(a-1)%r.length]}return o.domain=function(t){if(!arguments.length)return e.slice();e=[],n=new Map;for(const r of t){const t=r+"";n.has(t)||n.set(t,e.push(r))}return o},o.range=function(t){return arguments.length?(r=Array.from(t),o):r.slice()},o.unknown=function(t){return arguments.length?(i=t,o):i},o.copy=function(){return t(e,r).unknown(i)},gn.apply(o,arguments),o}().domain([100,50,0,null]).range(Array.from(Array(4).keys()).map(t=>t*M))),(t.$opinions||t.rowHeight)&&e("y",d=function t(){var n=Le(Ee,Ee);return n.copy=function(){return e=n,t().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},gn.apply(n,arguments),er(n)}().domain(function(t,n){let e,r;if(void 0===n)for(let n of t)null!=n&&n>=n&&(void 0===e?e=r=n:(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&o>=o&&(void 0===e?e=r=o:(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}(r.map(t=>t.question.id))).range([0,21*Ba*1])),(t.answerWidth||t.$selectedPartyIds||t.barWidth)&&e("xOffset",p=(t=>M/2-t.parties.filter(t=>i.includes(t.id)||0===i.length).length*x/2)),(t.xc||t.xOffset||t.$selectedPartyIds||t.barWidth||t.rowHeight)&&e("getPath",g=((t,n)=>Qi().x((n,e)=>h(n.answer.simplifiedValue)+p(n)+n.parties.filter(t=>0===i.length||i.includes(t.id)).map(t=>t.id).indexOf(t)*x).y((t,n)=>-Ba/2+1*Math.floor(n/3)*Ba+(n%3==0?-Ba/4/2:n%3==2?Ba/4/2:0)).curve(no)(n))),t.$selectedPartyIds&&e("includesSelectedPartyIds",m=(t=>i.length>0&&i.every(n=>t.parties.map(t=>t.id).includes(n)))),(t.$allParties||t.$selectedPartyIds)&&e("selectedPartyPaths",v=o.filter(t=>i.includes(t.id))),(t.$allParties||t.$selectedPartyIds)&&e("nonSelectedPartyPaths",y=o.filter(t=>!i.includes(t.id))),(t.mousePos||t.innerWidth)&&e("popupLeft",_=(()=>0)),(t.innerHeight||t.mousePos||t.popupHeight)&&e("popupMarginTop",w=(()=>Math.min(0,c-0))),t.$selectedPartyIds&&e("filteredOpinionParties",$=(t=>t.parties.filter(t=>0===i.length||i.includes(t.id)))),(t.$hoverPartyId||t.$selectedPartyIds)&&e("pathStyle",b=((t,n)=>`\n        fill: none; \n    stroke: ${t.id===a||t.id===a&&i.length>0?"#000":"rgba(0, 0, 0, 0.35)"};  \n    stroke-width: ${t.id===a?2:1};\n    stroke-dasharray: ${t.id===a||i.length>0?"none":"2 2"};\n  `))}),{barWidth:x,answerWidth:M,innerWidth:l,innerHeight:c,containerHeight:P,filterOpinionsByParty:function(t){return r.filter(n=>n.parties.map(t=>t.id).includes(t.id))},updateSelectedPartyIds:k,scaleToZero:function(t,{duration:n=0,x:e}){const r="string"==typeof(i=t)?new Lo([[document.querySelector(i)]],[document.documentElement]):new Lo([[i]],Oo);var i;return{duration:n,tick:t=>{r.attr("width",t*x).attr("x",e+t*(-x/2)).style("opacity",t)}}},containerWidth:f,xc:h,y:d,$opinions:r,xOffset:p,$selectedPartyIds:i,getPath:g,Math:Math,includesSelectedPartyIds:m,selectedPartyPaths:v,nonSelectedPartyPaths:y,filteredOpinionParties:$,pathStyle:b,$hoverPartyId:a,$showDistributions:s,func_1:function(t){return i.includes(t)},onwindowresize:function(){l=window.innerWidth,e("innerWidth",l),c=window.innerHeight,e("innerHeight",c)},click_handler:function({opinion:t}){return k(t)},click_handler_1:function({opinion:t}){return k(t)},mouseover_handler:function({party:t},n){const e=a="ontouchstart"in window||"onmsgesturechange"in window?null:t.id;return Et.set(a),e},mouseout_handler:function(){const t=a=null;return Et.set(a),t}}}class Ga extends rt{constructor(t){super(),et(this,t,Ja,Qa,s,["containerHeight"])}}function Ka(n){var e,r,i,o=n.question.text;return{c(){e=_("p"),r=_("span"),i=$(o),N(r,"padding","0 0 0 4px"),N(r,"background-color",n.marked()||0===n.$selectedPartyIds.length?"transparent":"hsla(46, 92%, 75%, 1)"),N(e,"color",n.marked()?n.answerValuesRemaining()[0].answer.color:"black"),e.className="svelte-12tqqt8"},m(t,n){m(t,e,n),g(e,r),g(r,i)},p(t,n){t.question&&o!==(o=n.question.text)&&k(i,o),(t.marked||t.$selectedPartyIds)&&N(r,"background-color",n.marked()||0===n.$selectedPartyIds.length?"transparent":"hsla(46, 92%, 75%, 1)"),(t.marked||t.answerValuesRemaining)&&N(e,"color",n.marked()?n.answerValuesRemaining()[0].answer.color:"black")},i:t,o:t,d(t){t&&v(e)}}}function ts(t,n,e){let r,i;u(t,Lt,t=>{e("$opinions",r=t)}),u(t,zt,t=>{e("$selectedPartyIds",i=t)});let o,a,{question:s}=n;return t.$set=(t=>{"question"in t&&e("question",s=t.question)}),t.$$.update=((t={$opinions:1,question:1,$selectedPartyIds:1,answerValuesRemaining:1})=>{(t.$opinions||t.question||t.$selectedPartyIds)&&e("answerValuesRemaining",o=(()=>r.filter(t=>t.question.id===s.id).filter(t=>t.parties.map(t=>t.id).filter(t=>i.includes(t)).length>0))),t.answerValuesRemaining&&e("marked",a=(()=>1===o().length))}),{question:s,answerValuesRemaining:o,$selectedPartyIds:i,marked:a}}class ns extends rt{constructor(t){super(),et(this,t,ts,Ka,s,["question"])}}function es(t){var n,e;function r(t){return t.$selectedPartyIds.length>1?is:rs}var i=r(t),o=i(t);return{c(){n=_("div"),o.c(),n.className=e="container "+(1===t.$selectedPartyIds.length?"single-match":"multi-match")+" svelte-1hqoziq"},m(t,e){m(t,n,e),o.m(n,null)},p(t,a){i===(i=r(a))&&o?o.p(t,a):(o.d(1),(o=i(a))&&(o.c(),o.m(n,null))),t.$selectedPartyIds&&e!==(e="container "+(1===a.$selectedPartyIds.length?"single-match":"multi-match")+" svelte-1hqoziq")&&(n.className=e)},d(t){t&&v(n),o.d()}}}function rs(t){var n,e,r,i,o,a,s,u,l=t.$filteredParties[0].name_short,c=t.$filteredParties[0].name_full.replace(/(.*)\(.*\)/gi,"$1");return{c(){(n=_("span")).textContent="matching party:",e=b(),r=_("div"),i=_("h3"),o=$(l),a=b(),s=_("p"),u=$(c),n.className="label grid-item svelte-1hqoziq",i.className="name-short svelte-1hqoziq",s.className="name-short svelte-1hqoziq",r.className="grid-item svelte-1hqoziq"},m(t,l){m(t,n,l),m(t,e,l),m(t,r,l),g(r,i),g(i,o),g(r,a),g(r,s),g(s,u)},p(t,n){t.$filteredParties&&l!==(l=n.$filteredParties[0].name_short)&&k(o,l),t.$filteredParties&&c!==(c=n.$filteredParties[0].name_full.replace(/(.*)\(.*\)/gi,"$1"))&&k(u,c)},d(t){t&&(v(n),v(e),v(r))}}}function is(t){var n,e,r,i,o,a,s,u,l,c,f,h,d,p,y=t.$filteredParties.length,w=`(${Math.round(t.$overlap/t.$activeQuestions.length*100)}%)`;return{c(){n=_("div"),(e=_("div")).textContent="parties matching your selection:",r=b(),i=_("span"),o=$(y),a=b(),s=_("div"),(u=_("div")).textContent="statements with same opinion:",l=b(),c=_("span"),f=$(t.$overlap),h=b(),d=_("span"),p=$(w),e.className="label svelte-1hqoziq",i.className="value svelte-1hqoziq",n.className="grid-item svelte-1hqoziq",u.className="label svelte-1hqoziq",d.className="svelte-1hqoziq",c.className="value svelte-1hqoziq",s.className="grid-item svelte-1hqoziq"},m(t,v){m(t,n,v),g(n,e),g(n,r),g(n,i),g(i,o),m(t,a,v),m(t,s,v),g(s,u),g(s,l),g(s,c),g(c,f),g(c,h),g(c,d),g(d,p)},p(t,n){t.$filteredParties&&y!==(y=n.$filteredParties.length)&&k(o,y),t.$overlap&&k(f,n.$overlap),(t.$overlap||t.$activeQuestions)&&w!==(w=`(${Math.round(n.$overlap/n.$activeQuestions.length*100)}%)`)&&k(p,w)},d(t){t&&(v(n),v(a),v(s))}}}function os(n){var e,r=n.$selectedPartyIds.length>0&&es(n);return{c(){r&&r.c(),e=x()},m(t,n){r&&r.m(t,n),m(t,e,n)},p(t,n){n.$selectedPartyIds.length>0?r?r.p(t,n):((r=es(n)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&v(e)}}}function as(t,n,e){let r,i,o,a;return u(t,zt,t=>{e("$selectedPartyIds",r=t)}),u(t,Vt,t=>{e("$filteredParties",i=t)}),u(t,Rt,t=>{e("$overlap",o=t)}),u(t,jt,t=>{e("$activeQuestions",a=t)}),{$selectedPartyIds:r,$filteredParties:i,$overlap:o,$activeQuestions:a}}class ss extends rt{constructor(t){super(),et(this,t,as,os,s,[])}}function us(t,n,e){const r=Object.create(t);return r.party=n[e],r}function ls(t,n,e){const r=Object.create(t);return r.question=n[e],r}function cs(t){var n,e=new ns({props:{question:t.question}});return{c(){e.$$.fragment.c()},m(t,r){tt(e,t,r),n=!0},p(t,n){var r={};t.$activeQuestions&&(r.question=n.question),e.$set(r)},i(t){n||(e.$$.fragment.i(t),n=!0)},o(t){e.$$.fragment.o(t),n=!1},d(t){e.$destroy(t)}}}function fs(t){for(var n,e,r,i,o,a,s,u,l,c,f,h,d,p,w=0===t.$difference?"y":"ies",x=t.$selectedPartyIds.length>1&&hs(t),M=t.$selectedPartyIds.length>1&&ds(t),P=t.$filteredParties,C=[],T=0;T<P.length;T+=1)C[T]=ps(us(t,P,T));return{c(){n=_("div"),e=_("h2"),r=$("Matching part"),i=$(w),o=b(),x&&x.c(),a=b(),s=_("div"),M&&M.c(),u=b(),l=_("div");for(var d=0;d<C.length;d+=1)C[d].c();c=b(),f=_("div"),h=$("dont't forget to scroll"),e.className="svelte-18sklmw",l.className="party-list svelte-18sklmw",N(l,"max-height",t.innerHeight-460+"px"),s.className="matching-parties svelte-18sklmw",N(s,"background-color",1===t.$selectedPartyIds.length?"rgb(179, 219, 186)":"#eee"),f.className="scroll-hint svelte-18sklmw",N(f,"display",t.isScrolling?"block":"none"),n.className="inner svelte-18sklmw"},m(d,v){m(d,n,v),g(n,e),g(e,r),g(e,i),g(n,o),x&&x.m(n,null),g(n,a),g(n,s),M&&M.m(s,null),g(s,u),g(s,l);for(var y=0;y<C.length;y+=1)C[y].m(l,null);z(()=>t.div0_binding(l,null)),g(n,c),g(n,f),g(f,h),p=!0},p(t,e){if(p&&!t.$difference||w===(w=0===e.$difference?"y":"ies")||k(i,w),e.$selectedPartyIds.length>1?x?x.p(t,e):((x=hs(e)).c(),x.m(n,a)):x&&(x.d(1),x=null),e.$selectedPartyIds.length>1?M?M.p(t,e):((M=ds(e)).c(),M.m(s,u)):M&&(M.d(1),M=null),t.selectedPartyIds||t.$filteredParties){P=e.$filteredParties;for(var r=0;r<P.length;r+=1){const n=us(e,P,r);C[r]?C[r].p(t,n):(C[r]=ps(n),C[r].c(),C[r].m(l,null))}for(;r<C.length;r+=1)C[r].d(1);C.length=P.length}t.items&&(e.div0_binding(null,l),e.div0_binding(l,null)),p&&!t.innerHeight||N(l,"max-height",e.innerHeight-460+"px"),p&&!t.$selectedPartyIds||N(s,"background-color",1===e.$selectedPartyIds.length?"rgb(179, 219, 186)":"#eee"),p&&!t.isScrolling||N(f,"display",e.isScrolling?"block":"none")},i(t){p||(F(()=>{d||(d=G(n,ln,{duration:200},!0)),d.run(1)}),p=!0)},o(t){d||(d=G(n,ln,{duration:200},!1)),d.run(0),p=!1},d(e){e&&v(n),x&&x.d(),M&&M.d(),y(C,e),t.div0_binding(null,l),e&&d&&d.end()}}}function hs(t){var n,e,r,i,o,a,s,u,l,c,f,h,d,p,y,w,x,M,P,N,C,T,A,q,S,I=1===t.$overlap?"statement":"statements",D=t.$activeQuestions.length,E=`(${Math.round(t.$overlap/t.$activeQuestions.length*100)}%)`,U=1===Rt?"statement":"statements",H=t.$activeQuestions.length,W=`(${Math.round(t.$difference/t.$activeQuestions.length*100)}%)`;return{c(){n=_("div"),e=_("div"),(r=_("span")).textContent="same opinion in:",i=b(),o=_("span"),a=$(t.$overlap),s=b(),u=$(I),l=$("\n              of\n              "),c=$(D),f=b(),h=$(E),d=b(),p=_("div"),y=_("div"),(w=_("span")).innerHTML='<span class="svelte-18sklmw">mixed</span>\n\t\t\t                opinions in:\n\t\t\t              ',x=b(),M=_("span"),P=$(t.$difference),N=b(),C=$(U),T=$("\n              of\n              "),A=$(H),q=b(),S=$(W),r.className="label svelte-18sklmw",o.className="value svelte-18sklmw",n.className="overlap-diff overlap svelte-18sklmw",w.className="label svelte-18sklmw",M.className="value svelte-18sklmw",p.className="overlap-diff diff svelte-18sklmw"},m(t,v){m(t,n,v),g(n,e),g(e,r),g(e,i),g(e,o),g(o,a),g(e,s),g(e,u),g(e,l),g(e,c),g(e,f),g(e,h),m(t,d,v),m(t,p,v),g(p,y),g(y,w),g(y,x),g(y,M),g(M,P),g(y,N),g(y,C),g(y,T),g(y,A),g(y,q),g(y,S)},p(t,n){t.$overlap&&k(a,n.$overlap),t.$overlap&&I!==(I=1===n.$overlap?"statement":"statements")&&k(u,I),t.$activeQuestions&&D!==(D=n.$activeQuestions.length)&&k(c,D),(t.$overlap||t.$activeQuestions)&&E!==(E=`(${Math.round(n.$overlap/n.$activeQuestions.length*100)}%)`)&&k(h,E),t.$difference&&k(P,n.$difference),t.$activeQuestions&&H!==(H=n.$activeQuestions.length)&&k(A,H),(t.$difference||t.$activeQuestions)&&W!==(W=`(${Math.round(n.$difference/n.$activeQuestions.length*100)}%)`)&&k(S,W)},d(t){t&&(v(n),v(d),v(p))}}}function ds(t){var n,e,r,i,o=t.$selectedPartyIds.length;return{c(){n=_("span"),e=_("span"),r=$(o),i=$("\n              parties match your selection:"),e.className="svelte-18sklmw",n.className="label svelte-18sklmw"},m(t,o){m(t,n,o),g(n,e),g(e,r),g(n,i)},p(t,n){t.$selectedPartyIds&&o!==(o=n.$selectedPartyIds.length)&&k(r,o)},d(t){t&&v(n)}}}function ps(t){var n,e,r,i,o,a,s=t.party.name_short,u=t.party.name_full.replace(/(.*)\(.*\)/gi,"$1");return{c(){n=_("div"),e=_("h3"),r=$(s),i=b(),o=_("p"),a=$(u),e.className="svelte-18sklmw",o.className="svelte-18sklmw",n.className="matching-party svelte-18sklmw",N(n,"padding",zt.length>1?"0 0 10px 0":"10px 0")},m(t,s){m(t,n,s),g(n,e),g(e,r),g(n,i),g(n,o),g(o,a)},p(t,e){t.$filteredParties&&s!==(s=e.party.name_short)&&k(r,s),t.$filteredParties&&u!==(u=e.party.name_full.replace(/(.*)\(.*\)/gi,"$1"))&&k(a,u),t.selectedPartyIds&&N(n,"padding",zt.length>1?"0 0 10px 0":"10px 0")},d(t){t&&v(n)}}}function gs(t){var n,e,r,i,o,a,s,u;F(t.onwindowresize);for(var l=t.$activeQuestions,c=[],f=0;f<l.length;f+=1)c[f]=cs(ls(t,l,f));function h(t,n,e){c[t]&&(n&&J(()=>{c[t].d(n),c[t]=null}),c[t].o(e))}var d=new Ga({props:{containerHeight:t.innerHeight-150-100}}),p=t.$selectedPartyIds.length>0&&fs(t),w=new ss({});return{c(){n=_("main"),e=_("div");for(var s=0;s<c.length;s+=1)c[s].c();r=b(),d.$$.fragment.c(),i=b(),o=_("aside"),p&&p.c(),a=b(),w.$$.fragment.c(),o.className="svelte-18sklmw",n.className="svelte-18sklmw",u=M(window,"resize",t.onwindowresize)},m(t,u){m(t,n,u),g(n,e);for(var l=0;l<c.length;l+=1)c[l].m(e,null);g(n,r),tt(d,n,null),g(n,i),g(n,o),p&&p.m(o,null),m(t,a,u),tt(w,t,u),s=!0},p(t,n){if(t.$activeQuestions){l=n.$activeQuestions;for(var r=0;r<l.length;r+=1){const i=ls(n,l,r);c[r]?(c[r].p(t,i),c[r].i(1)):(c[r]=cs(i),c[r].c(),c[r].i(1),c[r].m(e,null))}for(X();r<c.length;r+=1)h(r,1,1);Z()}var i={};t.innerHeight&&(i.containerHeight=n.innerHeight-150-100),d.$set(i),n.$selectedPartyIds.length>0?p?(p.p(t,n),p.i(1)):((p=fs(n)).c(),p.i(1),p.m(o,null)):p&&(X(),J(()=>{p.d(1),p=null}),p.o(1),Z())},i(t){if(!s){for(var n=0;n<l.length;n+=1)c[n].i();d.$$.fragment.i(t),p&&p.i(),w.$$.fragment.i(t),s=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)h(t,0);d.$$.fragment.o(t),p&&p.o(),w.$$.fragment.o(t),s=!1},d(t){t&&v(n),y(c,t),d.$destroy(),p&&p.d(),t&&v(a),w.$destroy(t),u()}}}function ms(t,n,e){let r,i,o,a,s;u(t,jt,t=>{e("$activeQuestions",r=t)}),u(t,zt,t=>{e("$selectedPartyIds",i=t)}),u(t,Qt,t=>{e("$difference",o=t)}),u(t,Rt,t=>{e("$overlap",a=t)}),u(t,Vt,t=>{e("$filteredParties",s=t)});let l,c,f=0,h=0;return D(()=>{e("isScrolling",c=!!l&&l.scrollHeight>l.clientHeight)}),{innerWidth:f,innerHeight:h,partyList:l,isScrolling:c,$activeQuestions:r,$selectedPartyIds:i,$difference:o,$overlap:a,$filteredParties:s,onwindowresize:function(){f=window.innerWidth,e("innerWidth",f),h=window.innerHeight,e("innerHeight",h)},div0_binding:function(t,n){e("partyList",l=t)}}}class vs extends rt{constructor(t){super(),et(this,t,ms,gs,s,[])}}function ys(n){var e;return{c(){(e=_("footer")).innerHTML='<div class="inner svelte-1u32ov5"><p class="svelte-1u32ov5">\n\t\t\t      by\n\t\t\t      <a class="tulp-interactive svelte-1u32ov5" href="http://tulpinteractive.com" title="TULP interactive" target="_blank"><span>TULP</span>\n\t\t\t        interactive\n\t\t\t      </a></p>\n\t\t\t    <div class="links svelte-1u32ov5"><a class="about svelte-1u32ov5" href="about.html" target="_blank" title="about 2019 vote EU">\n\t\t\t        about\n\t\t\t      </a>\n\t\t\t      <a class="privacy svelte-1u32ov5" href="privacy-statement.html" target="_blank" title="privacy statement">\n\t\t\t        privacy\n\t\t\t      </a></div></div>',e.className="svelte-1u32ov5"},m(t,n){m(t,e,n)},p:t,i:t,o:t,d(t){t&&v(e)}}}class _s extends rt{constructor(t){super(),et(this,t,null,ys,s,[])}}function ws(n){var e,r,i=n.error.message;return{c(){e=_("p"),r=$(i),N(e,"color","red")},m(t,n){m(t,e,n),g(e,r)},p:t,i:t,o:t,d(t){t&&v(e)}}}function $s(n){var e,r,i=new vs({}),o=new pn({});return{c(){i.$$.fragment.c(),e=b(),o.$$.fragment.c()},m(t,n){tt(i,t,n),m(t,e,n),tt(o,t,n),r=!0},p:t,i(t){r||(i.$$.fragment.i(t),o.$$.fragment.i(t),r=!0)},o(t){i.$$.fragment.o(t),o.$$.fragment.o(t),r=!1},d(t){i.$destroy(t),t&&v(e),o.$destroy(t)}}}function bs(n){var e;return{c(){(e=_("p")).textContent="...loading data"},m(t,n){m(t,e,n)},p:t,i:t,o:t,d(t){t&&v(e)}}}function xs(t){var n,r,i,o;let a={ctx:t,current:null,pending:bs,then:$s,catch:ws,value:"null",error:"error",blocks:Array(3)};K(n=t.promise,a);var s=new rn({}),u=new _s({});return{c(){a.block.c(),r=b(),s.$$.fragment.c(),i=b(),u.$$.fragment.c()},m(t,n){a.block.m(t,a.anchor=n),a.mount=(()=>r.parentNode),a.anchor=r,m(t,r,n),tt(s,t,n),m(t,i,n),tt(u,t,n),o=!0},p(r,i){t=i,a.ctx=t,n!==(n=t.promise)&&K(n,a)||a.block.p(r,e(e({},t),a.resolved))},i(t){o||(a.block.i(),s.$$.fragment.i(t),u.$$.fragment.i(t),o=!0)},o(t){for(let t=0;t<3;t+=1){const n=a.blocks[t];n&&n.o()}s.$$.fragment.o(t),u.$$.fragment.o(t),o=!1},d(t){a.block.d(t),a=null,t&&v(r),s.$destroy(t),t&&v(i),u.$destroy(t)}}}function Ms(t){return{promise:Xt("NL")}}return new class extends rt{constructor(t){super(),et(this,t,Ms,xs,s,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
