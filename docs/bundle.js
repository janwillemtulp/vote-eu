var app=function(){"use strict";function t(){}const n=t=>t;function e(t,n){for(const e in n)t[e]=n[e];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function u(t,n,e){const r=n.subscribe(e);t.$$.on_destroy.push(r.unsubscribe?()=>r.unsubscribe():r)}const l=new Set;let c,f=!1;function h(){l.forEach(t=>{t[0](window.performance.now())||(l.delete(t),t[1]())}),(f=l.size>0)&&requestAnimationFrame(h)}function d(t){let n;return f||(f=!0,requestAnimationFrame(h)),{promise:new Promise(e=>{l.add(n=[t,e])}),abort(){l.delete(n)}}}function p(t,n){t.appendChild(n)}function g(t,n,e){t.insertBefore(n,e||null)}function m(t){t.parentNode.removeChild(t)}function v(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function y(t){return document.createElement(t)}function _(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function w(t){return document.createTextNode(t)}function $(){return w(" ")}function b(){return w("")}function x(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function M(t,n,e){null==e?t.removeAttribute(n):t.setAttribute(n,e)}function P(t,n){n=""+n,t.data!==n&&(t.data=n)}function k(t,n,e){t.style.setProperty(n,e)}let N,C=0,T={};function A(t,n,e,r,i,o,a,s=0){const u=16.666/r;let l="{\n";for(let t=0;t<=1;t+=u){const r=n+(e-n)*o(t);l+=100*t+`%{${a(r,1-r)}}\n`}const f=l+`100% {${a(e,1-e)}}\n}`,h=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(f)}_${s}`;if(!T[h]){if(!c){const t=y("style");document.head.appendChild(t),c=t.sheet}T[h]=!0,c.insertRule(`@keyframes ${h} ${f}`,c.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${h} ${r}ms linear ${i}ms 1 both`,C+=1,h}function q(t,n){t.style.animation=(t.style.animation||"").split(", ").filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")).join(", "),n&&!--C&&requestAnimationFrame(()=>{if(C)return;let t=c.cssRules.length;for(;t--;)c.deleteRule(t);T={}})}function S(t){N=t}function I(t){(function(){if(!N)throw new Error("Function called outside component initialization");return N})().$$.after_render.push(t)}const U=[],D=Promise.resolve();let E=!1;const H=[],W=[],O=[];function L(t){H.push(t)}function z(t){W.push(t)}function F(){const t=new Set;do{for(;U.length;){const t=U.shift();S(t),Y(t.$$)}for(;H.length;)H.shift()();for(;W.length;){const n=W.pop();t.has(n)||(n(),t.add(n))}}while(U.length);for(;O.length;)O.pop()();E=!1}function Y(t){t.fragment&&(t.update(t.dirty),o(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(z))}let j,V;function R(){return j||(j=Promise.resolve()).then(()=>{j=null}),j}function B(t,n,e){t.dispatchEvent(function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(`${n?"intro":"outro"}${e}`))}function Q(){V={remaining:0,callbacks:[]}}function X(){V.remaining||o(V.callbacks)}function Z(t){V.callbacks.push(t)}function J(e,r,i,a){let s=r(e,i),u=a?0:1,l=null,c=null,f=null;function h(){f&&q(e,f)}function p(t,n){const e=t.b-u;return n*=Math.abs(e),{a:u,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function g(r){const{delay:i=0,duration:a=300,easing:g=n,tick:m=t,css:v}=s,y={start:window.performance.now()+i,b:r};r||(y.group=V,V.remaining+=1),l?c=y:(v&&(h(),f=A(e,u,r,a,i,g,v)),r&&m(0,1),l=p(y,a),z(()=>B(e,r,"start")),d(t=>{if(c&&t>c.start&&(l=p(c,a),c=null,B(e,l.b,"start"),v&&(h(),f=A(e,u,l.b,l.duration,0,g,s.css))),l)if(t>=l.end)m(u=l.b,1-u),B(e,l.b,"end"),c||(l.b?h():--l.group.remaining||o(l.group.callbacks)),l=null;else if(t>=l.start){const n=t-l.start;u=l.a+l.d*g(n/l.duration),m(u,1-u)}return!(!l&&!c)}))}return{run(t){"function"==typeof s?R().then(()=>{s=s(),g(t)}):g(t)},end(){h(),l=c=null}}}function G(t,n){const r=n.token={};function i(t,i,o,a){if(n.token!==r)return;n.resolved=o&&{[o]:a};const s=e(e({},n.ctx),n.resolved),u=t&&(n.current=t)(s);n.block&&(n.blocks?n.blocks.forEach((t,e)=>{e!==i&&t&&(Q(),Z(()=>{t.d(1),n.blocks[e]=null}),t.o(1),X())}):n.block.d(1),u.c(),u.i&&u.i(1),u.m(n.mount(),n.anchor),F()),n.block=u,n.blocks&&(n.blocks[i]=u)}if((o=t)&&"function"==typeof o.then){if(t.then(t=>{i(n.then,1,n.value,t)},t=>{i(n.catch,2,n.error,t)}),n.current!==n.pending)return i(n.pending,0),!0}else{if(n.current!==n.then)return i(n.then,1,n.value,t),!0;n.resolved={[n.value]:t}}var o}function K(t,n,e){const{fragment:i,on_mount:s,on_destroy:u,after_render:l}=t.$$;i.m(n,e),z(()=>{const n=s.map(r).filter(a);u?u.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(z)}function tt(t,n){t.$$.dirty||(U.push(t),E||(E=!0,D.then(F)),t.$$.dirty={}),t.$$.dirty[n]=!0}function nt(n,e,r,a,s,u){const l=N;S(n);const c=e.props||{},f=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:null};let h=!1;var d;f.ctx=r?r(n,c,(t,e)=>{f.ctx&&s(f.ctx[t],f.ctx[t]=e)&&(f.bound[t]&&f.bound[t](e),h&&tt(n,t))}):c,f.update(),h=!0,o(f.before_render),f.fragment=a(f.ctx),e.target&&(e.hydrate?f.fragment.l((d=e.target,Array.from(d.childNodes))):f.fragment.c(),e.intro&&n.$$.fragment.i&&n.$$.fragment.i(),K(n,e.target,e.anchor),F()),S(l)}class et{$destroy(){var n,e;e=!0,(n=this).$$&&(o(n.$$.on_destroy),n.$$.fragment.d(e),n.$$.on_destroy=n.$$.fragment=null,n.$$.ctx={}),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}var rt={},it={},ot=34,at=10,st=13;function ut(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function lt(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}function ct(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function ft(t){var n,e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((n=t.getUTCFullYear())<0?"-"+ct(-n,6):n>9999?"+"+ct(n,6):ct(n,4))+"-"+ct(t.getUTCMonth()+1,2)+"-"+ct(t.getUTCDate(),2)+(o?"T"+ct(e,2)+":"+ct(r,2)+":"+ct(i,2)+"."+ct(o,3)+"Z":i?"T"+ct(e,2)+":"+ct(r,2)+":"+ct(i,2)+"Z":r||e?"T"+ct(e,2)+":"+ct(r,2)+"Z":"")}function ht(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return it;if(l)return l=!1,rt;var n,r,i=a;if(t.charCodeAt(i)===ot){for(;a++<o&&t.charCodeAt(a)!==ot||t.charCodeAt(++a)===ot;);return(n=a)>=o?u=!0:(r=t.charCodeAt(a++))===at?l=!0:r===st&&(l=!0,t.charCodeAt(a)===at&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(n=a++))===at)l=!0;else if(r===st)l=!0,t.charCodeAt(a)===at&&++a;else if(r!==e)continue;return t.slice(i,n)}return u=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===at&&--o,t.charCodeAt(o-1)===st&&--o;(r=c())!==it;){for(var f=[];r!==rt&&r!==it;)f.push(r),r=c();n&&null==(f=n(f,s++))||i.push(f)}return i}function i(n,e){return n.map(function(n){return e.map(function(t){return a(n[t])}).join(t)})}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?ft(t):n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=ut(t);return function(r,i){return n(e(r),i,t)}}(t,n):ut(t)});return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=lt(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=lt(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")}}}var dt=ht(",").parse;ht("\t");function pt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var gt=function(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),function(t,n){return fetch(t,n).then(pt)}(n,e).then(function(n){return t(n,r)})}}(dt);function mt(t,n){return{subscribe:vt(t,n).subscribe}}function vt(n,e=t){let r;const i=[];function o(t){if(s(n,t)){if(n=t,!r)return;i.forEach(t=>t[1]()),i.forEach(t=>t[0](n))}}return{set:o,update:function(t){o(t(n))},subscribe:function(a,s=t){const u=[a,s];return i.push(u),1===i.length&&(r=e(o)||t),a(n),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&r()}}}}function yt(t,n,e){const r=!Array.isArray(t);r&&(t=[t]);const i=n.length<2;let a={};return mt(e,e=>{let s=!1;const u=[];let l=0;const c=()=>{if(l)return;const t=n(r?u[0]:u,e);i&&a!==(a=t)&&e(t)},f=t.map((t,n)=>t.subscribe(t=>{u[n]=t,l&=~(1<<n),s&&c()},()=>{l|=1<<n}));return s=!0,c(),function(){o(f)}})}function _t(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var wt,$t,bt=(1===(wt=_t).length&&($t=wt,wt=function(t,n){return _t($t(t),n)}),{left:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;wt(t[i],n)<0?e=i+1:r=i}return e},right:function(t,n,e,r){for(null==e&&(e=0),null==r&&(r=t.length);e<r;){var i=e+r>>>1;wt(t[i],n)>0?r=i:e=i+1}return e}}).right;var xt=Math.sqrt(50),Mt=Math.sqrt(10),Pt=Math.sqrt(2);function kt(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=xt?10:o>=Mt?5:o>=Pt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=xt?10:o>=Mt?5:o>=Pt?2:1)}const Nt=vt([]),Ct=mt([{code:"AT",name:"Austria",seats:18},{code:"BE",name:"Belgium",seats:21},{code:"BG",name:"Bulgaria",seats:17},{code:"HR",name:"Croatia",seats:11},{code:"CY",name:"Cyprus",seats:6},{code:"CZ",name:"Czech Republic",seats:21},{code:"DK",name:"Denmark",seats:13},{code:"EE",name:"Estonia",seats:6},{code:"FI",name:"Finland",seats:13},{code:"FR",name:"France",seats:74},{code:"DE",name:"Germany",seats:96},{code:"EL",name:"Greece",seats:21},{code:"HU",name:"Hungary",seats:21},{code:"IE",name:"Ireland",seats:11},{code:"IT",name:"Italy",seats:73},{code:"LV",name:"Latvia",seats:8},{code:"LT",name:"Lithuania",seats:11},{code:"LU",name:"Luxembourg",seats:6},{code:"MT",name:"Malta",seats:6},{code:"NL",name:"The Netherlands",seats:26},{code:"PL",name:"Poland",seats:51},{code:"PT",name:"Portugal",seats:21},{code:"RO",name:"Romania",seats:32},{code:"SK",name:"Slovakia",seats:13},{code:"SI",name:"Slovenia",seats:8},{code:"SP",name:"Spain",seats:54},{code:"SE",name:"Sweden",seats:20},{code:"UK",name:"United Kingdom",seats:73}]),Tt=vt({code:"NL",name:"The Netherlands",seats:26}),At=yt([Nt,Tt],([t,n])=>t.filter(t=>t.country_code===n.code)),qt=vt(!1),St=new Map;St.set(100,"hsl(200, 50%, 50%)"),St.set(50,"#999"),St.set(0,"hsl(0, 50%, 50%)"),St.set(null,"hsl(310, 50%, 70%)");const It=new Map;It.set(100,"hsl(204, 35%, 78%)"),It.set(50,"hsl(0, 0%, 80%)"),It.set(0,"hsl(3, 35%, 75%)"),It.set(null,"hsl(307, 30%, 83%)");const Ut=new Map;Ut.set(100,"hsl(200, 86%, 21%)"),Ut.set(50,"hsl(0, 0%, 23%)"),Ut.set(0,"hsl(0, 81%, 19%)"),Ut.set(null,"hsl(311, 62%, 20%)");const Dt=new Map;Dt.set(100,"Agree"),Dt.set(50,"Neutral"),Dt.set(0,"Disagree"),Dt.set(null,"No opinion");const Et=yt(At,t=>t.reduce((t,n)=>{const e=t.find(t=>t.question.id===n.question_id&&t.answer.simplifiedValue===n.simplifiedAnswer);return e?e.parties.push({id:n.party_id,image:n.party_image,name_full:n.party_name_full,name_short:n.party_name_short,motivation:{source:n.motivation_src,link:n.motivation_src_link,text:n.motivation}}):t.push({question:{id:n.question_id,shared_id:n.question_shared_id,text:n.question},answer:{value:n.answer,simplifiedValue:n.simplifiedAnswer,color:St.get(n.simplifiedAnswer),colorLight:It.get(n.simplifiedAnswer),colorDark:Ut.get(n.simplifiedAnswer),label:Dt.get(n.simplifiedAnswer)},country:{code:n.country_code,name:n.country_name},parties:[{id:n.party_id,image:n.party_image,name_full:n.party_name_full,name_short:n.party_name_short,motivation:{source:n.motivation_src,link:n.motivation_src_link,text:n.motivation}}]}),t.sort((t,n)=>t.question.id-n.question.id)},[])),Ht=vt([]);function Wt(t,n){const e=t.filter(t=>0!==t.question[n]&&null!==t.answer.value);return e.reduce((t,e)=>t+2*Math.max(0,e.question[n]*(e.answer.value-50)),0)/e.length}const Ot=yt(Et,t=>t.reduce((n,e)=>(e.parties.forEach(e=>{if(!n.find(t=>t.id===e.id)){const r=t.filter(t=>t.parties.map(t=>t.id).includes(e.id)),i=r.filter(t=>0!==t.question.xy_lr),o=r.filter(t=>0!==t.question.xy_lc);n.push({...e,spectrum:{leftRight:i.reduce((t,n)=>t+n.question.xy_lr*(n.answer.value-50)+50,0)/i.length,liberalConservative:100-o.reduce((t,n)=>t+n.question.xy_lc*(n.answer.value-50)+50,0)/o.length,environment:Wt(r,"environmental_protection"),eu:Wt(r,"european_integration"),society:Wt(r,"liberal_society"),law:Wt(r,"law_and_order"),economy:Wt(r,"economic_liberalisation"),finance:Wt(r,"restrictive_financial_policy"),immigration:Wt(r,"restrictive_immigration_policy")},opinionCounts:{noOpinion:r.filter(t=>null===t.answer.value).length,shared:r.filter(t=>null!==t.answer.value&&t.parties.length>1).length,unique:r.filter(t=>null!==t.answer.value&&1===t.parties.length).length}})}}),n),[])),Lt=yt(At,t=>t.reduce((t,n)=>(t.map(t=>t.id).includes(n.question_id)||t.push({id:n.question_id,shared_id:n.question_shared_id,text:n.question}),t),[])),zt=yt([Ot,Ht],([t,n])=>t.filter(t=>n.includes(t.id)).sort((t,n)=>t.name_short<n.name_short?-1:t.name_short>n.name_short?1:0),[]),Ft=yt([Et,Ht],([t,n])=>t.filter(t=>n.every(n=>t.parties.map(t=>t.id).includes(n))).length,0),Yt=yt([Lt,Ft],([t,n])=>t.length-n,0),jt=t=>""===t?null:+t;async function Vt(t){gt(`./data/${t}.csv`,t=>({...t,answer:jt(t.answer),simplifiedAnswer:null===jt(t.answer)?null:jt(t.answer)<50?0:jt(t.answer)>50?100:50,party_id:jt(t.party_id),question_id:jt(t.question_id),question_shared_id:jt(t.question_shared_id),country_code:["VL","WA"].includes(t.country_code)?"BE":t.country_code,country_name:["VL","WA"].includes(t.country_code)?"Belgium":t.country_name})).then(t=>{Nt.set(t),console.log(t)})}function Rt(t,n,e){const r=Object.create(t);return r.country=n[e],r}function Bt(t){var n,e,r,i,o,a=t.country.name;return{c(){n=y("option"),e=w(a),r=$(),n.__value=i=t.country.code,n.value=n.__value,n.selected=o=t.country.code===t.$selectedCountry.code?"selected":""},m(t,i){g(t,n,i),p(n,e),p(n,r)},p(t,r){t.$allCountries&&a!==(a=r.country.name)&&P(e,a),t.$allCountries&&i!==(i=r.country.code)&&(n.__value=i),n.value=n.__value,(t.$allCountries||t.$selectedCountry)&&o!==(o=r.country.code===r.$selectedCountry.code?"selected":"")&&(n.selected=o)},d(t){t&&m(n)}}}function Qt(n){for(var e,r,i=n.$allCountries,o=[],a=0;a<i.length;a+=1)o[a]=Bt(Rt(n,i,a));return{c(){e=y("select");for(var t=0;t<o.length;t+=1)o[t].c();e.className="svelte-xiqido",r=x(e,"change",n.change_handler)},m(t,n){g(t,e,n);for(var r=0;r<o.length;r+=1)o[r].m(e,null)},p(t,n){if(t.$allCountries||t.$selectedCountry){i=n.$allCountries;for(var r=0;r<i.length;r+=1){const a=Rt(n,i,r);o[r]?o[r].p(t,a):(o[r]=Bt(a),o[r].c(),o[r].m(e,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}},i:t,o:t,d(t){t&&m(e),v(o,t),r()}}}function Xt(t,n,e){let r,i,o;function a(t){r=i.find(n=>n.code===t),Tt.set(r),o=[],Ht.set(o),Vt(t)}return u(t,Tt,t=>{e("$selectedCountry",r=t)}),u(t,Ct,t=>{e("$allCountries",i=t)}),u(t,Ht,t=>{e("$selectedPartyIds",o=t)}),{setSelectedCountry:a,$selectedCountry:r,$allCountries:i,change_handler:function(){return a(this.value)}}}class Zt extends et{constructor(t){super(),nt(this,t,Xt,Qt,s,[])}}function Jt(t){var n,e,r,i,o,a,s,u,l,c,f,h=new Zt({});return{c(){n=y("div"),e=y("div"),(r=y("div")).innerHTML='<img class="logo svelte-1w3pi2v" src="img/logo.png" alt="2019 vote EU">\n\t\t\t      <h2 class="svelte-1w3pi2v">Vote matching, but the other way around</h2>',i=$(),(o=y("ol")).innerHTML="<li>Give your opinion on any of 22 policy statements</li>\n\t\t\t      <li>This will eliminate parties that don't share your opinion</li>\n\t\t\t      <li>\n\t\t\t        All the opinions that the remaining parties share are automatically marked as well\n\t\t\t      </li>\n\t\t\t      <li>You can only give opinions that are shared by political parties</li>",a=$(),s=y("div"),h.$$.fragment.c(),u=$(),(l=y("button")).textContent="start",k(r,"display","grid"),k(r,"grid-template-rows","1fr 1fr"),k(r,"align-items","end"),o.className="svelte-1w3pi2v",l.className="svelte-1w3pi2v",k(s,"text-align","right"),e.className="content svelte-1w3pi2v",n.className="modal svelte-1w3pi2v",f=x(l,"click",t.click_handler)},m(f,d){g(f,n,d),p(n,e),p(e,r),p(e,i),p(e,o),p(e,a),p(e,s),K(h,s,null),p(s,u),p(s,l),L(()=>t.div3_binding(n,null)),c=!0},p(t,e){t.items&&(e.div3_binding(null,n),e.div3_binding(n,null))},i(t){c||(h.$$.fragment.i(t),c=!0)},o(t){h.$$.fragment.o(t),c=!1},d(e){e&&m(n),h.$destroy(),t.div3_binding(null,n),f()}}}function Gt(t,n,e){let r;function i(){document.body.style.overflow="auto",r.style.display="none",e("modal",r)}return{modal:r,closeModal:i,click_handler:function(){return i()},div3_binding:function(t,n){e("modal",r=t)}}}class Kt extends et{constructor(t){super(),nt(this,t,Gt,Jt,s,[])}}function tn(n){var e,r,i,o,a,s,u;return{c(){e=y("div"),r=w("party opinions:\n  "),i=y("label"),o=y("input"),a=$(),s=y("span"),o.id="opinion-distribution",M(o,"type","checkbox"),o.className="svelte-17acc7c",s.className="slider round svelte-17acc7c",i.className="switch svelte-17acc7c",k(e,"text-align","right"),u=x(o,"click",n.click_handler)},m(t,n){g(t,e,n),p(e,r),p(e,i),p(i,o),p(i,a),p(i,s)},p:t,i:t,o:t,d(t){t&&m(e),u()}}}function nn(t,n,e){let r;return u(t,qt,t=>{e("$showDistributions",r=t)}),{$showDistributions:r,click_handler:function(){const t=r=!r;return qt.set(r),t}}}class en extends et{constructor(t){super(),nt(this,t,nn,tn,s,[])}}function rn(t){var n=t-1;return n*n*n+1}function on(t,{delay:n=0,duration:e=400}){const r=+getComputedStyle(t).opacity;return{delay:n,duration:e,css:t=>`opacity: ${t*r}`}}function an(t,{delay:n=0,duration:e=400,easing:r=rn,x:i=0,y:o=0,opacity:a=0}){const s=getComputedStyle(t),u=+s.opacity,l="none"===s.transform?"":s.transform,c=u*(1-a);return{delay:n,duration:e,easing:r,css:(t,n)=>`\n\t\t\ttransform: ${l} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${u-c*n}`}}function sn(t){var n,e,r,i;return{c(){(n=y("button")).innerHTML='<i class="fas fa-times-circle"></i>\n\t\t\t            clear selection\n\t\t\t          ',n.className="clear-selection svelte-1s1qzpv",i=x(n,"click",t.click_handler)},m(t,e){g(t,n,e),r=!0},i(t){r||(z(()=>{e||(e=J(n,an,{x:-200,duration:300},!0)),e.run(1)}),r=!0)},o(t){e||(e=J(n,an,{x:-200,duration:300},!1)),e.run(0),r=!1},d(t){t&&(m(n),e&&e.end()),i()}}}function un(t){var n,e,r,i,o,a,s,u,l,c,f,h,d,v,_,b,x,M,N,C,T,A,q,S,I,U,D,E,H,W,O,L,z,F,Y,j,V,R,B,J,G,tt=t.$selectedCountry.name,nt=t.$selectedCountry.seats,et=new Zt({}),rt=new en({}),it=new Zt({}),ot=new en({}),at=t.$selectedPartyIds.length>0&&sn(t);return{c(){n=y("header"),e=y("div"),r=y("div"),i=y("div"),o=y("img"),a=$(),s=y("div"),et.$$.fragment.c(),u=$(),rt.$$.fragment.c(),l=$(),c=y("div"),f=y("h1"),h=w(tt),d=$(),v=y("p"),_=y("em"),b=w(nt),x=w(" seats"),M=w("\n          in EU parliament"),N=$(),C=y("div"),it.$$.fragment.c(),T=$(),ot.$$.fragment.c(),A=$(),q=y("div"),S=y("div"),at&&at.c(),I=$(),(U=y("div")).textContent="Agree",D=$(),(E=y("div")).textContent="Neutral",H=$(),(W=y("div")).textContent="Disagree",O=$(),(L=y("div")).textContent="No Opinion",z=$(),(F=y("div")).textContent="Agree",Y=$(),(j=y("div")).textContent="Neut.",V=$(),(R=y("div")).textContent="Dis-agr.",B=$(),(J=y("div")).textContent="No Opin.",o.src="img/logo.png",o.alt="2019 vote EU",o.className="logo svelte-1s1qzpv",s.className="left-country-select svelte-1s1qzpv",i.className="logo-container svelte-1s1qzpv",f.className="svelte-1s1qzpv",v.className="byline svelte-1s1qzpv",c.className="country svelte-1s1qzpv",C.className="right-country-select svelte-1s1qzpv",r.className="country-container svelte-1s1qzpv",k(S,"height","26px"),k(S,"text-align","right"),U.className="opinion-label bigger svelte-1s1qzpv",k(U,"color","hsl(200, 50%, 50%)"),E.className="opinion-label bigger svelte-1s1qzpv",k(E,"color","#999"),W.className="opinion-label bigger svelte-1s1qzpv",k(W,"color","hsl(0, 50%, 50%)"),L.className="opinion-label bigger svelte-1s1qzpv",k(L,"color","hsl(310, 50%, 70%)"),F.className="opinion-label smaller svelte-1s1qzpv",k(F,"color","hsl(200, 50%, 50%)"),j.className="opinion-label smaller svelte-1s1qzpv",k(j,"color","#999"),R.className="opinion-label smaller svelte-1s1qzpv",k(R,"color","hsl(0, 50%, 50%)"),J.className="opinion-label smaller svelte-1s1qzpv",k(J,"color","hsl(310, 50%, 70%)"),q.className="container-headers svelte-1s1qzpv",n.className="svelte-1s1qzpv"},m(t,m){g(t,n,m),p(n,e),p(e,r),p(r,i),p(i,o),p(i,a),p(i,s),K(et,s,null),p(s,u),K(rt,s,null),p(r,l),p(r,c),p(c,f),p(f,h),p(c,d),p(c,v),p(v,_),p(_,b),p(_,x),p(v,M),p(r,N),p(r,C),K(it,C,null),p(C,T),K(ot,C,null),p(e,A),p(e,q),p(q,S),at&&at.m(S,null),p(q,I),p(q,U),p(q,D),p(q,E),p(q,H),p(q,W),p(q,O),p(q,L),p(q,z),p(q,F),p(q,Y),p(q,j),p(q,V),p(q,R),p(q,B),p(q,J),G=!0},p(t,n){G&&!t.$selectedCountry||tt===(tt=n.$selectedCountry.name)||P(h,tt),G&&!t.$selectedCountry||nt===(nt=n.$selectedCountry.seats)||P(b,nt),n.$selectedPartyIds.length>0?at?at.i(1):((at=sn(n)).c(),at.i(1),at.m(S,null)):at&&(Q(),Z(()=>{at.d(1),at=null}),at.o(1),X())},i(t){G||(et.$$.fragment.i(t),rt.$$.fragment.i(t),it.$$.fragment.i(t),ot.$$.fragment.i(t),at&&at.i(),G=!0)},o(t){et.$$.fragment.o(t),rt.$$.fragment.o(t),it.$$.fragment.o(t),ot.$$.fragment.o(t),at&&at.o(),G=!1},d(t){t&&m(n),et.$destroy(),rt.$destroy(),it.$destroy(),ot.$destroy(),at&&at.d()}}}function ln(t,n,e){let r,i;return u(t,Tt,t=>{e("$selectedCountry",r=t)}),u(t,Ht,t=>{e("$selectedPartyIds",i=t)}),{$selectedCountry:r,$selectedPartyIds:i,click_handler:function(){const t=i=[];return Ht.set(i),t}}}class cn extends et{constructor(t){super(),nt(this,t,ln,un,s,[])}}function fn(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}const hn=Symbol("implicit");function dn(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function pn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function gn(){}var mn="\\s*([+-]?\\d+)\\s*",vn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",yn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_n=/^#([0-9a-f]{3})$/,wn=/^#([0-9a-f]{6})$/,$n=new RegExp("^rgb\\("+[mn,mn,mn]+"\\)$"),bn=new RegExp("^rgb\\("+[yn,yn,yn]+"\\)$"),xn=new RegExp("^rgba\\("+[mn,mn,mn,vn]+"\\)$"),Mn=new RegExp("^rgba\\("+[yn,yn,yn,vn]+"\\)$"),Pn=new RegExp("^hsl\\("+[vn,yn,yn]+"\\)$"),kn=new RegExp("^hsla\\("+[vn,yn,yn,vn]+"\\)$"),Nn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(t){var n;return t=(t+"").trim().toLowerCase(),(n=_n.exec(t))?new In((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=wn.exec(t))?Tn(parseInt(n[1],16)):(n=$n.exec(t))?new In(n[1],n[2],n[3],1):(n=bn.exec(t))?new In(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=xn.exec(t))?An(n[1],n[2],n[3],n[4]):(n=Mn.exec(t))?An(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Pn.exec(t))?Dn(n[1],n[2]/100,n[3]/100,1):(n=kn.exec(t))?Dn(n[1],n[2]/100,n[3]/100,n[4]):Nn.hasOwnProperty(t)?Tn(Nn[t]):"transparent"===t?new In(NaN,NaN,NaN,0):null}function Tn(t){return new In(t>>16&255,t>>8&255,255&t,1)}function An(t,n,e,r){return r<=0&&(t=n=e=NaN),new In(t,n,e,r)}function qn(t){return t instanceof gn||(t=Cn(t)),t?new In((t=t.rgb()).r,t.g,t.b,t.opacity):new In}function Sn(t,n,e,r){return 1===arguments.length?qn(t):new In(t,n,e,null==r?1:r)}function In(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Un(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Dn(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new En(t,n,e,r)}function En(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Hn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}dn(gn,Cn,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),dn(In,Sn,pn(gn,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new In(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new In(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Un(this.r)+Un(this.g)+Un(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),dn(En,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof En)return new En(t.h,t.s,t.l,t.opacity);if(t instanceof gn||(t=Cn(t)),!t)return new En;if(t instanceof En)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=n===o?(e-r)/s+6*(e<r):e===o?(r-n)/s+2:(n-e)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new En(a,s,u,t.opacity)}(t):new En(t,n,e,null==r?1:r)},pn(gn,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new En(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new En(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new In(Hn(t>=240?t-240:t+120,i,r),Hn(t,i,r),Hn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Wn=Math.PI/180,On=180/Math.PI,Ln=.96422,zn=1,Fn=.82521,Yn=4/29,jn=6/29,Vn=3*jn*jn,Rn=jn*jn*jn;function Bn(t){if(t instanceof Qn)return new Qn(t.l,t.a,t.b,t.opacity);if(t instanceof Kn){if(isNaN(t.h))return new Qn(t.l,0,0,t.opacity);var n=t.h*Wn;return new Qn(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof In||(t=qn(t));var e,r,i=Gn(t.r),o=Gn(t.g),a=Gn(t.b),s=Xn((.2225045*i+.7168786*o+.0606169*a)/zn);return i===o&&o===a?e=r=s:(e=Xn((.4360747*i+.3850649*o+.1430804*a)/Ln),r=Xn((.0139322*i+.0971045*o+.7141733*a)/Fn)),new Qn(116*s-16,500*(e-s),200*(s-r),t.opacity)}function Qn(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Xn(t){return t>Rn?Math.pow(t,1/3):t/Vn+Yn}function Zn(t){return t>jn?t*t*t:Vn*(t-Yn)}function Jn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Gn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Kn(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}dn(Qn,function(t,n,e,r){return 1===arguments.length?Bn(t):new Qn(t,n,e,null==r?1:r)},pn(gn,{brighter:function(t){return new Qn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Qn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new In(Jn(3.1338561*(n=Ln*Zn(n))-1.6168667*(t=zn*Zn(t))-.4906146*(e=Fn*Zn(e))),Jn(-.9787684*n+1.9161415*t+.033454*e),Jn(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),dn(Kn,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Kn)return new Kn(t.h,t.c,t.l,t.opacity);if(t instanceof Qn||(t=Bn(t)),0===t.a&&0===t.b)return new Kn(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*On;return new Kn(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Kn(t,n,e,null==r?1:r)},pn(gn,{brighter:function(t){return new Kn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Kn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Bn(this).rgb()}}));var te=-.14861,ne=1.78277,ee=-.29227,re=-.90649,ie=1.97294,oe=ie*re,ae=ie*ne,se=ne*ee-re*te;function ue(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function le(t){return function(){return t}}function ce(t){return 1==(t=+t)?fe:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):le(isNaN(n)?e:n)}}function fe(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):le(isNaN(t)?n:t)}dn(ue,function(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof ue)return new ue(t.h,t.s,t.l,t.opacity);t instanceof In||(t=qn(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(se*r+oe*n-ae*e)/(se+oe-ae),o=r-i,a=(ie*(e-i)-ee*o)/re,s=Math.sqrt(a*a+o*o)/(ie*i*(1-i)),u=s?Math.atan2(a,o)*On-120:NaN;return new ue(u<0?u+360:u,s,i,t.opacity)}(t):new ue(t,n,e,null==r?1:r)},pn(gn,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ue(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ue(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Wn,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new In(255*(n+e*(te*r+ne*i)),255*(n+e*(ee*r+re*i)),255*(n+e*(ie*r)),this.opacity)}}));var he=function t(n){var e=ce(n);function r(t,n){var r=e((t=Sn(t)).r,(n=Sn(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=fe(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function de(t,n){return n-=t=+t,function(e){return t+n*e}}var pe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ge=new RegExp(pe.source,"g");function me(t,n){var e,r,i,o=pe.lastIndex=ge.lastIndex=0,a=-1,s=[],u=[];for(t+="",n+="";(e=pe.exec(t))&&(r=ge.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(e=e[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:de(e,r)})),o=ge.lastIndex;return o<n.length&&(i=n.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(n){return t(n)+""}}(u[0].x):function(t){return function(){return t}}(n):(n=u.length,function(t){for(var e,r=0;r<n;++r)s[(e=u[r]).i]=e.x(t);return s.join("")})}function ve(t,n){var e,r=typeof n;return null==n||"boolean"===r?le(n):("number"===r?de:"string"===r?(e=Cn(n))?(n=e,he):me:n instanceof Cn?he:n instanceof Date?function(t,n){var e=new Date;return n-=t=+t,function(r){return e.setTime(t+n*r),e}}:Array.isArray(n)?function(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=ve(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=ve(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}:de)(t,n)}function ye(t,n){return n-=t=+t,function(e){return Math.round(t+n*e)}}var _e,we,$e,be,xe=180/Math.PI,Me={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pe(t,n,e,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(u=t*e+n*r)&&(e-=t*u,r-=n*u),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,u/=s),t*r<n*e&&(t=-t,n=-n,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*xe,skewX:Math.atan(u)*xe,scaleX:a,scaleY:s}}function ke(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,n,null,e);s.push({i:u-4,x:de(t,i)},{i:u-2,x:de(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:de(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,s,u),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:de(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,s,u),function(t,n,e,r,o,a){if(t!==e||n!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:de(t,e)},{i:s-2,x:de(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var n,e=-1,r=u.length;++e<r;)s[(n=u[e]).i]=n.x(t);return s.join("")}}}var Ne=ke(function(t){return"none"===t?Me:(_e||(_e=document.createElement("DIV"),we=document.documentElement,$e=document.defaultView),_e.style.transform=t,t=$e.getComputedStyle(we.appendChild(_e),null).getPropertyValue("transform"),we.removeChild(_e),Pe(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Ce=ke(function(t){return null==t?Me:(be||(be=document.createElementNS("http://www.w3.org/2000/svg","g")),be.setAttribute("transform",t),(t=be.transform.baseVal.consolidate())?Pe((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Me)},", ",")",")");Math.SQRT2;function Te(t){return+t}var Ae=[0,1];function qe(t){return t}function Se(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function Ie(t){var n,e=t[0],r=t[t.length-1];return e>r&&(n=e,e=r,r=n),function(t){return Math.max(e,Math.min(r,t))}}function Ue(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=Se(i,r),o=e(a,o)):(r=Se(r,i),o=e(o,a)),function(t){return o(r(t))}}function De(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=Se(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=bt(t,n,1,r)-1;return o[e](i[e](n))}}function Ee(t,n){return function(){var t,n,e,r,i,o,a=Ae,s=Ae,u=ve,l=qe;function c(){return r=Math.min(a.length,s.length)>2?De:Ue,i=o=null,f}function f(n){return isNaN(n=+n)?e:(i||(i=r(a.map(t),s,u)))(t(l(n)))}return f.invert=function(e){return l(n((o||(o=r(s,a.map(t),de)))(e)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Te),l===qe||(l=Ie(a)),c()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=ye,c()},f.clamp=function(t){return arguments.length?(l=t?Ie(a):qe,f):l!==qe},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(e=t,f):e},function(e,r){return t=e,n=r,c()}}()(t,n)}function He(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function We(t){return(t=He(Math.abs(t)))?t[1]:NaN}var Oe,Le=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ze(t){return new Fe(t)}function Fe(t){if(!(n=Le.exec(t)))throw new Error("invalid format: "+t);var n;this.fill=n[1]||" ",this.align=n[2]||">",this.sign=n[3]||"-",this.symbol=n[4]||"",this.zero=!!n[5],this.width=n[6]&&+n[6],this.comma=!!n[7],this.precision=n[8]&&+n[8].slice(1),this.trim=!!n[9],this.type=n[10]||""}function Ye(t,n){var e=He(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ze.prototype=Fe.prototype,Fe.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var je={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return Ye(100*t,n)},r:Ye,s:function(t,n){var e=He(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(Oe=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+He(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Ve(t){return t}var Re,Be,Qe,Xe=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ze(t){var n,e,r=t.grouping&&t.thousands?(n=t.grouping,e=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,s=n[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=n[a=(a+1)%n.length];return o.reverse().join(e)}):Ve,i=t.currency,o=t.decimal,a=t.numerals?function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}}(t.numerals):Ve,s=t.percent||"%";function u(t){var n=(t=ze(t)).fill,e=t.align,u=t.sign,l=t.symbol,c=t.zero,f=t.width,h=t.comma,d=t.precision,p=t.trim,g=t.type;"n"===g?(h=!0,g="g"):je[g]||(null==d&&(d=12),p=!0,g="g"),(c||"0"===n&&"="===e)&&(c=!0,n="0",e="=");var m="$"===l?i[0]:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",v="$"===l?i[1]:/[%p]/.test(g)?s:"",y=je[g],_=/[defgprs%]/.test(g);function w(t){var i,s,l,w=m,$=v;if("c"===g)$=y(t)+$,t="";else{var b=(t=+t)<0;if(t=y(Math.abs(t),d),p&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),b&&0==+t&&(b=!1),w=(b?"("===u?u:"-":"-"===u||"("===u?"":u)+w,$=("s"===g?Xe[8+Oe/3]:"")+$+(b&&"("===u?")":""),_)for(i=-1,s=t.length;++i<s;)if(48>(l=t.charCodeAt(i))||l>57){$=(46===l?o+t.slice(i+1):t.slice(i))+$,t=t.slice(0,i);break}}h&&!c&&(t=r(t,1/0));var x=w.length+t.length+$.length,M=x<f?new Array(f-x+1).join(n):"";switch(h&&c&&(t=r(M+t,M.length?f-$.length:1/0),M=""),e){case"<":t=w+t+$+M;break;case"=":t=w+M+t+$;break;case"^":t=M.slice(0,x=M.length>>1)+w+t+$+M.slice(x);break;default:t=M+w+t+$}return a(t)}return d=null==d?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),w.toString=function(){return t+""},w}return{format:u,formatPrefix:function(t,n){var e=u(((t=ze(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(We(n)/3))),i=Math.pow(10,-r),o=Xe[8+r/3];return function(t){return e(i*t)+o}}}}function Je(t,n,e,r){var i,o=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=xt?i*=10:o>=Mt?i*=5:o>=Pt&&(i*=2),n<t?-i:i}(t,n,e);switch((r=ze(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(We(n)/3)))-We(Math.abs(t)))}(o,a))||(r.precision=i),Qe(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,We(n)-We(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-We(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Be(r)}function Ge(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var r,i,o,a,s=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=kt(t,n,e))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Je(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i=n(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=kt(s,u,e))>0?r=kt(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,e):r<0&&(r=kt(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,e)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,n(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,n(i)),t},t}Re=Ze({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Be=Re.format,Qe=Re.formatPrefix;var Ke=new Date,tr=new Date;function nr(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var a,s=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return s;do{s.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<r);return s},i.filter=function(e){return nr(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return Ke.setTime(+n),tr.setTime(+r),t(Ke),t(tr),Math.floor(e(Ke,tr))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}var er=nr(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});er.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?nr(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):er:null};var rr=6e4,ir=6048e5,or=(nr(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),nr(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,n){t.setTime(+t+n*rr)},function(t,n){return(n-t)/rr},function(t){return t.getMinutes()}),nr(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*rr)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),nr(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*rr)/864e5},function(t){return t.getDate()-1}));function ar(t){return nr(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*rr)/ir})}var sr=ar(0),ur=ar(1),lr=(ar(2),ar(3),ar(4)),cr=(ar(5),ar(6),nr(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),nr(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));cr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?nr(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};nr(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*rr)},function(t,n){return(n-t)/rr},function(t){return t.getUTCMinutes()}),nr(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()});var fr=nr(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1});function hr(t){return nr(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/ir})}var dr=hr(0),pr=hr(1),gr=(hr(2),hr(3),hr(4)),mr=(hr(5),hr(6),nr(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),nr(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function vr(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function yr(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _r(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}mr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?nr(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var wr,$r,br,xr={"-":"",_:" ",0:"0"},Mr=/^\s*\d+/,Pr=/^%/,kr=/[\\^$*+?|[\]().{}]/g;function Nr(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Cr(t){return t.replace(kr,"\\$&")}function Tr(t){return new RegExp("^(?:"+t.map(Cr).join("|")+")","i")}function Ar(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function qr(t,n,e){var r=Mr.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Sr(t,n,e){var r=Mr.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function Ir(t,n,e){var r=Mr.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function Ur(t,n,e){var r=Mr.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function Dr(t,n,e){var r=Mr.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function Er(t,n,e){var r=Mr.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Hr(t,n,e){var r=Mr.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Wr(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Or(t,n,e){var r=Mr.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Lr(t,n,e){var r=Mr.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function zr(t,n,e){var r=Mr.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Fr(t,n,e){var r=Mr.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function Yr(t,n,e){var r=Mr.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function jr(t,n,e){var r=Mr.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function Vr(t,n,e){var r=Mr.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Rr(t,n,e){var r=Mr.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Br(t,n,e){var r=Pr.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Qr(t,n,e){var r=Mr.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Xr(t,n,e){var r=Mr.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function Zr(t,n){return Nr(t.getDate(),n,2)}function Jr(t,n){return Nr(t.getHours(),n,2)}function Gr(t,n){return Nr(t.getHours()%12||12,n,2)}function Kr(t,n){return Nr(1+or.count(cr(t),t),n,3)}function ti(t,n){return Nr(t.getMilliseconds(),n,3)}function ni(t,n){return ti(t,n)+"000"}function ei(t,n){return Nr(t.getMonth()+1,n,2)}function ri(t,n){return Nr(t.getMinutes(),n,2)}function ii(t,n){return Nr(t.getSeconds(),n,2)}function oi(t){var n=t.getDay();return 0===n?7:n}function ai(t,n){return Nr(sr.count(cr(t),t),n,2)}function si(t,n){var e=t.getDay();return t=e>=4||0===e?lr(t):lr.ceil(t),Nr(lr.count(cr(t),t)+(4===cr(t).getDay()),n,2)}function ui(t){return t.getDay()}function li(t,n){return Nr(ur.count(cr(t),t),n,2)}function ci(t,n){return Nr(t.getFullYear()%100,n,2)}function fi(t,n){return Nr(t.getFullYear()%1e4,n,4)}function hi(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Nr(n/60|0,"0",2)+Nr(n%60,"0",2)}function di(t,n){return Nr(t.getUTCDate(),n,2)}function pi(t,n){return Nr(t.getUTCHours(),n,2)}function gi(t,n){return Nr(t.getUTCHours()%12||12,n,2)}function mi(t,n){return Nr(1+fr.count(mr(t),t),n,3)}function vi(t,n){return Nr(t.getUTCMilliseconds(),n,3)}function yi(t,n){return vi(t,n)+"000"}function _i(t,n){return Nr(t.getUTCMonth()+1,n,2)}function wi(t,n){return Nr(t.getUTCMinutes(),n,2)}function $i(t,n){return Nr(t.getUTCSeconds(),n,2)}function bi(t){var n=t.getUTCDay();return 0===n?7:n}function xi(t,n){return Nr(dr.count(mr(t),t),n,2)}function Mi(t,n){var e=t.getUTCDay();return t=e>=4||0===e?gr(t):gr.ceil(t),Nr(gr.count(mr(t),t)+(4===mr(t).getUTCDay()),n,2)}function Pi(t){return t.getUTCDay()}function ki(t,n){return Nr(pr.count(mr(t),t),n,2)}function Ni(t,n){return Nr(t.getUTCFullYear()%100,n,2)}function Ci(t,n){return Nr(t.getUTCFullYear()%1e4,n,4)}function Ti(){return"+0000"}function Ai(){return"%"}function qi(t){return+t}function Si(t){return Math.floor(+t/1e3)}!function(t){wr=function(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=Tr(i),c=Ar(i),f=Tr(o),h=Ar(o),d=Tr(a),p=Ar(a),g=Tr(s),m=Ar(s),v=Tr(u),y=Ar(u),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Zr,e:Zr,f:ni,H:Jr,I:Gr,j:Kr,L:ti,m:ei,M:ri,p:function(t){return i[+(t.getHours()>=12)]},Q:qi,s:Si,S:ii,u:oi,U:ai,V:si,w:ui,W:li,x:null,X:null,y:ci,Y:fi,Z:hi,"%":Ai},w={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:di,e:di,f:yi,H:pi,I:gi,j:mi,L:vi,m:_i,M:wi,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:qi,s:Si,S:$i,u:bi,U:xi,V:Mi,w:Pi,W:ki,x:null,X:null,y:Ni,Y:Ci,Z:Ti,"%":Ai},$={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.w=h[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=y[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=g.exec(n.slice(e));return r?(t.m=m[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,e,r){return M(t,n,e,r)},d:Lr,e:Lr,f:Rr,H:Fr,I:Fr,j:zr,L:Vr,m:Or,M:Yr,p:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.p=c[r[0].toLowerCase()],e+r[0].length):-1},Q:Qr,s:Xr,S:jr,u:Sr,U:Ir,V:Ur,w:qr,W:Dr,x:function(t,n,r){return M(t,e,n,r)},X:function(t,n,e){return M(t,r,n,e)},y:Hr,Y:Er,Z:Wr,"%":Br};function b(t,n){return function(e){var r,i,o,a=[],s=-1,u=0,l=t.length;for(e instanceof Date||(e=new Date(+e));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=xr[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function x(t,n){return function(e){var r,i,o=_r(1900);if(M(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=yr(_r(o.y))).getUTCDay(),r=i>4||0===i?pr.ceil(r):pr(r),r=fr.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=n(_r(o.y))).getDay(),r=i>4||0===i?ur.ceil(r):ur(r),r=or.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?yr(_r(o.y)).getUTCDay():n(_r(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,yr(o)):n(o)}}function M(t,n,e,r){for(var i,o,a=0,s=n.length,u=e.length;a<s;){if(r>=u)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=$[i in xr?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return _.x=b(e,_),_.X=b(r,_),_.c=b(n,_),w.x=b(e,w),w.X=b(r,w),w.c=b(n,w),{format:function(t){var n=b(t+="",_);return n.toString=function(){return t},n},parse:function(t){var n=x(t+="",vr);return n.toString=function(){return t},n},utcFormat:function(t){var n=b(t+="",w);return n.toString=function(){return t},n},utcParse:function(t){var n=x(t,yr);return n.toString=function(){return t},n}}}(t),wr.format,wr.parse,$r=wr.utcFormat,br=wr.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||$r("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||br("%Y-%m-%dT%H:%M:%S.%LZ");var Ii=Math.PI,Ui=2*Ii,Di=Ui-1e-6;function Ei(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Hi(){return new Ei}function Wi(t){return function(){return t}}Ei.prototype=Hi.prototype={constructor:Ei,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,s=e-t,u=r-n,l=o-t,c=a-n,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var h=e-o,d=r-a,p=s*s+u*u,g=h*h+d*d,m=Math.sqrt(p),v=Math.sqrt(f),y=i*Math.tan((Ii-Math.acos((p+f-g)/(2*m*v)))/2),_=y/v,w=y/m;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*l)+","+(n+_*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>l*d)+","+(this._x1=t+w*s)+","+(this._y1=n+w*u)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n;var a=(e=+e)*Math.cos(r),s=e*Math.sin(r),u=t+a,l=n+s,c=1^o,f=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),e&&(f<0&&(f=f%Ui+Ui),f>Di?this._+="A"+e+","+e+",0,1,"+c+","+(t-a)+","+(n-s)+"A"+e+","+e+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>1e-6&&(this._+="A"+e+","+e+",0,"+ +(f>=Ii)+","+c+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};Math.PI;function Oi(t){this._context=t}function Li(t){return new Oi(t)}function zi(t){return t[0]}function Fi(t){return t[1]}function Yi(){var t=zi,n=Fi,e=Wi(!0),r=null,i=Li,o=null;function a(a){var s,u,l,c=a.length,f=!1;for(null==r&&(o=i(l=Hi())),s=0;s<=c;++s)!(s<c&&e(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(u,s,a),+n(u,s,a));if(l)return o=null,l+""||null}return a.x=function(n){return arguments.length?(t="function"==typeof n?n:Wi(+n),a):t},a.y=function(t){return arguments.length?(n="function"==typeof t?t:Wi(+t),a):n},a.defined=function(t){return arguments.length?(e="function"==typeof t?t:Wi(!!t),a):e},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function ji(t){return t<0?-1:1}function Vi(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(ji(o)+ji(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Ri(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Bi(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*n,o-s,a-s*e,o,a)}function Qi(t){this._context=t}function Xi(t){this._context=new Zi(t)}function Zi(t){this._context=t}function Ji(t){return new Xi(t)}Oi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},Qi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Bi(this,this._t0,Ri(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Bi(this,Ri(this,e=Vi(this,t,n)),e);break;default:Bi(this,this._t0,e=Vi(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(Xi.prototype=Object.create(Qi.prototype)).point=function(t,n){Qi.prototype.point.call(this,n,t)},Zi.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}};var Gi="http://www.w3.org/1999/xhtml",Ki={svg:"http://www.w3.org/2000/svg",xhtml:Gi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function to(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ki.hasOwnProperty(n)?{space:Ki[n],local:t}:t}function no(t){var n=to(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Gi&&n.documentElement.namespaceURI===Gi?n.createElement(t):n.createElementNS(e,t)}})(n)}function eo(){}function ro(t){return null==t?eo:function(){return this.querySelector(t)}}function io(){return[]}function oo(t){return null==t?io:function(){return this.querySelectorAll(t)}}function ao(t){return function(){return this.matches(t)}}function so(t){return new Array(t.length)}function uo(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}uo.prototype={constructor:uo,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var lo="$";function co(t,n,e,r,i,o){for(var a,s=0,u=n.length,l=o.length;s<l;++s)(a=n[s])?(a.__data__=o[s],r[s]=a):e[s]=new uo(t,o[s]);for(;s<u;++s)(a=n[s])&&(i[s]=a)}function fo(t,n,e,r,i,o,a){var s,u,l,c={},f=n.length,h=o.length,d=new Array(f);for(s=0;s<f;++s)(u=n[s])&&(d[s]=l=lo+a.call(u,u.__data__,s,n),l in c?i[s]=u:c[l]=u);for(s=0;s<h;++s)(u=c[l=lo+a.call(t,o[s],s,o)])?(r[s]=u,u.__data__=o[s],c[l]=null):e[s]=new uo(t,o[s]);for(s=0;s<f;++s)(u=n[s])&&c[d[s]]===u&&(i[s]=u)}function ho(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function po(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function go(t,n){return t.style.getPropertyValue(n)||po(t).getComputedStyle(t,null).getPropertyValue(n)}function mo(t){return t.trim().split(/^|\s+/)}function vo(t){return t.classList||new yo(t)}function yo(t){this._node=t,this._names=mo(t.getAttribute("class")||"")}function _o(t,n){for(var e=vo(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function wo(t,n){for(var e=vo(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function $o(){this.textContent=""}function bo(){this.innerHTML=""}function xo(){this.nextSibling&&this.parentNode.appendChild(this)}function Mo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Po(){return null}function ko(){var t=this.parentNode;t&&t.removeChild(this)}function No(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Co(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}yo.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var To={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(To={mouseenter:"mouseover",mouseleave:"mouseout"}));function Ao(t,n,e){return t=qo(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function qo(t,n,e){return function(r){try{t.call(this,this.__data__,n,e)}finally{}}}function So(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function Io(t,n,e){var r=To.hasOwnProperty(t.type)?Ao:qo;return function(i,o,a){var s,u=this.__on,l=r(n,o,a);if(u)for(var c=0,f=u.length;c<f;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=e),void(s.value=n);this.addEventListener(t.type,l,e),s={type:t.type,name:t.name,value:n,listener:l,capture:e},u?u.push(s):this.__on=[s]}}function Uo(t,n,e){var r=po(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}var Do=[null];function Eo(t,n){this._groups=t,this._parents=n}function Ho(){return new Eo([[document.documentElement]],Do)}Eo.prototype=Ho.prototype={constructor:Eo,select:function(t){"function"!=typeof t&&(t=ro(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,s=n[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new Eo(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=oo(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,s=n[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new Eo(r,i)},filter:function(t){"function"!=typeof t&&(t=ao(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new Eo(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),c=-1,this.each(function(t){p[++c]=t}),p;var e,r=n?fo:co,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,s=new Array(a),u=new Array(a),l=new Array(a),c=0;c<a;++c){var f=i[c],h=o[c],d=h.length,p=t.call(f,f&&f.__data__,c,i),g=p.length,m=u[c]=new Array(g),v=s[c]=new Array(g);r(f,h,m,v,l[c]=new Array(d),p,n);for(var y,_,w=0,$=0;w<g;++w)if(y=m[w]){for(w>=$&&($=w+1);!(_=v[$])&&++$<g;);y._next=_||null}}return(s=new Eo(s,i))._enter=u,s._exit=l,s},enter:function(){return new Eo(this._enter||this._groups.map(so),this._parents)},exit:function(){return new Eo(this._exit||this._groups.map(so),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=n[s],c=e[s],f=l.length,h=a[s]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;s<r;++s)a[s]=n[s];return new Eo(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=ho);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,s=e[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(n)}return new Eo(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=to(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):go(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=mo(t+"");if(arguments.length<2){for(var r=vo(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?_o:wo)(this,t)}}:n?function(t){return function(){_o(this,t)}}:function(t){return function(){wo(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?$o:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?bo:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(xo)},lower:function(){return this.each(Mo)},append:function(t){var n="function"==typeof t?t:no(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:no(t),r=null==n?Po:"function"==typeof n?n:ro(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(ko)},clone:function(t){return this.select(t?Co:No)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=n?Io:So,null==e&&(e=!1),r=0;r<a;++r)this.each(s(o[r],n,e));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return Uo(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return Uo(this,t,n)}})(t,n))}};var Wo={value:function(){}};function Oo(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new Lo(r)}function Lo(t){this._=t}function zo(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function Fo(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Wo,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}Lo.prototype=Oo.prototype={constructor:Lo,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<s;)if(e=(t=o[a]).type)i[e]=Fo(i[e],t.name,n);else if(null==n)for(e in i)i[e]=Fo(i[e],t.name,null);return this}for(;++a<s;)if((e=(t=o[a]).type)&&(e=zo(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Lo(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var Yo,jo,Vo=0,Ro=0,Bo=0,Qo=1e3,Xo=0,Zo=0,Jo=0,Go="object"==typeof performance&&performance.now?performance:Date,Ko="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ta(){return Zo||(Ko(na),Zo=Go.now()+Jo)}function na(){Zo=0}function ea(){this._call=this._time=this._next=null}function ra(t,n,e){var r=new ea;return r.restart(t,n,e),r}function ia(){Zo=(Xo=Go.now())+Jo,Vo=Ro=0;try{!function(){ta(),++Vo;for(var t,n=Yo;n;)(t=Zo-n._time)>=0&&n._call.call(null,t),n=n._next;--Vo}()}finally{Vo=0,function(){var t,n,e=Yo,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Yo=n);jo=t,aa(r)}(),Zo=0}}function oa(){var t=Go.now(),n=t-Xo;n>Qo&&(Jo-=n,Xo=t)}function aa(t){Vo||(Ro&&(Ro=clearTimeout(Ro)),t-Zo>24?(t<1/0&&(Ro=setTimeout(ia,t-Go.now()-Jo)),Bo&&(Bo=clearInterval(Bo))):(Bo||(Xo=Go.now(),Bo=setInterval(oa,Qo)),Vo=1,Ko(ia)))}function sa(t,n,e){var r=new ea;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r}ea.prototype=ra.prototype={constructor:ea,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?ta():+e)+(null==n?0:+n),this._next||jo===this||(jo?jo._next=this:Yo=this,jo=this),this._call=t,this._time=e,aa()},stop:function(){this._call&&(this._call=null,this._time=1/0,aa())}};var ua=Oo("start","end","cancel","interrupt"),la=[],ca=0,fa=1,ha=2,da=3,pa=4,ga=5,ma=6;function va(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(u){var l,c,f,h;if(e.state!==fa)return s();for(l in i)if((h=i[l]).name===e.name){if(h.state===da)return sa(o);h.state===pa?(h.state=ma,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<n&&(h.state=ma,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(sa(function(){e.state===da&&(e.state=pa,e.timer.restart(a,e.delay,e.time),a(u))}),e.state=ha,e.on.call("start",t,t.__data__,e.index,e.group),e.state===ha){for(e.state=da,r=new Array(f=e.tween.length),l=0,c=-1;l<f;++l)(h=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(r[++c]=h);r.length=c+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(s),e.state=ga,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);e.state===ga&&(e.on.call("end",t,t.__data__,e.index,e.group),s())}function s(){for(var r in e.state=ma,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=ra(function(t){e.state=fa,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:i,on:ua,tween:la,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ca})}function ya(t,n){var e=wa(t,n);if(e.state>ca)throw new Error("too late; already scheduled");return e}function _a(t,n){var e=wa(t,n);if(e.state>da)throw new Error("too late; already running");return e}function wa(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function $a(t,n,e){var r=t._id;return t.each(function(){var t=_a(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return wa(t,r).value[n]}}function ba(t,n){var e;return("number"==typeof n?de:n instanceof Cn?he:(e=Cn(n))?(n=e,he):me)(t,n)}var xa=Ho.prototype.constructor;function Ma(t){return function(){this.style.removeProperty(t)}}var Pa=0;function ka(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Na(){return++Pa}var Ca=Ho.prototype;ka.prototype=function(t){return Ho().transition(t)}.prototype={constructor:ka,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=ro(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),h=0;h<c;++h)(s=l[h])&&(u=t.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,va(f[h],n,e,h,f,wa(s,e)));return new ka(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=oo(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var h,d=t.call(u,u.__data__,f,l),p=wa(u,e),g=0,m=d.length;g<m;++g)(h=d[g])&&va(h,n,e,g,d,p);o.push(d),a.push(u)}return new ka(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=ao(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&u.push(o);return new ka(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=n[s],c=e[s],f=l.length,h=a[s]=new Array(f),d=0;d<f;++d)(u=l[d]||c[d])&&(h[d]=u);for(;s<r;++s)a[s]=n[s];return new ka(a,this._parents,this._name,this._id)},selection:function(){return new xa(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Na(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=wa(a,n);va(a,t,e,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ka(r,this._parents,t,e)},call:Ca.call,nodes:Ca.nodes,node:Ca.node,size:Ca.size,empty:Ca.empty,each:Ca.each,on:function(t,n){var e=this._id;return arguments.length<2?wa(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(n)?ya:_a;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=to(t),r="transform"===e?Ce:ba;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var a,s,u=e(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=n(r=a,u));this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var a,s,u=e(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=n(r=a,u));this.removeAttribute(t)}})(e,r,$a(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}:function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}})(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=to(t);return this.tween(e,(r.local?function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n(e))}}(t,i)),e}return i._value=n,i}:function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n(e))}}(t,i)),e}return i._value=n,i})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?Ne:ba;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=go(this,t),a=(this.style.removeProperty(t),go(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,Ma(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=go(this,t),s=e(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=go(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=n(r=a,s))}}(t,r,$a(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,s="end."+a;return function(){var u=_a(this,t),l=u.on,c=null==u.value[a]?o||(o=Ma(n)):void 0;l===e&&i===c||(r=(e=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=go(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n(r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}($a(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}));var t},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=wa(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=_a(this,t),o=i.tween;if(o!==e)for(var a=0,s=(r=e=o).length;a<s;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=_a(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},u=0,l=i.length;u<l;++u)if(i[u].name===n){i[u]=s;break}u===l&&i.push(s)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){ya(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){ya(this,t).delay=n}})(n,t)):wa(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){_a(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){_a(this,t).duration=n}})(n,t)):wa(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){_a(this,t).ease=n}}(n,t)):wa(this.node(),n).ease},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};e.each(function(){var e=_a(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(s),n._.interrupt.push(s),n._.end.push(u)),e.on=n})})}};Math.PI,Math.PI;var Ta={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Aa(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return Ta.time=ta(),Ta;return e}function qa(t,n,e){const r=Object.create(t);return r.opinion=n[e],r}function Sa(t,n,e){const r=Object.create(t);return r.party=n[e],r.i=e,r}function Ia(t,n,e){const r=Object.create(t);return r.opinion=n[e],r}function Ua(t,n,e){const r=Object.create(t);return r.party=n[e],r}function Da(t,n,e){const r=Object.create(t);return r.party=n[e],r}function Ea(t,n,e){const r=Object.create(t);return r.opinion=n[e],r}function Ha(t){var n,e,r,i,o,a,s,u,l=!t.$showDistributions&&!t.includesSelectedPartyIds(t.opinion)&&Wa(t);function c(){return t.click_handler(t)}return{c(){n=_("g"),e=_("rect"),l&&l.c(),M(e,"x",r=t.xc(t.opinion.answer.simplifiedValue)),M(e,"y",i=t.y(t.opinion.question.id)),M(e,"width",t.answerWidth),M(e,"height",Xa),k(e,"fill",t.includesSelectedPartyIds(t.opinion)?t.opinion.answer.colorLight:"#eee"),M(e,"class","svelte-e7haxu"),M(n,"class",o="answer "+(t.includesSelectedPartyIds(t.opinion)?"":"hoverable")+" svelte-e7haxu"),u=x(n,"click",c)},m(t,r){g(t,n,r),p(n,e),l&&l.m(n,null),s=!0},p(a,u){t=u,s&&!a.xc&&!a.$opinions||r===(r=t.xc(t.opinion.answer.simplifiedValue))||M(e,"x",r),s&&!a.y&&!a.$opinions||i===(i=t.y(t.opinion.question.id))||M(e,"y",i),s&&!a.answerWidth||M(e,"width",t.answerWidth),(!s||a.includesSelectedPartyIds||a.$opinions)&&k(e,"fill",t.includesSelectedPartyIds(t.opinion)?t.opinion.answer.colorLight:"#eee"),t.$showDistributions||t.includesSelectedPartyIds(t.opinion)?l&&(l.d(1),l=null):l?l.p(a,t):((l=Wa(t)).c(),l.m(n,null)),s&&!a.includesSelectedPartyIds&&!a.$opinions||o===(o="answer "+(t.includesSelectedPartyIds(t.opinion)?"":"hoverable")+" svelte-e7haxu")||M(n,"class",o)},i(t){s||(z(()=>{a||(a=J(n,on,{duration:200},!0)),a.run(1)}),s=!0)},o(t){a||(a=J(n,on,{duration:200},!1)),a.run(0),s=!1},d(t){t&&m(n),l&&l.d(),t&&a&&a.end(),u()}}}function Wa(t){var n,e,r,i,o,a=t.opinion.answer.label;return{c(){n=_("text"),e=w(a),M(n,"x",r=t.xc(t.opinion.answer.simplifiedValue)),M(n,"y",i=t.y(t.opinion.question.id)),M(n,"dx",o=t.answerWidth/2),M(n,"dy",Xa/2),M(n,"class","answer-label svelte-e7haxu"),k(n,"fill","#ccc")},m(t,r){g(t,n,r),p(n,e)},p(t,s){t.$opinions&&a!==(a=s.opinion.answer.label)&&P(e,a),(t.xc||t.$opinions)&&r!==(r=s.xc(s.opinion.answer.simplifiedValue))&&M(n,"x",r),(t.y||t.$opinions)&&i!==(i=s.y(s.opinion.question.id))&&M(n,"y",i),t.answerWidth&&o!==(o=s.answerWidth/2)&&M(n,"dx",o)},d(t){t&&m(n)}}}function Oa(t){var n,e,r=(0===t.$selectedPartyIds.length||t.opinion.parties.map(Ja).some(t.func_3))&&Ha(t);return{c(){r&&r.c(),n=b()},m(t,i){r&&r.m(t,i),g(t,n,i),e=!0},p(t,e){0===e.$selectedPartyIds.length||e.opinion.parties.map(Ja).some(e.func_3)?r?(r.p(t,e),r.i(1)):((r=Ha(e)).c(),r.i(1),r.m(n.parentNode,n)):r&&(Q(),Z(()=>{r.d(1),r=null}),r.o(1),X())},i(t){e||(r&&r.i(),e=!0)},o(t){r&&r.o(),e=!1},d(t){r&&r.d(t),t&&m(n)}}}function La(t){for(var n,e,r,i,o,a=0===t.$selectedPartyIds.length&&za(t),s=t.selectedPartyPaths,u=[],l=0;l<s.length;l+=1)u[l]=Ya(Ua(t,s,l));function c(t,n,e){u[t]&&(n&&Z(()=>{u[t].d(n),u[t]=null}),u[t].o(e))}var f=t.$opinions,h=[];for(l=0;l<f.length;l+=1)h[l]=Va(Ia(t,f,l));function d(t,n,e){h[t]&&(n&&Z(()=>{h[t].d(n),h[t]=null}),h[t].o(e))}var p=t.$opinions,y=[];for(l=0;l<p.length;l+=1)y[l]=Ba(qa(t,p,l));function _(t,n,e){y[t]&&(n&&Z(()=>{y[t].d(n),y[t]=null}),y[t].o(e))}return{c(){a&&a.c(),n=b();for(var t=0;t<u.length;t+=1)u[t].c();e=b();for(t=0;t<h.length;t+=1)h[t].c();r=b();for(t=0;t<y.length;t+=1)y[t].c();i=b()},m(t,s){a&&a.m(t,s),g(t,n,s);for(var l=0;l<u.length;l+=1)u[l].m(t,s);g(t,e,s);for(l=0;l<h.length;l+=1)h[l].m(t,s);g(t,r,s);for(l=0;l<y.length;l+=1)y[l].m(t,s);g(t,i,s),o=!0},p(t,o){if(0===o.$selectedPartyIds.length?a?a.p(t,o):((a=za(o)).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),t.barWidth||t.rowHeight||t.getPath||t.selectedPartyPaths||t.filterOpinionsByParty){s=o.selectedPartyPaths;for(var l=0;l<s.length;l+=1){const n=Ua(o,s,l);u[l]?(u[l].p(t,n),u[l].i(1)):(u[l]=Ya(n),u[l].c(),u[l].i(1),u[l].m(e.parentNode,e))}for(Q();l<u.length;l+=1)c(l,1,1);X()}if(t.xc||t.$opinions||t.y||t.filteredOpinionParties||t.xOffset||t.barWidth||t.rowHeight||t.$selectedPartyIds||t.containerWidth){f=o.$opinions;for(l=0;l<f.length;l+=1){const n=Ia(o,f,l);h[l]?(h[l].p(t,n),h[l].i(1)):(h[l]=Va(n),h[l].c(),h[l].i(1),h[l].m(r.parentNode,r))}for(Q();l<h.length;l+=1)d(l,1,1);X()}if(t.$selectedPartyIds||t.$opinions||t.includesSelectedPartyIds||t.xc||t.y||t.answerWidth||t.rowHeight){p=o.$opinions;for(l=0;l<p.length;l+=1){const n=qa(o,p,l);y[l]?(y[l].p(t,n),y[l].i(1)):(y[l]=Ba(n),y[l].c(),y[l].i(1),y[l].m(i.parentNode,i))}for(Q();l<y.length;l+=1)_(l,1,1);X()}},i(t){if(!o){for(var n=0;n<s.length;n+=1)u[n].i();for(n=0;n<f.length;n+=1)h[n].i();for(n=0;n<p.length;n+=1)y[n].i();o=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)c(t,0);h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)d(t,0);y=y.filter(Boolean);for(let t=0;t<y.length;t+=1)_(t,0);o=!1},d(t){a&&a.d(t),t&&m(n),v(u,t),t&&m(e),v(h,t),t&&m(r),v(y,t),t&&m(i)}}}function za(t){for(var n,e=t.nonSelectedPartyPaths,r=[],i=0;i<e.length;i+=1)r[i]=Fa(Da(t,e,i));return{c(){for(var t=0;t<r.length;t+=1)r[t].c();n=b()},m(t,e){for(var i=0;i<r.length;i+=1)r[i].m(t,e);g(t,n,e)},p(t,i){if(t.barWidth||t.rowHeight||t.getPath||t.nonSelectedPartyPaths||t.filterOpinionsByParty){e=i.nonSelectedPartyPaths;for(var o=0;o<e.length;o+=1){const a=Da(i,e,o);r[o]?r[o].p(t,a):(r[o]=Fa(a),r[o].c(),r[o].m(n.parentNode,n))}for(;o<r.length;o+=1)r[o].d(1);r.length=e.length}},d(t){v(r,t),t&&m(n)}}}function Fa(t){var n,e,r;return{c(){M(n=_("path"),"transform",e="translate("+t.barWidth/2+", "+Xa+")"),M(n,"d",r=t.getPath(t.party.id,t.filterOpinionsByParty(t.party).reduce(Ga,[]))),k(n,"fill","none"),k(n,"stroke","rgba(0, 0, 0, 0.2)"),k(n,"stroke-dasharray","2\n              2")},m(t,e){g(t,n,e)},p(t,i){t.barWidth&&e!==(e="translate("+i.barWidth/2+", "+Xa+")")&&M(n,"transform",e),(t.getPath||t.nonSelectedPartyPaths)&&r!==(r=i.getPath(i.party.id,i.filterOpinionsByParty(i.party).reduce(Ga,[])))&&M(n,"d",r)},d(t){t&&m(n)}}}function Ya(t){var n,e,r,i,o;return{c(){M(n=_("path"),"transform",e="translate("+t.barWidth/2+", "+Xa+")"),M(n,"d",r=t.getPath(t.party.id,t.filterOpinionsByParty(t.party).reduce(Ka,[]))),k(n,"fill","none"),k(n,"stroke","#000"),k(n,"stroke-dasharray","none")},m(t,e){g(t,n,e),o=!0},p(t,i){o&&!t.barWidth||e===(e="translate("+i.barWidth/2+", "+Xa+")")||M(n,"transform",e),o&&!t.getPath&&!t.selectedPartyPaths||r===(r=i.getPath(i.party.id,i.filterOpinionsByParty(i.party).reduce(Ka,[])))||M(n,"d",r)},i(t){o||(z(()=>{i||(i=J(n,on,{duration:200},!0)),i.run(1)}),o=!0)},o(t){i||(i=J(n,on,{duration:200},!1)),i.run(0),o=!1},d(t){t&&(m(n),i&&i.end())}}}function ja(e){var r,i,a,s,u;function l(){return e.click_handler_1(e)}return{c(){M(r=_("rect"),"x",i=e.xOffset(e.opinion)+e.i*e.barWidth),M(r,"y",Xa/2-Xa/4/2),M(r,"width",e.barWidth),M(r,"height",Xa/4),k(r,"fill",e.$selectedPartyIds.includes(e.party.id)?e.opinion.answer.color:e.opinion.answer.colorLight),k(r,"stroke",e.containerWidth<368?(e.$selectedPartyIds.includes(e.party.id),e.opinion.answer.color):"black"),M(r,"class","party-answer"),u=x(r,"click",l)},m(t,n){g(t,r,n),s=!0},p(t,n){e=n,(!s||t.xOffset||t.$opinions||t.barWidth)&&i!==(i=e.xOffset(e.opinion)+e.i*e.barWidth)&&M(r,"x",i),s&&!t.barWidth||M(r,"width",e.barWidth),(!s||t.$selectedPartyIds||t.filteredOpinionParties||t.$opinions)&&k(r,"fill",e.$selectedPartyIds.includes(e.party.id)?e.opinion.answer.color:e.opinion.answer.colorLight),(!s||t.containerWidth||t.$selectedPartyIds||t.filteredOpinionParties||t.$opinions)&&k(r,"stroke",e.containerWidth<368?(e.$selectedPartyIds.includes(e.party.id),e.opinion.answer.color):"black")},i(t){s||(a&&a.end(1),s=!0)},o(i){i&&(a=function(e,r,i){let a,s=r(e,i),u=!0;const l=V;function c(){const{delay:r=0,duration:i=300,easing:c=n,tick:f=t,css:h}=s;h&&(a=A(e,1,0,i,r,c,h));const p=window.performance.now()+r,g=p+i;d(t=>{if(u){if(t>=g)return f(0,1),--l.remaining||o(l.callbacks),!1;if(t>=p){const n=c((t-p)/i);f(1-n,n)}}return u})}return l.remaining+=1,"function"==typeof s?R().then(()=>{s=s(),c()}):c(),{end(t){t&&s.tick&&s.tick(1,0),u&&(a&&q(e,a),u=!1)}}}(r,e.scaleToZero,{x:e.xOffset(e.opinion)+e.i*e.barWidth})),s=!1},d(t){t&&(m(r),a&&a.end()),u()}}}function Va(t){for(var n,e,r,i=t.filteredOpinionParties(t.opinion),o=[],a=0;a<i.length;a+=1)o[a]=ja(Sa(t,i,a));function s(t,n,e){o[t]&&(n&&Z(()=>{o[t].d(n),o[t]=null}),o[t].o(e))}return{c(){n=_("g");for(var r=0;r<o.length;r+=1)o[r].c();M(n,"transform",e="translate("+t.xc(t.opinion.answer.simplifiedValue)+", "+t.y(t.opinion.question.id)+")")},m(t,e){g(t,n,e);for(var i=0;i<o.length;i+=1)o[i].m(n,null);r=!0},p(t,a){if(t.xOffset||t.$opinions||t.barWidth||t.rowHeight||t.$selectedPartyIds||t.filteredOpinionParties||t.containerWidth){i=a.filteredOpinionParties(a.opinion);for(var u=0;u<i.length;u+=1){const e=Sa(a,i,u);o[u]?(o[u].p(t,e),o[u].i(1)):(o[u]=ja(e),o[u].c(),o[u].i(1),o[u].m(n,null))}for(Q();u<o.length;u+=1)s(u,1,1);X()}(!r||t.xc||t.$opinions||t.y)&&e!==(e="translate("+a.xc(a.opinion.answer.simplifiedValue)+", "+a.y(a.opinion.question.id)+")")&&M(n,"transform",e)},i(t){if(!r){for(var n=0;n<i.length;n+=1)o[n].i();r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)s(t,0);r=!1},d(t){t&&m(n),v(o,t)}}}function Ra(t){var n,e,r,i,o,a,s,u;function l(){return t.click_handler_2(t)}return{c(){n=_("g"),M(e=_("rect"),"x",r=t.xc(t.opinion.answer.simplifiedValue)),M(e,"y",i=t.y(t.opinion.question.id)),M(e,"width",t.answerWidth),M(e,"height",Xa),k(e,"fill","transparent"),k(e,"stroke","none"),M(e,"class","svelte-e7haxu"),M(n,"class",o="answer "+(t.includesSelectedPartyIds(t.opinion)?"":"hoverable")+" svelte-e7haxu"),u=x(n,"click",l)},m(t,r){g(t,n,r),p(n,e),s=!0},p(a,u){t=u,s&&!a.xc&&!a.$opinions||r===(r=t.xc(t.opinion.answer.simplifiedValue))||M(e,"x",r),s&&!a.y&&!a.$opinions||i===(i=t.y(t.opinion.question.id))||M(e,"y",i),s&&!a.answerWidth||M(e,"width",t.answerWidth),s&&!a.includesSelectedPartyIds&&!a.$opinions||o===(o="answer "+(t.includesSelectedPartyIds(t.opinion)?"":"hoverable")+" svelte-e7haxu")||M(n,"class",o)},i(t){s||(z(()=>{a||(a=J(n,on,{duration:200},!0)),a.run(1)}),s=!0)},o(t){a||(a=J(n,on,{duration:200},!1)),a.run(0),s=!1},d(t){t&&(m(n),a&&a.end()),u()}}}function Ba(t){var n,e,r=(0===t.$selectedPartyIds.length||t.opinion.parties.map(Za).some(t.func_1))&&Ra(t);return{c(){r&&r.c(),n=b()},m(t,i){r&&r.m(t,i),g(t,n,i),e=!0},p(t,e){0===e.$selectedPartyIds.length||e.opinion.parties.map(Za).some(e.func_1)?r?(r.p(t,e),r.i(1)):((r=Ra(e)).c(),r.i(1),r.m(n.parentNode,n)):r&&(Q(),Z(()=>{r.d(1),r=null}),r.o(1),X())},i(t){e||(r&&r.i(),e=!0)},o(t){r&&r.o(),e=!1},d(t){r&&r.d(t),t&&m(n)}}}function Qa(t){var n,e,r,i,o,a,s;z(t.onwindowresize);for(var u=t.$opinions,l=[],c=0;c<u.length;c+=1)l[c]=Oa(Ea(t,u,c));function f(t,n,e){l[t]&&(n&&Z(()=>{l[t].d(n),l[t]=null}),l[t].o(e))}var h=t.$showDistributions&&La(t);return{c(){n=y("div"),e=_("svg"),r=_("g");for(var a=0;a<l.length;a+=1)l[a].c();i=b(),h&&h.c(),M(e,"width",o=t.Math.min(t.containerWidth,540)),M(e,"height",22*Xa+22),s=x(window,"resize",t.onwindowresize)},m(t,o){g(t,n,o),p(n,e),p(e,r);for(var s=0;s<l.length;s+=1)l[s].m(r,null);p(r,i),h&&h.m(r,null),a=!0},p(t,n){if(t.$selectedPartyIds||t.$opinions||t.includesSelectedPartyIds||t.$showDistributions||t.xc||t.y||t.answerWidth||t.rowHeight){u=n.$opinions;for(var s=0;s<u.length;s+=1){const e=Ea(n,u,s);l[s]?(l[s].p(t,e),l[s].i(1)):(l[s]=Oa(e),l[s].c(),l[s].i(1),l[s].m(r,i))}for(Q();s<l.length;s+=1)f(s,1,1);X()}n.$showDistributions?h?(h.p(t,n),h.i(1)):((h=La(n)).c(),h.i(1),h.m(r,null)):h&&(Q(),Z(()=>{h.d(1),h=null}),h.o(1),X()),a&&!t.containerWidth||o===(o=n.Math.min(n.containerWidth,540))||M(e,"width",o)},i(t){if(!a){for(var n=0;n<u.length;n+=1)l[n].i();h&&h.i(),a=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)f(t,0);h&&h.o(),a=!1},d(t){t&&m(n),v(l,t),h&&h.d(),s()}}}Ho.prototype.interrupt=function(t){return this.each(function(){!function(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>ha&&e.state<ga,e.state=ma,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)})},Ho.prototype.transition=function(t){var n,e;t instanceof ka?(n=t._id,t=t._name):(n=Na(),(e=Ta).time=ta(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&va(a,t,n,l,s,e||Aa(a,n));return new ka(r,this._parents,t,n)};let Xa=100;function Za(t){return t.id}function Ja(t){return t.id}function Ga(t,n){return t.concat([n,n,n])}function Ka(t,n){return t.concat([n,n,n])}function ts(t,n,e){let r,i,o,a;u(t,Et,t=>{e("$opinions",r=t)}),u(t,Ht,t=>{e("$selectedPartyIds",i=t)}),u(t,Ot,t=>{e("$allParties",o=t)}),u(t,qt,t=>{e("$showDistributions",a=t)});let s,l,c,f,h,d,p,g,m,v,y,_,w=9,$=135,{containerHeight:b}=n;function x(t){const n=t.parties.map(t=>t.id);0===i.length?(i=n,Ht.set(i)):i.some(t=>n.includes(t))?(i=i.filter(t=>n.includes(t)),Ht.set(i)):(i=n,Ht.set(i))}return I(()=>{s<768?(e("barWidth",w=(s-210)/4/15),e("answerWidth",$=(s-210)/4)):s<940?(e("barWidth",w=l/4/15),e("answerWidth",$=l/4)):(e("barWidth",w=9),e("answerWidth",$=135))}),t.$set=(t=>{"containerHeight"in t&&e("containerHeight",b=t.containerHeight)}),t.$$.update=((t={innerWidth:1,answerWidth:1,$opinions:1,rowHeight:1,$selectedPartyIds:1,barWidth:1,xc:1,xOffset:1,$allParties:1,mousePos:1,popupHeight:1})=>{t.innerWidth&&e("containerWidth",l=s?s<768?s-210:s-400:540),t.answerWidth&&e("xc",c=function t(){var n=new Map,e=[],r=[],i=hn;function o(t){var o=t+"",a=n.get(o);if(!a){if(i!==hn)return i;n.set(o,a=e.push(t))}return r[(a-1)%r.length]}return o.domain=function(t){if(!arguments.length)return e.slice();e=[],n=new Map;for(const r of t){const t=r+"";n.has(t)||n.set(t,e.push(r))}return o},o.range=function(t){return arguments.length?(r=Array.from(t),o):r.slice()},o.unknown=function(t){return arguments.length?(i=t,o):i},o.copy=function(){return t(e,r).unknown(i)},fn.apply(o,arguments),o}().domain([100,50,0,null]).range(Array.from(Array(4).keys()).map(t=>t*$))),(t.$opinions||t.rowHeight)&&e("y",f=function t(){var n=Ee(qe,qe);return n.copy=function(){return e=n,t().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},fn.apply(n,arguments),Ge(n)}().domain(function(t,n){let e,r;if(void 0===n)for(let n of t)null!=n&&n>=n&&(void 0===e?e=r=n:(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&o>=o&&(void 0===e?e=r=o:(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}(r.map(t=>t.question.id))).range([0,21*Xa*1])),(t.answerWidth||t.$selectedPartyIds||t.barWidth)&&e("xOffset",h=(t=>$/2-t.parties.filter(t=>i.includes(t.id)||0===i.length).length*w/2)),(t.xc||t.xOffset||t.$selectedPartyIds||t.barWidth||t.rowHeight)&&e("getPath",d=((t,n)=>Yi().x((n,e)=>c(n.answer.simplifiedValue)+h(n)+n.parties.filter(t=>0===i.length||i.includes(t.id)).map(t=>t.id).indexOf(t)*w).y((t,n)=>-Xa/2+1*Math.floor(n/3)*Xa+(n%3==0?-Xa/4/2:n%3==2?Xa/4/2:0)).curve(Ji)(n))),t.$selectedPartyIds&&e("includesSelectedPartyIds",p=(t=>i.length>0&&i.every(n=>t.parties.map(t=>t.id).includes(n)))),(t.$allParties||t.$selectedPartyIds)&&e("selectedPartyPaths",g=o.filter(t=>i.includes(t.id))),(t.$allParties||t.$selectedPartyIds)&&e("nonSelectedPartyPaths",m=o.filter(t=>!i.includes(t.id))),(t.mousePos||t.innerWidth)&&e("popupLeft",v=(()=>0)),(t.mousePos||t.popupHeight)&&e("popupMarginTop",y=(()=>Math.min(0,innerHeight-0))),t.$opinions&&console.log(r),t.$selectedPartyIds&&e("filteredOpinionParties",_=(t=>t.parties.filter(t=>0===i.length||i.includes(t.id))))}),{barWidth:w,answerWidth:$,innerWidth:s,containerHeight:b,filterOpinionsByParty:function(t){return r.filter(n=>n.parties.map(t=>t.id).includes(t.id))},updateSelectedPartyIds:x,scaleToZero:function(t,{duration:n=200,x:e}){const r="string"==typeof(i=t)?new Eo([[document.querySelector(i)]],[document.documentElement]):new Eo([[i]],Do);var i;return{duration:n,tick:t=>{r.attr("width",t*w).attr("x",e+t*(-w/2)).style("opacity",t)}}},containerWidth:l,xc:c,y:f,$opinions:r,xOffset:h,$selectedPartyIds:i,getPath:d,Math:Math,includesSelectedPartyIds:p,selectedPartyPaths:g,nonSelectedPartyPaths:m,filteredOpinionParties:_,$showDistributions:a,func_1:function(t){return i.includes(t)},func_3:function(t){return i.includes(t)},onwindowresize:function(){s=window.innerWidth,e("innerWidth",s)},click_handler:function({opinion:t}){return x(t)},click_handler_1:function({opinion:t}){return x(t)},click_handler_2:function({opinion:t}){return x(t)}}}class ns extends et{constructor(t){super(),nt(this,t,ts,Qa,s,["containerHeight"])}}function es(n){var e,r,i,o=n.question.text;return{c(){e=y("p"),r=y("span"),i=w(o),k(r,"padding","0 0 0 4px"),k(r,"background-color",n.marked()||0===n.$selectedPartyIds.length?"transparent":"hsla(46, 92%, 75%, 1)"),k(e,"color",n.marked()?n.answerValuesRemaining()[0].answer.color:"black"),e.className="svelte-12tqqt8"},m(t,n){g(t,e,n),p(e,r),p(r,i)},p(t,n){t.question&&o!==(o=n.question.text)&&P(i,o),(t.marked||t.$selectedPartyIds)&&k(r,"background-color",n.marked()||0===n.$selectedPartyIds.length?"transparent":"hsla(46, 92%, 75%, 1)"),(t.marked||t.answerValuesRemaining)&&k(e,"color",n.marked()?n.answerValuesRemaining()[0].answer.color:"black")},i:t,o:t,d(t){t&&m(e)}}}function rs(t,n,e){let r,i;u(t,Et,t=>{e("$opinions",r=t)}),u(t,Ht,t=>{e("$selectedPartyIds",i=t)});let o,a,{question:s}=n;return t.$set=(t=>{"question"in t&&e("question",s=t.question)}),t.$$.update=((t={$opinions:1,question:1,$selectedPartyIds:1,answerValuesRemaining:1})=>{(t.$opinions||t.question||t.$selectedPartyIds)&&e("answerValuesRemaining",o=(()=>r.filter(t=>t.question.id===s.id).filter(t=>t.parties.map(t=>t.id).filter(t=>i.includes(t)).length>0))),t.answerValuesRemaining&&e("marked",a=(()=>1===o().length))}),{question:s,answerValuesRemaining:o,$selectedPartyIds:i,marked:a}}class is extends et{constructor(t){super(),nt(this,t,rs,es,s,["question"])}}function os(t){var n,e;function r(t){return t.$selectedPartyIds.length>1?ss:as}var i=r(t),o=i(t);return{c(){n=y("div"),o.c(),n.className=e="container "+(1===t.$selectedPartyIds.length?"single-match":"multi-match")+" svelte-1hqoziq"},m(t,e){g(t,n,e),o.m(n,null)},p(t,a){i===(i=r(a))&&o?o.p(t,a):(o.d(1),(o=i(a))&&(o.c(),o.m(n,null))),t.$selectedPartyIds&&e!==(e="container "+(1===a.$selectedPartyIds.length?"single-match":"multi-match")+" svelte-1hqoziq")&&(n.className=e)},d(t){t&&m(n),o.d()}}}function as(t){var n,e,r,i,o,a,s,u,l=t.$filteredParties[0].name_short,c=t.$filteredParties[0].name_full.replace(/(.*)\(.*\)/gi,"$1");return{c(){(n=y("span")).textContent="matching party:",e=$(),r=y("div"),i=y("h3"),o=w(l),a=$(),s=y("p"),u=w(c),n.className="label grid-item svelte-1hqoziq",i.className="name-short svelte-1hqoziq",s.className="name-short svelte-1hqoziq",r.className="grid-item svelte-1hqoziq"},m(t,l){g(t,n,l),g(t,e,l),g(t,r,l),p(r,i),p(i,o),p(r,a),p(r,s),p(s,u)},p(t,n){t.$filteredParties&&l!==(l=n.$filteredParties[0].name_short)&&P(o,l),t.$filteredParties&&c!==(c=n.$filteredParties[0].name_full.replace(/(.*)\(.*\)/gi,"$1"))&&P(u,c)},d(t){t&&(m(n),m(e),m(r))}}}function ss(t){var n,e,r,i,o,a,s,u,l,c,f,h,d,v,_=t.$filteredParties.length,b=`(${Math.round(t.$overlap/t.$activeQuestions.length*100)}%)`;return{c(){n=y("div"),(e=y("div")).textContent="parties matching your selection:",r=$(),i=y("span"),o=w(_),a=$(),s=y("div"),(u=y("div")).textContent="statements with same opinion:",l=$(),c=y("span"),f=w(t.$overlap),h=$(),d=y("span"),v=w(b),e.className="label svelte-1hqoziq",i.className="value svelte-1hqoziq",n.className="grid-item svelte-1hqoziq",u.className="label svelte-1hqoziq",d.className="svelte-1hqoziq",c.className="value svelte-1hqoziq",s.className="grid-item svelte-1hqoziq"},m(t,m){g(t,n,m),p(n,e),p(n,r),p(n,i),p(i,o),g(t,a,m),g(t,s,m),p(s,u),p(s,l),p(s,c),p(c,f),p(c,h),p(c,d),p(d,v)},p(t,n){t.$filteredParties&&_!==(_=n.$filteredParties.length)&&P(o,_),t.$overlap&&P(f,n.$overlap),(t.$overlap||t.$activeQuestions)&&b!==(b=`(${Math.round(n.$overlap/n.$activeQuestions.length*100)}%)`)&&P(v,b)},d(t){t&&(m(n),m(a),m(s))}}}function us(n){var e,r=n.$selectedPartyIds.length>0&&os(n);return{c(){r&&r.c(),e=b()},m(t,n){r&&r.m(t,n),g(t,e,n)},p(t,n){n.$selectedPartyIds.length>0?r?r.p(t,n):((r=os(n)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&m(e)}}}function ls(t,n,e){let r,i,o,a;return u(t,Ht,t=>{e("$selectedPartyIds",r=t)}),u(t,zt,t=>{e("$filteredParties",i=t)}),u(t,Ft,t=>{e("$overlap",o=t)}),u(t,Lt,t=>{e("$activeQuestions",a=t)}),{$selectedPartyIds:r,$filteredParties:i,$overlap:o,$activeQuestions:a}}class cs extends et{constructor(t){super(),nt(this,t,ls,us,s,[])}}function fs(t,n,e){const r=Object.create(t);return r.party=n[e],r}function hs(t,n,e){const r=Object.create(t);return r.question=n[e],r}function ds(t){var n,e=new is({props:{question:t.question}});return{c(){e.$$.fragment.c()},m(t,r){K(e,t,r),n=!0},p(t,n){var r={};t.$activeQuestions&&(r.question=n.question),e.$set(r)},i(t){n||(e.$$.fragment.i(t),n=!0)},o(t){e.$$.fragment.o(t),n=!1},d(t){e.$destroy(t)}}}function ps(t){for(var n,e,r,i,o,a,s,u,l,c,f,h,d,_,b=0===t.$difference?"y":"ies",x=t.$selectedPartyIds.length>1&&gs(t),M=t.$selectedPartyIds.length>1&&ms(t),N=t.$filteredParties,C=[],T=0;T<N.length;T+=1)C[T]=vs(fs(t,N,T));return{c(){n=y("div"),e=y("h2"),r=w("Matching part"),i=w(b),o=$(),x&&x.c(),a=$(),s=y("div"),M&&M.c(),u=$(),l=y("div");for(var d=0;d<C.length;d+=1)C[d].c();c=$(),f=y("div"),h=w("dont't forget to scroll"),e.className="svelte-18sklmw",l.className="party-list svelte-18sklmw",k(l,"max-height",t.innerHeight-460+"px"),s.className="matching-parties svelte-18sklmw",k(s,"background-color",1===t.$selectedPartyIds.length?"rgb(179, 219, 186)":"#eee"),f.className="scroll-hint svelte-18sklmw",k(f,"display",t.isScrolling?"block":"none"),n.className="inner svelte-18sklmw"},m(d,m){g(d,n,m),p(n,e),p(e,r),p(e,i),p(n,o),x&&x.m(n,null),p(n,a),p(n,s),M&&M.m(s,null),p(s,u),p(s,l);for(var v=0;v<C.length;v+=1)C[v].m(l,null);L(()=>t.div0_binding(l,null)),p(n,c),p(n,f),p(f,h),_=!0},p(t,e){if(_&&!t.$difference||b===(b=0===e.$difference?"y":"ies")||P(i,b),e.$selectedPartyIds.length>1?x?x.p(t,e):((x=gs(e)).c(),x.m(n,a)):x&&(x.d(1),x=null),e.$selectedPartyIds.length>1?M?M.p(t,e):((M=ms(e)).c(),M.m(s,u)):M&&(M.d(1),M=null),t.selectedPartyIds||t.$filteredParties){N=e.$filteredParties;for(var r=0;r<N.length;r+=1){const n=fs(e,N,r);C[r]?C[r].p(t,n):(C[r]=vs(n),C[r].c(),C[r].m(l,null))}for(;r<C.length;r+=1)C[r].d(1);C.length=N.length}t.items&&(e.div0_binding(null,l),e.div0_binding(l,null)),_&&!t.innerHeight||k(l,"max-height",e.innerHeight-460+"px"),_&&!t.$selectedPartyIds||k(s,"background-color",1===e.$selectedPartyIds.length?"rgb(179, 219, 186)":"#eee"),_&&!t.isScrolling||k(f,"display",e.isScrolling?"block":"none")},i(t){_||(z(()=>{d||(d=J(n,on,{duration:200},!0)),d.run(1)}),_=!0)},o(t){d||(d=J(n,on,{duration:200},!1)),d.run(0),_=!1},d(e){e&&m(n),x&&x.d(),M&&M.d(),v(C,e),t.div0_binding(null,l),e&&d&&d.end()}}}function gs(t){var n,e,r,i,o,a,s,u,l,c,f,h,d,v,_,b,x,M,k,N,C,T,A,q,S,I=1===t.$overlap?"statement":"statements",U=t.$activeQuestions.length,D=`(${Math.round(t.$overlap/t.$activeQuestions.length*100)}%)`,E=1===Ft?"statement":"statements",H=t.$activeQuestions.length,W=`(${Math.round(t.$difference/t.$activeQuestions.length*100)}%)`;return{c(){n=y("div"),e=y("div"),(r=y("span")).textContent="same opinion in:",i=$(),o=y("span"),a=w(t.$overlap),s=$(),u=w(I),l=w(" of "),c=w(U),f=$(),h=w(D),d=$(),v=y("div"),_=y("div"),(b=y("span")).innerHTML='<span class="svelte-18sklmw">mixed</span>\n\t\t\t                opinions in:\n\t\t\t              ',x=$(),M=y("span"),k=w(t.$difference),N=$(),C=w(E),T=w(" of "),A=w(H),q=$(),S=w(W),r.className="label svelte-18sklmw",o.className="value svelte-18sklmw",n.className="overlap-diff overlap svelte-18sklmw",b.className="label svelte-18sklmw",M.className="value svelte-18sklmw",v.className="overlap-diff diff svelte-18sklmw"},m(t,m){g(t,n,m),p(n,e),p(e,r),p(e,i),p(e,o),p(o,a),p(e,s),p(e,u),p(e,l),p(e,c),p(e,f),p(e,h),g(t,d,m),g(t,v,m),p(v,_),p(_,b),p(_,x),p(_,M),p(M,k),p(_,N),p(_,C),p(_,T),p(_,A),p(_,q),p(_,S)},p(t,n){t.$overlap&&P(a,n.$overlap),t.$overlap&&I!==(I=1===n.$overlap?"statement":"statements")&&P(u,I),t.$activeQuestions&&U!==(U=n.$activeQuestions.length)&&P(c,U),(t.$overlap||t.$activeQuestions)&&D!==(D=`(${Math.round(n.$overlap/n.$activeQuestions.length*100)}%)`)&&P(h,D),t.$difference&&P(k,n.$difference),t.$activeQuestions&&H!==(H=n.$activeQuestions.length)&&P(A,H),(t.$difference||t.$activeQuestions)&&W!==(W=`(${Math.round(n.$difference/n.$activeQuestions.length*100)}%)`)&&P(S,W)},d(t){t&&(m(n),m(d),m(v))}}}function ms(t){var n,e,r,i,o=t.$selectedPartyIds.length;return{c(){n=y("span"),e=y("span"),r=w(o),i=w("\n              parties match your selection:"),e.className="svelte-18sklmw",n.className="label svelte-18sklmw"},m(t,o){g(t,n,o),p(n,e),p(e,r),p(n,i)},p(t,n){t.$selectedPartyIds&&o!==(o=n.$selectedPartyIds.length)&&P(r,o)},d(t){t&&m(n)}}}function vs(t){var n,e,r,i,o,a,s=t.party.name_short,u=t.party.name_full.replace(/(.*)\(.*\)/gi,"$1");return{c(){n=y("div"),e=y("h3"),r=w(s),i=$(),o=y("p"),a=w(u),e.className="svelte-18sklmw",o.className="svelte-18sklmw",n.className="matching-party svelte-18sklmw",k(n,"padding",Ht.length>1?"0 0 10px 0":"10px 0")},m(t,s){g(t,n,s),p(n,e),p(e,r),p(n,i),p(n,o),p(o,a)},p(t,e){t.$filteredParties&&s!==(s=e.party.name_short)&&P(r,s),t.$filteredParties&&u!==(u=e.party.name_full.replace(/(.*)\(.*\)/gi,"$1"))&&P(a,u),t.selectedPartyIds&&k(n,"padding",Ht.length>1?"0 0 10px 0":"10px 0")},d(t){t&&m(n)}}}function ys(t){var n,e,r,i,o,a,s,u;z(t.onwindowresize);for(var l=t.$activeQuestions,c=[],f=0;f<l.length;f+=1)c[f]=ds(hs(t,l,f));function h(t,n,e){c[t]&&(n&&Z(()=>{c[t].d(n),c[t]=null}),c[t].o(e))}var d=new ns({props:{containerHeight:t.innerHeight-150-100}}),_=t.$selectedPartyIds.length>0&&ps(t),w=new cs({});return{c(){n=y("main"),e=y("div");for(var s=0;s<c.length;s+=1)c[s].c();r=$(),d.$$.fragment.c(),i=$(),o=y("aside"),_&&_.c(),a=$(),w.$$.fragment.c(),o.className="svelte-18sklmw",n.className="svelte-18sklmw",u=x(window,"resize",t.onwindowresize)},m(t,u){g(t,n,u),p(n,e);for(var l=0;l<c.length;l+=1)c[l].m(e,null);p(n,r),K(d,n,null),p(n,i),p(n,o),_&&_.m(o,null),g(t,a,u),K(w,t,u),s=!0},p(t,n){if(t.$activeQuestions){l=n.$activeQuestions;for(var r=0;r<l.length;r+=1){const i=hs(n,l,r);c[r]?(c[r].p(t,i),c[r].i(1)):(c[r]=ds(i),c[r].c(),c[r].i(1),c[r].m(e,null))}for(Q();r<c.length;r+=1)h(r,1,1);X()}var i={};t.innerHeight&&(i.containerHeight=n.innerHeight-150-100),d.$set(i),n.$selectedPartyIds.length>0?_?(_.p(t,n),_.i(1)):((_=ps(n)).c(),_.i(1),_.m(o,null)):_&&(Q(),Z(()=>{_.d(1),_=null}),_.o(1),X())},i(t){if(!s){for(var n=0;n<l.length;n+=1)c[n].i();d.$$.fragment.i(t),_&&_.i(),w.$$.fragment.i(t),s=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)h(t,0);d.$$.fragment.o(t),_&&_.o(),w.$$.fragment.o(t),s=!1},d(t){t&&m(n),v(c,t),d.$destroy(),_&&_.d(),t&&m(a),w.$destroy(t),u()}}}function _s(t,n,e){let r,i,o,a,s;u(t,Lt,t=>{e("$activeQuestions",r=t)}),u(t,Ht,t=>{e("$selectedPartyIds",i=t)}),u(t,Yt,t=>{e("$difference",o=t)}),u(t,Ft,t=>{e("$overlap",a=t)}),u(t,zt,t=>{e("$filteredParties",s=t)});let l,c,f=0,h=0;return I(()=>{e("isScrolling",c=!!l&&l.scrollHeight>l.clientHeight)}),{innerWidth:f,innerHeight:h,partyList:l,isScrolling:c,$activeQuestions:r,$selectedPartyIds:i,$difference:o,$overlap:a,$filteredParties:s,onwindowresize:function(){f=window.innerWidth,e("innerWidth",f),h=window.innerHeight,e("innerHeight",h)},div0_binding:function(t,n){e("partyList",l=t)}}}class ws extends et{constructor(t){super(),nt(this,t,_s,ys,s,[])}}function $s(n){var e;return{c(){(e=y("footer")).innerHTML='<div class="inner svelte-1u32ov5"><p class="svelte-1u32ov5">\n\t\t\t      by\n\t\t\t      <a class="tulp-interactive svelte-1u32ov5" href="http://tulpinteractive.com" title="TULP interactive" target="_blank"><span>TULP</span>\n\t\t\t        interactive\n\t\t\t      </a></p>\n\t\t\t    <div class="links svelte-1u32ov5"><a class="about svelte-1u32ov5" href="about.html" target="_blank" title="about 2019 vote EU">\n\t\t\t        about\n\t\t\t      </a>\n\t\t\t      <a class="privacy svelte-1u32ov5" href="privacy-statement.html" target="_blank" title="privacy statement">\n\t\t\t        privacy\n\t\t\t      </a></div></div>',e.className="svelte-1u32ov5"},m(t,n){g(t,e,n)},p:t,i:t,o:t,d(t){t&&m(e)}}}class bs extends et{constructor(t){super(),nt(this,t,null,$s,s,[])}}function xs(n){var e,r,i=n.error.message;return{c(){e=y("p"),r=w(i),k(e,"color","red")},m(t,n){g(t,e,n),p(e,r)},p:t,i:t,o:t,d(t){t&&m(e)}}}function Ms(n){var e,r,i=new ws({}),o=new cn({});return{c(){i.$$.fragment.c(),e=$(),o.$$.fragment.c()},m(t,n){K(i,t,n),g(t,e,n),K(o,t,n),r=!0},p:t,i(t){r||(i.$$.fragment.i(t),o.$$.fragment.i(t),r=!0)},o(t){i.$$.fragment.o(t),o.$$.fragment.o(t),r=!1},d(t){i.$destroy(t),t&&m(e),o.$destroy(t)}}}function Ps(n){var e;return{c(){(e=y("p")).textContent="...loading data"},m(t,n){g(t,e,n)},p:t,i:t,o:t,d(t){t&&m(e)}}}function ks(t){var n,r,i,o;let a={ctx:t,current:null,pending:Ps,then:Ms,catch:xs,value:"null",error:"error",blocks:Array(3)};G(n=t.promise,a);var s=new Kt({}),u=new bs({});return{c(){a.block.c(),r=$(),s.$$.fragment.c(),i=$(),u.$$.fragment.c()},m(t,n){a.block.m(t,a.anchor=n),a.mount=(()=>r.parentNode),a.anchor=r,g(t,r,n),K(s,t,n),g(t,i,n),K(u,t,n),o=!0},p(r,i){t=i,a.ctx=t,n!==(n=t.promise)&&G(n,a)||a.block.p(r,e(e({},t),a.resolved))},i(t){o||(a.block.i(),s.$$.fragment.i(t),u.$$.fragment.i(t),o=!0)},o(t){for(let t=0;t<3;t+=1){const n=a.blocks[t];n&&n.o()}s.$$.fragment.o(t),u.$$.fragment.o(t),o=!1},d(t){a.block.d(t),a=null,t&&m(r),s.$destroy(t),t&&m(i),u.$destroy(t)}}}function Ns(t){return{promise:Vt("NL")}}return new class extends et{constructor(t){super(),nt(this,t,Ns,ks,s,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
