var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e,n){const r=e.subscribe(n);t.$$.on_destroy.push(r.unsubscribe?()=>r.unsubscribe():r)}const l=new Set;let c,h=!1;function f(){l.forEach(t=>{t[0](window.performance.now())||(l.delete(t),t[1]())}),(h=l.size>0)&&requestAnimationFrame(f)}function d(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t){return document.createTextNode(t)}function w(){return $(" ")}function b(){return $("")}function _(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function x(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function C(t,e,n){t.style.setProperty(e,n)}let N,T=0,k={};function q(t,e,n,r,i,o,a,s=0){const u=16.666/r;let l="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*o(t);l+=100*t+`%{${a(r,1-r)}}\n`}const h=l+`100% {${a(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${s}`;if(!k[f]){if(!c){const t=v("style");document.head.appendChild(t),c=t.sheet}k[f]=!0,c.insertRule(`@keyframes ${f} ${h}`,c.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${f} ${r}ms linear ${i}ms 1 both`,T+=1,f}function P(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--T&&requestAnimationFrame(()=>{if(T)return;let t=c.cssRules.length;for(;t--;)c.deleteRule(t);k={}})}function U(t){N=t}function S(t){(function(){if(!N)throw new Error("Function called outside component initialization");return N})().$$.after_render.push(t)}const A=[],I=Promise.resolve();let D=!1;const H=[],z=[],E=[];function F(t){H.push(t)}function L(t){z.push(t)}function W(){const t=new Set;do{for(;A.length;){const t=A.shift();U(t),Y(t.$$)}for(;H.length;)H.shift()();for(;z.length;){const e=z.pop();t.has(e)||(e(),t.add(e))}}while(A.length);for(;E.length;)E.pop()();D=!1}function Y(t){t.fragment&&(t.update(t.dirty),o(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(L))}let j,O;function Q(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}function R(){O={remaining:0,callbacks:[]}}function V(){O.remaining||o(O.callbacks)}function Z(t){O.callbacks.push(t)}function B(n,r,i,a){let s=r(n,i),u=a?0:1,c=null,d=null,g=null;function p(){g&&P(n,g)}function m(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(r){const{delay:i=0,duration:a=300,easing:v=e,tick:y=t,css:$}=s,w={start:window.performance.now()+i,b:r};r||(w.group=O,O.remaining+=1),c?d=w:($&&(p(),g=q(n,u,r,a,i,v,$)),r&&y(0,1),c=m(w,a),L(()=>Q(n,r,"start")),function(t){let e;h||(h=!0,requestAnimationFrame(f)),new Promise(n=>{l.add(e=[t,n])})}(t=>{if(d&&t>d.start&&(c=m(d,a),d=null,Q(n,c.b,"start"),$&&(p(),g=q(n,u,c.b,c.duration,0,v,s.css))),c)if(t>=c.end)y(u=c.b,1-u),Q(n,c.b,"end"),d||(c.b?p():--c.group.remaining||o(c.group.callbacks)),c=null;else if(t>=c.start){const e=t-c.start;u=c.a+c.d*v(e/c.duration),y(u,1-u)}return!(!c&&!d)}))}return{run(t){"function"==typeof s?(j||(j=Promise.resolve()).then(()=>{j=null}),j).then(()=>{s=s(),v(t)}):v(t)},end(){p(),c=d=null}}}function X(t,e){const r=e.token={};function i(t,i,o,a){if(e.token!==r)return;e.resolved=o&&{[o]:a};const s=n(n({},e.ctx),e.resolved),u=t&&(e.current=t)(s);e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==i&&t&&(R(),Z(()=>{t.d(1),e.blocks[n]=null}),t.o(1),V())}):e.block.d(1),u.c(),u.i&&u.i(1),u.m(e.mount(),e.anchor),W()),e.block=u,e.blocks&&(e.blocks[i]=u)}if((o=t)&&"function"==typeof o.then){if(t.then(t=>{i(e.then,1,e.value,t)},t=>{i(e.catch,2,e.error,t)}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved={[e.value]:t}}var o}function J(t,e,n){const{fragment:i,on_mount:s,on_destroy:u,after_render:l}=t.$$;i.m(e,n),L(()=>{const e=s.map(r).filter(a);u?u.push(...e):o(e),t.$$.on_mount=[]}),l.forEach(L)}function G(t,e){t.$$.dirty||(A.push(t),D||(D=!0,I.then(W)),t.$$.dirty={}),t.$$.dirty[e]=!0}function K(e,n,r,a,s,u){const l=N;U(e);const c=n.props||{},h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:null};let f=!1;var d;h.ctx=r?r(e,c,(t,n)=>{h.ctx&&s(h.ctx[t],h.ctx[t]=n)&&(h.bound[t]&&h.bound[t](n),f&&G(e,t))}):c,h.update(),f=!0,o(h.before_render),h.fragment=a(h.ctx),n.target&&(n.hydrate?h.fragment.l((d=n.target,Array.from(d.childNodes))):h.fragment.c(),n.intro&&e.$$.fragment.i&&e.$$.fragment.i(),J(e,n.target,n.anchor),W()),U(l)}class tt{$destroy(){var e,n;n=!0,(e=this).$$&&(o(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}var et={},nt={},rt=34,it=10,ot=13;function at(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function st(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function ut(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function lt(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+ut(-e,6):e>9999?"+"+ut(e,6):ut(e,4))+"-"+ut(t.getUTCMonth()+1,2)+"-"+ut(t.getUTCDate(),2)+(o?"T"+ut(n,2)+":"+ut(r,2)+":"+ut(i,2)+"."+ut(o,3)+"Z":i?"T"+ut(n,2)+":"+ut(r,2)+":"+ut(i,2)+"Z":r||n?"T"+ut(n,2)+":"+ut(r,2)+"Z":"")}function ct(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return nt;if(l)return l=!1,et;var e,r,i=a;if(t.charCodeAt(i)===rt){for(;a++<o&&t.charCodeAt(a)!==rt||t.charCodeAt(++a)===rt;);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===it?l=!0:r===ot&&(l=!0,t.charCodeAt(a)===it&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(e=a++))===it)l=!0;else if(r===ot)l=!0,t.charCodeAt(a)===it&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===it&&--o,t.charCodeAt(o-1)===ot&&--o;(r=c())!==nt;){for(var h=[];r!==et&&r!==nt;)h.push(r),r=c();e&&null==(h=e(h,s++))||i.push(h)}return i}function i(e,n){return e.map(function(e){return n.map(function(t){return a(e[t])}).join(t)})}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?lt(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=at(t);return function(r,i){return e(n(r),i,t)}}(t,e):at(t)});return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=st(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=st(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")}}}var ht=ct(",").parse;ct("\t");function ft(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var dt=function(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),function(t,e){return fetch(t,e).then(ft)}(e,n).then(function(e){return t(e,r)})}}(ht);function gt(t,e){return{subscribe:pt(t,e).subscribe}}function pt(e,n=t){let r;const i=[];function o(t){if(s(e,t)){if(e=t,!r)return;i.forEach(t=>t[1]()),i.forEach(t=>t[0](e))}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const u=[a,s];return i.push(u),1===i.length&&(r=n(o)||t),a(e),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&r()}}}}function mt(t,e,n){const r=!Array.isArray(t);r&&(t=[t]);const i=e.length<2;let a={};return gt(n,n=>{let s=!1;const u=[];let l=0;const c=()=>{if(l)return;const t=e(r?u[0]:u,n);i&&a!==(a=t)&&n(t)},h=t.map((t,e)=>t.subscribe(t=>{u[e]=t,l&=~(1<<e),s&&c()},()=>{l|=1<<e}));return s=!0,c(),function(){o(h)}})}function vt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var yt,$t,wt=(1===(yt=vt).length&&($t=yt,yt=function(t,e){return vt($t(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;yt(t[i],e)<0?n=i+1:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;yt(t[i],e)>0?r=i:n=i+1}return n}}).right;var bt=Math.sqrt(50),_t=Math.sqrt(10),xt=Math.sqrt(2);function Mt(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=bt?10:o>=_t?5:o>=xt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=bt?10:o>=_t?5:o>=xt?2:1)}const Ct=pt([]),Nt=gt([{code:"AT",name:"Austria",seats:18},{code:"BE",name:"Belgium",seats:21},{code:"BG",name:"Bulgaria",seats:17},{code:"HR",name:"Croatia",seats:11},{code:"CY",name:"Cyprus",seats:6},{code:"CZ",name:"Czech Republic",seats:21},{code:"DK",name:"Denmark",seats:13},{code:"EE",name:"Estonia",seats:6},{code:"FI",name:"Finland",seats:13},{code:"FR",name:"France",seats:74},{code:"DE",name:"Germany",seats:96},{code:"EL",name:"Greece",seats:21},{code:"HU",name:"Hungary",seats:21},{code:"IE",name:"Ireland",seats:11},{code:"IT",name:"Italy",seats:73},{code:"LV",name:"Latvia",seats:8},{code:"LT",name:"Lithuania",seats:11},{code:"LU",name:"Luxembourg",seats:6},{code:"MT",name:"Malta",seats:6},{code:"NL",name:"The Netherlands",seats:26},{code:"PL",name:"Poland",seats:51},{code:"PT",name:"Portugal",seats:21},{code:"RO",name:"Romania",seats:32},{code:"SK",name:"Slovakia",seats:13},{code:"SI",name:"Slovenia",seats:8},{code:"SP",name:"Spain",seats:54},{code:"SE",name:"Sweden",seats:20},{code:"UK",name:"United Kingdom",seats:73}]),Tt=pt({code:"AT",name:"Austria",seats:18}),kt=mt([Ct,Tt],([t,e])=>t.filter(t=>t.country_code===e.code)),qt=new Map;qt.set(100,"hsl(200, 50%, 50%)"),qt.set(50,"#999"),qt.set(0,"hsl(0, 50%, 50%)"),qt.set(null,"hsl(310, 50%, 70%)");const Pt=new Map;Pt.set(100,"hsl(204, 35%, 78%)"),Pt.set(50,"hsl(0, 0%, 80%)"),Pt.set(0,"hsl(3, 35%, 75%)"),Pt.set(null,"hsl(307, 30%, 83%)");const Ut=new Map;Ut.set(100,"hsl(200, 86%, 21%)"),Ut.set(50,"hsl(0, 0%, 23%)"),Ut.set(0,"hsl(0, 81%, 19%)"),Ut.set(null,"hsl(311, 62%, 20%)");const St=new Map;St.set(100,"Agree"),St.set(50,"Neutral"),St.set(0,"Disagree"),St.set(null,"No opinion");const At=mt(kt,t=>t.reduce((t,e)=>{const n=t.find(t=>t.question.id===e.question_id&&t.answer.simplifiedValue===e.simplifiedAnswer);return n?n.parties.push({id:e.party_id,image:e.party_image,name_full:e.party_name_full,name_short:e.party_name_short,motivation:{source:e.motivation_src,link:e.motivation_src_link,text:e.motivation}}):t.push({question:{id:e.question_id,shared_id:e.question_shared_id,text:e.question},answer:{value:e.answer,simplifiedValue:e.simplifiedAnswer,color:qt.get(e.simplifiedAnswer),colorLight:Pt.get(e.simplifiedAnswer),colorDark:Ut.get(e.simplifiedAnswer),label:St.get(e.simplifiedAnswer)},country:{code:e.country_code,name:e.country_name},parties:[{id:e.party_id,image:e.party_image,name_full:e.party_name_full,name_short:e.party_name_short,motivation:{source:e.motivation_src,link:e.motivation_src_link,text:e.motivation}}]}),t.sort((t,e)=>t.question.id-e.question.id)},[])),It=pt([]);function Dt(t,e){const n=t.filter(t=>0!==t.question[e]&&null!==t.answer.value);return n.reduce((t,n)=>t+2*Math.max(0,n.question[e]*(n.answer.value-50)),0)/n.length}const Ht=mt(At,t=>t.reduce((e,n)=>(n.parties.forEach(n=>{if(!e.find(t=>t.id===n.id)){const r=t.filter(t=>t.parties.map(t=>t.id).includes(n.id)),i=r.filter(t=>0!==t.question.xy_lr),o=r.filter(t=>0!==t.question.xy_lc);e.push({...n,spectrum:{leftRight:i.reduce((t,e)=>t+e.question.xy_lr*(e.answer.value-50)+50,0)/i.length,liberalConservative:100-o.reduce((t,e)=>t+e.question.xy_lc*(e.answer.value-50)+50,0)/o.length,environment:Dt(r,"environmental_protection"),eu:Dt(r,"european_integration"),society:Dt(r,"liberal_society"),law:Dt(r,"law_and_order"),economy:Dt(r,"economic_liberalisation"),finance:Dt(r,"restrictive_financial_policy"),immigration:Dt(r,"restrictive_immigration_policy")},opinionCounts:{noOpinion:r.filter(t=>null===t.answer.value).length,shared:r.filter(t=>null!==t.answer.value&&t.parties.length>1).length,unique:r.filter(t=>null!==t.answer.value&&1===t.parties.length).length}})}}),e),[])),zt=mt(kt,t=>t.reduce((t,e)=>(t.map(t=>t.id).includes(e.question_id)||t.push({id:e.question_id,shared_id:e.question_shared_id,text:e.question}),t),[])),Et=mt([Ht,It],([t,e])=>t.filter(t=>e.includes(t.id)).sort((t,e)=>t.name_short<e.name_short?-1:t.name_short>e.name_short?1:0),[]),Ft=mt([At,It],([t,e])=>t.filter(t=>e.every(e=>t.parties.map(t=>t.id).includes(e))).length,0),Lt=mt([zt,Ft],([t,e])=>t.length-e,0),Wt=t=>""===t?null:+t;async function Yt(t){dt(`./data/${t}.csv`,t=>({...t,answer:Wt(t.answer),simplifiedAnswer:null===Wt(t.answer)?null:Wt(t.answer)<50?0:Wt(t.answer)>50?100:50,party_id:Wt(t.party_id),question_id:Wt(t.question_id),question_shared_id:Wt(t.question_shared_id),country_code:["VL","WA"].includes(t.country_code)?"BE":t.country_code,country_name:["VL","WA"].includes(t.country_code)?"Belgium":t.country_name})).then(t=>{Ct.set(t),console.log(t)})}function jt(t,e,n){const r=Object.create(t);return r.country=e[n],r}function Ot(t){var e,n,r,i,o,a=t.country.name;return{c(){e=v("option"),n=$(a),r=w(),e.__value=i=t.country.code,e.value=e.__value,e.selected=o=t.country.code===t.$selectedCountry.code?"selected":""},m(t,i){g(t,e,i),d(e,n),d(e,r)},p(t,r){t.$allCountries&&a!==(a=r.country.name)&&M(n,a),t.$allCountries&&i!==(i=r.country.code)&&(e.__value=i),e.value=e.__value,(t.$allCountries||t.$selectedCountry)&&o!==(o=r.country.code===r.$selectedCountry.code?"selected":"")&&(e.selected=o)},d(t){t&&p(e)}}}function Qt(e){for(var n,r,i=e.$allCountries,o=[],a=0;a<i.length;a+=1)o[a]=Ot(jt(e,i,a));return{c(){n=v("select");for(var t=0;t<o.length;t+=1)o[t].c();n.className="svelte-xiqido",r=_(n,"change",e.change_handler)},m(t,e){g(t,n,e);for(var r=0;r<o.length;r+=1)o[r].m(n,null)},p(t,e){if(t.$allCountries||t.$selectedCountry){i=e.$allCountries;for(var r=0;r<i.length;r+=1){const a=jt(e,i,r);o[r]?o[r].p(t,a):(o[r]=Ot(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}},i:t,o:t,d(t){t&&p(n),m(o,t),r()}}}function Rt(t,e,n){let r,i,o;function a(t){r=i.find(e=>e.code===t),Tt.set(r),o=[],It.set(o),Yt(t)}return u(t,Tt,t=>{n("$selectedCountry",r=t)}),u(t,Nt,t=>{n("$allCountries",i=t)}),u(t,It,t=>{n("$selectedPartyIds",o=t)}),{setSelectedCountry:a,$selectedCountry:r,$allCountries:i,change_handler:function(){return a(this.value)}}}class Vt extends tt{constructor(t){super(),K(this,t,Rt,Qt,s,[])}}function Zt(t){var e,n,r,i,o,a,s,u,l,c,h,f=new Vt({});return{c(){e=v("div"),n=v("div"),(r=v("div")).innerHTML='<img class="logo svelte-1w3pi2v" src="img/logo.png" alt="2019 vote EU">\n\t\t\t      <h2 class="svelte-1w3pi2v">Vote matching, but the other way around</h2>',i=w(),(o=v("ol")).innerHTML="<li>Give your opinion on any of 22 policy statements</li>\n\t\t\t      <li>This will eliminate parties that don't share your opinion</li>\n\t\t\t      <li>\n\t\t\t        All the opinions that the remaining parties share are automatically marked as well\n\t\t\t      </li>\n\t\t\t      <li>You can only give opinions that are shared by political parties</li>",a=w(),s=v("div"),f.$$.fragment.c(),u=w(),(l=v("button")).textContent="start",C(r,"display","grid"),C(r,"grid-template-rows","1fr 1fr"),C(r,"align-items","end"),o.className="svelte-1w3pi2v",l.className="svelte-1w3pi2v",C(s,"text-align","right"),n.className="content svelte-1w3pi2v",e.className="modal svelte-1w3pi2v",h=_(l,"click",t.click_handler)},m(h,p){g(h,e,p),d(e,n),d(n,r),d(n,i),d(n,o),d(n,a),d(n,s),J(f,s,null),d(s,u),d(s,l),F(()=>t.div3_binding(e,null)),c=!0},p(t,n){t.items&&(n.div3_binding(null,e),n.div3_binding(e,null))},i(t){c||(f.$$.fragment.i(t),c=!0)},o(t){f.$$.fragment.o(t),c=!1},d(n){n&&p(e),f.$destroy(),t.div3_binding(null,e),h()}}}function Bt(t,e,n){let r;function i(){document.body.style.overflow="auto",r.style.display="none",n("modal",r)}return{modal:r,closeModal:i,click_handler:function(){return i()},div3_binding:function(t,e){n("modal",r=t)}}}class Xt extends tt{constructor(t){super(),K(this,t,Bt,Zt,s,[])}}function Jt(t){var e=t-1;return e*e*e+1}function Gt(t,{delay:e=0,duration:n=400}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,css:t=>`opacity: ${t*r}`}}function Kt(t,{delay:e=0,duration:n=400,easing:r=Jt,x:i=0,y:o=0,opacity:a=0}){const s=getComputedStyle(t),u=+s.opacity,l="none"===s.transform?"":s.transform,c=u*(1-a);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${l} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${u-c*e}`}}function te(t){var e,n,r,i;return{c(){(e=v("button")).innerHTML='<i class="fas fa-times-circle"></i>\n\t\t\t            clear selection\n\t\t\t          ',e.className="clear-selection svelte-1s1qzpv",i=_(e,"click",t.click_handler)},m(t,n){g(t,e,n),r=!0},i(t){r||(L(()=>{n||(n=B(e,Kt,{x:-200,duration:300},!0)),n.run(1)}),r=!0)},o(t){n||(n=B(e,Kt,{x:-200,duration:300},!1)),n.run(0),r=!1},d(t){t&&(p(e),n&&n.end()),i()}}}function ee(t){var e,n,r,i,o,a,s,u,l,c,h,f,m,y,b,_,x,N,T,k,q,P,U,S,A,I,D,H,z,E,F,L,W,Y,j,O,Q,B,X,G=t.$selectedCountry.name,K=t.$selectedCountry.seats,tt=new Vt({}),et=new Vt({}),nt=t.$selectedPartyIds.length>0&&te(t);return{c(){e=v("header"),n=v("div"),r=v("div"),i=v("div"),o=v("img"),a=w(),s=v("div"),tt.$$.fragment.c(),u=w(),l=v("div"),c=v("h1"),h=$(G),f=w(),m=v("p"),y=v("em"),b=$(K),_=$(" seats"),x=$("\n          in EU parliament"),N=w(),T=v("div"),et.$$.fragment.c(),k=w(),q=v("div"),P=v("div"),nt&&nt.c(),U=w(),(S=v("div")).textContent="Agree",A=w(),(I=v("div")).textContent="Neutral",D=w(),(H=v("div")).textContent="Disagree",z=w(),(E=v("div")).textContent="No Opinion",F=w(),(L=v("div")).textContent="Agree",W=w(),(Y=v("div")).textContent="Neut.",j=w(),(O=v("div")).textContent="Dis-agr.",Q=w(),(B=v("div")).textContent="No Opin.",o.src="img/logo.png",o.alt="2019 vote EU",o.className="logo svelte-1s1qzpv",s.className="left-country-select svelte-1s1qzpv",i.className="logo-container svelte-1s1qzpv",c.className="svelte-1s1qzpv",m.className="byline svelte-1s1qzpv",l.className="country svelte-1s1qzpv",T.className="right-country-select svelte-1s1qzpv",r.className="country-container svelte-1s1qzpv",C(P,"height","26px"),C(P,"text-align","right"),S.className="opinion-label bigger svelte-1s1qzpv",C(S,"color","hsl(200, 50%, 50%)"),I.className="opinion-label bigger svelte-1s1qzpv",C(I,"color","#999"),H.className="opinion-label bigger svelte-1s1qzpv",C(H,"color","hsl(0, 50%, 50%)"),E.className="opinion-label bigger svelte-1s1qzpv",C(E,"color","hsl(310, 50%, 70%)"),L.className="opinion-label smaller svelte-1s1qzpv",C(L,"color","hsl(200, 50%, 50%)"),Y.className="opinion-label smaller svelte-1s1qzpv",C(Y,"color","#999"),O.className="opinion-label smaller svelte-1s1qzpv",C(O,"color","hsl(0, 50%, 50%)"),B.className="opinion-label smaller svelte-1s1qzpv",C(B,"color","hsl(310, 50%, 70%)"),q.className="container-headers svelte-1s1qzpv",e.className="svelte-1s1qzpv"},m(t,p){g(t,e,p),d(e,n),d(n,r),d(r,i),d(i,o),d(i,a),d(i,s),J(tt,s,null),d(r,u),d(r,l),d(l,c),d(c,h),d(l,f),d(l,m),d(m,y),d(y,b),d(y,_),d(m,x),d(r,N),d(r,T),J(et,T,null),d(n,k),d(n,q),d(q,P),nt&&nt.m(P,null),d(q,U),d(q,S),d(q,A),d(q,I),d(q,D),d(q,H),d(q,z),d(q,E),d(q,F),d(q,L),d(q,W),d(q,Y),d(q,j),d(q,O),d(q,Q),d(q,B),X=!0},p(t,e){X&&!t.$selectedCountry||G===(G=e.$selectedCountry.name)||M(h,G),X&&!t.$selectedCountry||K===(K=e.$selectedCountry.seats)||M(b,K),e.$selectedPartyIds.length>0?nt?nt.i(1):((nt=te(e)).c(),nt.i(1),nt.m(P,null)):nt&&(R(),Z(()=>{nt.d(1),nt=null}),nt.o(1),V())},i(t){X||(tt.$$.fragment.i(t),et.$$.fragment.i(t),nt&&nt.i(),X=!0)},o(t){tt.$$.fragment.o(t),et.$$.fragment.o(t),nt&&nt.o(),X=!1},d(t){t&&p(e),tt.$destroy(),et.$destroy(),nt&&nt.d()}}}function ne(t,e,n){let r,i;return u(t,Tt,t=>{n("$selectedCountry",r=t)}),u(t,It,t=>{n("$selectedPartyIds",i=t)}),{$selectedCountry:r,$selectedPartyIds:i,click_handler:function(){const t=i=[];return It.set(i),t}}}class re extends tt{constructor(t){super(),K(this,t,ne,ee,s,[])}}function ie(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const oe=Symbol("implicit");function ae(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function se(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ue(){}var le="\\s*([+-]?\\d+)\\s*",ce="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",he="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fe=/^#([0-9a-f]{3})$/,de=/^#([0-9a-f]{6})$/,ge=new RegExp("^rgb\\("+[le,le,le]+"\\)$"),pe=new RegExp("^rgb\\("+[he,he,he]+"\\)$"),me=new RegExp("^rgba\\("+[le,le,le,ce]+"\\)$"),ve=new RegExp("^rgba\\("+[he,he,he,ce]+"\\)$"),ye=new RegExp("^hsl\\("+[ce,he,he]+"\\)$"),$e=new RegExp("^hsla\\("+[ce,he,he,ce]+"\\)$"),we={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function be(t){var e;return t=(t+"").trim().toLowerCase(),(e=fe.exec(t))?new Ne((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=de.exec(t))?_e(parseInt(e[1],16)):(e=ge.exec(t))?new Ne(e[1],e[2],e[3],1):(e=pe.exec(t))?new Ne(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=me.exec(t))?xe(e[1],e[2],e[3],e[4]):(e=ve.exec(t))?xe(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ye.exec(t))?ke(e[1],e[2]/100,e[3]/100,1):(e=$e.exec(t))?ke(e[1],e[2]/100,e[3]/100,e[4]):we.hasOwnProperty(t)?_e(we[t]):"transparent"===t?new Ne(NaN,NaN,NaN,0):null}function _e(t){return new Ne(t>>16&255,t>>8&255,255&t,1)}function xe(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ne(t,e,n,r)}function Me(t){return t instanceof ue||(t=be(t)),t?new Ne((t=t.rgb()).r,t.g,t.b,t.opacity):new Ne}function Ce(t,e,n,r){return 1===arguments.length?Me(t):new Ne(t,e,n,null==r?1:r)}function Ne(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Te(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ke(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qe(t,e,n,r)}function qe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Pe(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ae(ue,be,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),ae(Ne,Ce,se(ue,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ne(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ne(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Te(this.r)+Te(this.g)+Te(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),ae(qe,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof qe)return new qe(t.h,t.s,t.l,t.opacity);if(t instanceof ue||(t=be(t)),!t)return new qe;if(t instanceof qe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new qe(a,s,u,t.opacity)}(t):new qe(t,e,n,null==r?1:r)},se(ue,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new qe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new qe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ne(Pe(t>=240?t-240:t+120,i,r),Pe(t,i,r),Pe(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ue=Math.PI/180,Se=180/Math.PI,Ae=.96422,Ie=1,De=.82521,He=4/29,ze=6/29,Ee=3*ze*ze,Fe=ze*ze*ze;function Le(t){if(t instanceof We)return new We(t.l,t.a,t.b,t.opacity);if(t instanceof Re){if(isNaN(t.h))return new We(t.l,0,0,t.opacity);var e=t.h*Ue;return new We(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Ne||(t=Me(t));var n,r,i=Qe(t.r),o=Qe(t.g),a=Qe(t.b),s=Ye((.2225045*i+.7168786*o+.0606169*a)/Ie);return i===o&&o===a?n=r=s:(n=Ye((.4360747*i+.3850649*o+.1430804*a)/Ae),r=Ye((.0139322*i+.0971045*o+.7141733*a)/De)),new We(116*s-16,500*(n-s),200*(s-r),t.opacity)}function We(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Ye(t){return t>Fe?Math.pow(t,1/3):t/Ee+He}function je(t){return t>ze?t*t*t:Ee*(t-He)}function Oe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Qe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Re(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}ae(We,function(t,e,n,r){return 1===arguments.length?Le(t):new We(t,e,n,null==r?1:r)},se(ue,{brighter:function(t){return new We(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new We(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Ne(Oe(3.1338561*(e=Ae*je(e))-1.6168667*(t=Ie*je(t))-.4906146*(n=De*je(n))),Oe(-.9787684*e+1.9161415*t+.033454*n),Oe(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ae(Re,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Re)return new Re(t.h,t.c,t.l,t.opacity);if(t instanceof We||(t=Le(t)),0===t.a&&0===t.b)return new Re(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Se;return new Re(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Re(t,e,n,null==r?1:r)},se(ue,{brighter:function(t){return new Re(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Re(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Le(this).rgb()}}));var Ve=-.14861,Ze=1.78277,Be=-.29227,Xe=-.90649,Je=1.97294,Ge=Je*Xe,Ke=Je*Ze,tn=Ze*Be-Xe*Ve;function en(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function nn(t){return function(){return t}}function rn(t){return 1==(t=+t)?on:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):nn(isNaN(e)?n:e)}}function on(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):nn(isNaN(t)?e:t)}ae(en,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof en)return new en(t.h,t.s,t.l,t.opacity);t instanceof Ne||(t=Me(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(tn*r+Ge*e-Ke*n)/(tn+Ge-Ke),o=r-i,a=(Je*(n-i)-Be*o)/Xe,s=Math.sqrt(a*a+o*o)/(Je*i*(1-i)),u=s?Math.atan2(a,o)*Se-120:NaN;return new en(u<0?u+360:u,s,i,t.opacity)}(t):new en(t,e,n,null==r?1:r)},se(ue,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new en(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new en(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ue,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Ne(255*(e+n*(Ve*r+Ze*i)),255*(e+n*(Be*r+Xe*i)),255*(e+n*(Je*r)),this.opacity)}}));var an=function t(e){var n=rn(e);function r(t,e){var r=n((t=Ce(t)).r,(e=Ce(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=on(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function sn(t,e){return e-=t=+t,function(n){return t+e*n}}var un=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ln=new RegExp(un.source,"g");function cn(t,e){var n,r=typeof e;return null==e||"boolean"===r?nn(e):("number"===r?sn:"string"===r?(n=be(e))?(e=n,an):function(t,e){var n,r,i,o=un.lastIndex=ln.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=un.exec(t))&&(r=ln.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:sn(n,r)})),o=ln.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}:e instanceof be?an:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=cn(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=cn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}:sn)(t,e)}function hn(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}Math.PI,Math.SQRT2;function fn(t){return+t}var dn=[0,1];function gn(t){return t}function pn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function mn(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function vn(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=pn(i,r),o=n(a,o)):(r=pn(r,i),o=n(o,a)),function(t){return o(r(t))}}function yn(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=pn(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=wt(t,e,1,r)-1;return o[n](i[n](e))}}function $n(t,e){return function(){var t,e,n,r,i,o,a=dn,s=dn,u=cn,l=gn;function c(){return r=Math.min(a.length,s.length)>2?yn:vn,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(l(e)))}return h.invert=function(n){return l(e((o||(o=r(s,a.map(t),sn)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,fn),l===gn||(l=mn(a)),c()):a.slice()},h.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},h.rangeRound=function(t){return s=Array.from(t),u=hn,c()},h.clamp=function(t){return arguments.length?(l=t?mn(a):gn,h):l!==gn},h.interpolate=function(t){return arguments.length?(u=t,c()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,c()}}()(t,e)}function wn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function bn(t){return(t=wn(Math.abs(t)))?t[1]:NaN}var _n,xn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mn(t){return new Cn(t)}function Cn(t){if(!(e=xn.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function Nn(t,e){var n=wn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Mn.prototype=Cn.prototype,Cn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Tn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Nn(100*t,e)},r:Nn,s:function(t,e){var n=wn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(_n=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+wn(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function kn(t){return t}var qn,Pn,Un,Sn=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function An(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}):kn,i=t.currency,o=t.decimal,a=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):kn,s=t.percent||"%";function u(t){var e=(t=Mn(t)).fill,n=t.align,u=t.sign,l=t.symbol,c=t.zero,h=t.width,f=t.comma,d=t.precision,g=t.trim,p=t.type;"n"===p?(f=!0,p="g"):Tn[p]||(null==d&&(d=12),g=!0,p="g"),(c||"0"===e&&"="===n)&&(c=!0,e="0",n="=");var m="$"===l?i[0]:"#"===l&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",v="$"===l?i[1]:/[%p]/.test(p)?s:"",y=Tn[p],$=/[defgprs%]/.test(p);function w(t){var i,s,l,w=m,b=v;if("c"===p)b=y(t)+b,t="";else{var _=(t=+t)<0;if(t=y(Math.abs(t),d),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),_&&0==+t&&(_=!1),w=(_?"("===u?u:"-":"-"===u||"("===u?"":u)+w,b=("s"===p?Sn[8+_n/3]:"")+b+(_&&"("===u?")":""),$)for(i=-1,s=t.length;++i<s;)if(48>(l=t.charCodeAt(i))||l>57){b=(46===l?o+t.slice(i+1):t.slice(i))+b,t=t.slice(0,i);break}}f&&!c&&(t=r(t,1/0));var x=w.length+t.length+b.length,M=x<h?new Array(h-x+1).join(e):"";switch(f&&c&&(t=r(M+t,M.length?h-b.length:1/0),M=""),n){case"<":t=w+t+b+M;break;case"=":t=w+M+t+b;break;case"^":t=M.slice(0,x=M.length>>1)+w+t+b+M.slice(x);break;default:t=M+w+t+b}return a(t)}return d=null==d?6:/[gprs]/.test(p)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),w.toString=function(){return t+""},w}return{format:u,formatPrefix:function(t,e){var n=u(((t=Mn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(bn(e)/3))),i=Math.pow(10,-r),o=Sn[8+r/3];return function(t){return n(i*t)+o}}}}function In(t,e,n,r){var i,o=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=bt?i*=10:o>=_t?i*=5:o>=xt&&(i*=2),e<t?-i:i}(t,e,n);switch((r=Mn(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(bn(e)/3)))-bn(Math.abs(t)))}(o,a))||(r.precision=i),Un(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bn(e)-bn(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-bn(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Pn(r)}function Dn(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=Mt(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return In(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=Mt(s,u,n))>0?r=Mt(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=Mt(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,e(i)),t},t}qn=An({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Pn=qn.format,Un=qn.formatPrefix;var Hn=new Date,zn=new Date;function En(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return En(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Hn.setTime(+e),zn.setTime(+r),t(Hn),t(zn),Math.floor(n(Hn,zn))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Fn=En(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Fn.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?En(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Fn:null};var Ln=6e4,Wn=6048e5,Yn=(En(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),En(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*Ln)},function(t,e){return(e-t)/Ln},function(t){return t.getMinutes()}),En(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Ln)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),En(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ln)/864e5},function(t){return t.getDate()-1}));function jn(t){return En(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ln)/Wn})}var On=jn(0),Qn=jn(1),Rn=(jn(2),jn(3),jn(4)),Vn=(jn(5),jn(6),En(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),En(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Vn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?En(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};En(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Ln)},function(t,e){return(e-t)/Ln},function(t){return t.getUTCMinutes()}),En(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()});var Zn=En(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function Bn(t){return En(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Wn})}var Xn=Bn(0),Jn=Bn(1),Gn=(Bn(2),Bn(3),Bn(4)),Kn=(Bn(5),Bn(6),En(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),En(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function tr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function er(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function nr(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}Kn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?En(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var rr,ir,or,ar={"-":"",_:" ",0:"0"},sr=/^\s*\d+/,ur=/^%/,lr=/[\\^$*+?|[\]().{}]/g;function cr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function hr(t){return t.replace(lr,"\\$&")}function fr(t){return new RegExp("^(?:"+t.map(hr).join("|")+")","i")}function dr(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function gr(t,e,n){var r=sr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function pr(t,e,n){var r=sr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function mr(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function vr(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function yr(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function $r(t,e,n){var r=sr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function wr(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function br(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _r(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function xr(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Mr(t,e,n){var r=sr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Cr(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Nr(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Tr(t,e,n){var r=sr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function kr(t,e,n){var r=sr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function qr(t,e,n){var r=sr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Pr(t,e,n){var r=ur.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ur(t,e,n){var r=sr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Sr(t,e,n){var r=sr.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Ar(t,e){return cr(t.getDate(),e,2)}function Ir(t,e){return cr(t.getHours(),e,2)}function Dr(t,e){return cr(t.getHours()%12||12,e,2)}function Hr(t,e){return cr(1+Yn.count(Vn(t),t),e,3)}function zr(t,e){return cr(t.getMilliseconds(),e,3)}function Er(t,e){return zr(t,e)+"000"}function Fr(t,e){return cr(t.getMonth()+1,e,2)}function Lr(t,e){return cr(t.getMinutes(),e,2)}function Wr(t,e){return cr(t.getSeconds(),e,2)}function Yr(t){var e=t.getDay();return 0===e?7:e}function jr(t,e){return cr(On.count(Vn(t),t),e,2)}function Or(t,e){var n=t.getDay();return t=n>=4||0===n?Rn(t):Rn.ceil(t),cr(Rn.count(Vn(t),t)+(4===Vn(t).getDay()),e,2)}function Qr(t){return t.getDay()}function Rr(t,e){return cr(Qn.count(Vn(t),t),e,2)}function Vr(t,e){return cr(t.getFullYear()%100,e,2)}function Zr(t,e){return cr(t.getFullYear()%1e4,e,4)}function Br(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+cr(e/60|0,"0",2)+cr(e%60,"0",2)}function Xr(t,e){return cr(t.getUTCDate(),e,2)}function Jr(t,e){return cr(t.getUTCHours(),e,2)}function Gr(t,e){return cr(t.getUTCHours()%12||12,e,2)}function Kr(t,e){return cr(1+Zn.count(Kn(t),t),e,3)}function ti(t,e){return cr(t.getUTCMilliseconds(),e,3)}function ei(t,e){return ti(t,e)+"000"}function ni(t,e){return cr(t.getUTCMonth()+1,e,2)}function ri(t,e){return cr(t.getUTCMinutes(),e,2)}function ii(t,e){return cr(t.getUTCSeconds(),e,2)}function oi(t){var e=t.getUTCDay();return 0===e?7:e}function ai(t,e){return cr(Xn.count(Kn(t),t),e,2)}function si(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Gn(t):Gn.ceil(t),cr(Gn.count(Kn(t),t)+(4===Kn(t).getUTCDay()),e,2)}function ui(t){return t.getUTCDay()}function li(t,e){return cr(Jn.count(Kn(t),t),e,2)}function ci(t,e){return cr(t.getUTCFullYear()%100,e,2)}function hi(t,e){return cr(t.getUTCFullYear()%1e4,e,4)}function fi(){return"+0000"}function di(){return"%"}function gi(t){return+t}function pi(t){return Math.floor(+t/1e3)}!function(t){rr=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=fr(i),c=dr(i),h=fr(o),f=dr(o),d=fr(a),g=dr(a),p=fr(s),m=dr(s),v=fr(u),y=dr(u),$={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Ar,e:Ar,f:Er,H:Ir,I:Dr,j:Hr,L:zr,m:Fr,M:Lr,p:function(t){return i[+(t.getHours()>=12)]},Q:gi,s:pi,S:Wr,u:Yr,U:jr,V:Or,w:Qr,W:Rr,x:null,X:null,y:Vr,Y:Zr,Z:Br,"%":di},w={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Xr,e:Xr,f:ei,H:Jr,I:Gr,j:Kr,L:ti,m:ni,M:ri,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:gi,s:pi,S:ii,u:oi,U:ai,V:si,w:ui,W:li,x:null,X:null,y:ci,Y:hi,Z:fi,"%":di},b={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=g[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:xr,e:xr,f:qr,H:Cr,I:Cr,j:Mr,L:kr,m:_r,M:Nr,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:Ur,s:Sr,S:Tr,u:pr,U:mr,V:vr,w:gr,W:yr,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:wr,Y:$r,Z:br,"%":Pr};function _(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=ar[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function x(t,e){return function(n){var r,i,o=nr(1900);if(M(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=er(nr(o.y))).getUTCDay(),r=i>4||0===i?Jn.ceil(r):Jn(r),r=Zn.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=e(nr(o.y))).getDay(),r=i>4||0===i?Qn.ceil(r):Qn(r),r=Yn.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?er(nr(o.y)).getUTCDay():e(nr(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,er(o)):e(o)}}function M(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=b[i in ar?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return $.x=_(n,$),$.X=_(r,$),$.c=_(e,$),w.x=_(n,w),w.X=_(r,w),w.c=_(e,w),{format:function(t){var e=_(t+="",$);return e.toString=function(){return t},e},parse:function(t){var e=x(t+="",tr);return e.toString=function(){return t},e},utcFormat:function(t){var e=_(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=x(t,er);return e.toString=function(){return t},e}}}(t),rr.format,rr.parse,ir=rr.utcFormat,or=rr.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||ir("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||or("%Y-%m-%dT%H:%M:%S.%LZ");var mi=Math.PI,vi=2*mi,yi=vi-1e-6;function $i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function wi(){return new $i}function bi(t){return function(){return t}}$i.prototype=wi.prototype={constructor:$i,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,l=o-t,c=a-e,h=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var f=n-o,d=r-a,g=s*s+u*u,p=f*f+d*d,m=Math.sqrt(g),v=Math.sqrt(h),y=i*Math.tan((mi-Math.acos((g+h-p)/(2*m*v)))/2),$=y/v,w=y/m;Math.abs($-1)>1e-6&&(this._+="L"+(t+$*l)+","+(e+$*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>l*d)+","+(this._x1=t+w*s)+","+(this._y1=e+w*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+a,l=e+s,c=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(h<0&&(h=h%vi+vi),h>yi?this._+="A"+n+","+n+",0,1,"+c+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=mi)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};Math.PI;function _i(t){this._context=t}function xi(t){return new _i(t)}function Mi(t){return t[0]}function Ci(t){return t[1]}function Ni(){var t=Mi,e=Ci,n=bi(!0),r=null,i=xi,o=null;function a(a){var s,u,l,c=a.length,h=!1;for(null==r&&(o=i(l=wi())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(u,s,a),+e(u,s,a));if(l)return o=null,l+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:bi(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:bi(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:bi(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function Ti(t){return t<0?-1:1}function ki(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Ti(o)+Ti(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function qi(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Pi(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Ui(t){this._context=t}function Si(t){this._context=new Ai(t)}function Ai(t){this._context=t}function Ii(t){return new Si(t)}if(_i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Ui.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pi(this,this._t0,qi(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Pi(this,qi(this,n=ki(this,t,e)),n);break;default:Pi(this,this._t0,n=ki(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Si.prototype=Object.create(Ui.prototype)).point=function(t,e){Ui.prototype.point.call(this,e,t)},Ai.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},"undefined"!=typeof document)document.documentElement;function Di(t,e,n){const r=Object.create(t);return r.opinion=e[n],r}function Hi(t){var e,n,r,i,o,a,s,u,l=!t.includesSelectedPartyIds(t.opinion)&&zi(t);function c(){return t.click_handler(t)}return{c(){e=y("g"),n=y("rect"),l&&l.c(),x(n,"x",r=t.xc(t.opinion.answer.simplifiedValue)),x(n,"y",i=t.y(t.opinion.question.id)),x(n,"width",t.answerWidth),x(n,"height",Li),C(n,"fill",t.includesSelectedPartyIds(t.opinion)?t.opinion.answer.color:"#eee"),x(n,"class","svelte-e7haxu"),x(e,"class",o="answer "+(t.includesSelectedPartyIds(t.opinion)?"":"hoverable")+" svelte-e7haxu"),u=_(e,"click",c)},m(t,r){g(t,e,r),d(e,n),l&&l.m(e,null),s=!0},p(a,u){t=u,s&&!a.xc&&!a.$opinions||r===(r=t.xc(t.opinion.answer.simplifiedValue))||x(n,"x",r),s&&!a.y&&!a.$opinions||i===(i=t.y(t.opinion.question.id))||x(n,"y",i),s&&!a.answerWidth||x(n,"width",t.answerWidth),(!s||a.includesSelectedPartyIds||a.$opinions)&&C(n,"fill",t.includesSelectedPartyIds(t.opinion)?t.opinion.answer.color:"#eee"),t.includesSelectedPartyIds(t.opinion)?l&&(l.d(1),l=null):l?l.p(a,t):((l=zi(t)).c(),l.m(e,null)),s&&!a.includesSelectedPartyIds&&!a.$opinions||o===(o="answer "+(t.includesSelectedPartyIds(t.opinion)?"":"hoverable")+" svelte-e7haxu")||x(e,"class",o)},i(t){s||(L(()=>{a||(a=B(e,Gt,{duration:200},!0)),a.run(1)}),s=!0)},o(t){a||(a=B(e,Gt,{duration:200},!1)),a.run(0),s=!1},d(t){t&&p(e),l&&l.d(),t&&a&&a.end(),u()}}}function zi(t){var e,n,r,i,o,a=t.opinion.answer.label;return{c(){e=y("text"),n=$(a),x(e,"x",r=t.xc(t.opinion.answer.simplifiedValue)),x(e,"y",i=t.y(t.opinion.question.id)),x(e,"dx",o=t.answerWidth/2),x(e,"dy",Li/2),x(e,"class","answer-label svelte-e7haxu"),C(e,"fill","#ccc")},m(t,r){g(t,e,r),d(e,n)},p(t,s){t.$opinions&&a!==(a=s.opinion.answer.label)&&M(n,a),(t.xc||t.$opinions)&&r!==(r=s.xc(s.opinion.answer.simplifiedValue))&&x(e,"x",r),(t.y||t.$opinions)&&i!==(i=s.y(s.opinion.question.id))&&x(e,"y",i),t.answerWidth&&o!==(o=s.answerWidth/2)&&x(e,"dx",o)},d(t){t&&p(e)}}}function Ei(t){var e,n,r=(0===t.$selectedPartyIds.length||t.opinion.parties.map(Wi).some(t.func_1))&&Hi(t);return{c(){r&&r.c(),e=b()},m(t,i){r&&r.m(t,i),g(t,e,i),n=!0},p(t,n){0===n.$selectedPartyIds.length||n.opinion.parties.map(Wi).some(n.func_1)?r?(r.p(t,n),r.i(1)):((r=Hi(n)).c(),r.i(1),r.m(e.parentNode,e)):r&&(R(),Z(()=>{r.d(1),r=null}),r.o(1),V())},i(t){n||(r&&r.i(),n=!0)},o(t){r&&r.o(),n=!1},d(t){r&&r.d(t),t&&p(e)}}}function Fi(t){var e,n,r,i,o,a;L(t.onwindowresize);for(var s=t.$opinions,u=[],l=0;l<s.length;l+=1)u[l]=Ei(Di(t,s,l));function c(t,e,n){u[t]&&(e&&Z(()=>{u[t].d(e),u[t]=null}),u[t].o(n))}return{c(){e=v("div"),n=y("svg"),r=y("g");for(var o=0;o<u.length;o+=1)u[o].c();x(n,"width",i=t.Math.min(t.containerWidth,540)),x(n,"height",22*Li+22),a=_(window,"resize",t.onwindowresize)},m(t,i){g(t,e,i),d(e,n),d(n,r);for(var a=0;a<u.length;a+=1)u[a].m(r,null);o=!0},p(t,e){if(t.$selectedPartyIds||t.$opinions||t.includesSelectedPartyIds||t.xc||t.y||t.answerWidth||t.rowHeight){s=e.$opinions;for(var a=0;a<s.length;a+=1){const n=Di(e,s,a);u[a]?(u[a].p(t,n),u[a].i(1)):(u[a]=Ei(n),u[a].c(),u[a].i(1),u[a].m(r,null))}for(R();a<u.length;a+=1)c(a,1,1);V()}o&&!t.containerWidth||i===(i=e.Math.min(e.containerWidth,540))||x(n,"width",i)},i(t){if(!o){for(var e=0;e<s.length;e+=1)u[e].i();o=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)c(t,0);o=!1},d(t){t&&p(e),m(u,t),a()}}}let Li=85;function Wi(t){return t.id}function Yi(t,e,n){let r,i;u(t,At,t=>{n("$opinions",r=t)}),u(t,It,t=>{n("$selectedPartyIds",i=t)});let o,a,s,l,c,h,f,d,g,p=9,m=135,{containerHeight:v}=e;function y(t){const e=t.parties.map(t=>t.id);0===i.length?(i=e,It.set(i)):i.some(t=>e.includes(t))?(i=i.filter(t=>e.includes(t)),It.set(i)):(i=e,It.set(i))}return S(()=>{o<768?(n("barWidth",p=(o-210)/4/15),n("answerWidth",m=(o-210)/4)):o<940?(n("barWidth",p=a/4/15),n("answerWidth",m=a/4)):(n("barWidth",p=9),n("answerWidth",m=135))}),t.$set=(t=>{"containerHeight"in t&&n("containerHeight",v=t.containerHeight)}),t.$$.update=((t={innerWidth:1,answerWidth:1,$opinions:1,rowHeight:1,barWidth:1,xc:1,xOffset:1,$selectedPartyIds:1,mousePos:1,popupHeight:1})=>{t.innerWidth&&n("containerWidth",a=o?o<768?o-210:o-400:540),t.answerWidth&&n("xc",s=function t(){var e=new Map,n=[],r=[],i=oe;function o(t){var o=t+"",a=e.get(o);if(!a){if(i!==oe)return i;e.set(o,a=n.push(t))}return r[(a-1)%r.length]}return o.domain=function(t){if(!arguments.length)return n.slice();n=[],e=new Map;for(const r of t){const t=r+"";e.has(t)||e.set(t,n.push(r))}return o},o.range=function(t){return arguments.length?(r=Array.from(t),o):r.slice()},o.unknown=function(t){return arguments.length?(i=t,o):i},o.copy=function(){return t(n,r).unknown(i)},ie.apply(o,arguments),o}().domain([100,50,0,null]).range(Array.from(Array(4).keys()).map(t=>t*m))),(t.$opinions||t.rowHeight)&&n("y",l=function t(){var e=$n(gn,gn);return e.copy=function(){return n=e,t().domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown());var n},ie.apply(e,arguments),Dn(e)}().domain(function(t,e){let n,r;if(void 0===e)for(let e of t)null!=e&&e>=e&&(void 0===n?n=r=e:(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&o>=o&&(void 0===n?n=r=o:(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}(r.map(t=>t.question.id))).range([0,21*Li*1])),(t.answerWidth||t.barWidth)&&n("xOffset",c=(t=>m/2-t.parties.length*p/2)),(t.xc||t.xOffset||t.barWidth||t.rowHeight)&&n("getPath",h=((t,e)=>Ni().x((e,n)=>s(e.answer.simplifiedValue)+c(e)+e.parties.map(t=>t.id).indexOf(t)*p).y((t,e)=>-Li/2+2*Math.floor(e/3)*Li+(e%3==0?-Li/4:e%3==2?Li/4:0)).curve(Ii)(e))),t.$selectedPartyIds&&n("includesSelectedPartyIds",f=(t=>i.length>0&&i.every(e=>t.parties.map(t=>t.id).includes(e)))),(t.mousePos||t.innerWidth)&&n("popupLeft",d=(()=>0)),(t.mousePos||t.popupHeight)&&n("popupMarginTop",g=(()=>Math.min(0,innerHeight-0))),t.$opinions&&console.log(r)}),{answerWidth:m,innerWidth:o,containerHeight:v,updateSelectedPartyIds:y,containerWidth:a,xc:s,y:l,$opinions:r,Math:Math,$selectedPartyIds:i,includesSelectedPartyIds:f,func_1:function(t){return i.includes(t)},onwindowresize:function(){o=window.innerWidth,n("innerWidth",o)},click_handler:function({opinion:t}){return y(t)}}}class ji extends tt{constructor(t){super(),K(this,t,Yi,Fi,s,["containerHeight"])}}function Oi(e){var n,r,i,o=e.question.text;return{c(){n=v("p"),r=v("span"),i=$(o),C(r,"padding","0 0 0 4px"),C(r,"background-color",e.marked()||0===e.$selectedPartyIds.length?"transparent":"hsla(46, 92%, 75%, 1)"),C(n,"color",e.marked()?e.answerValuesRemaining()[0].answer.color:"black"),n.className="svelte-1eh5ha4"},m(t,e){g(t,n,e),d(n,r),d(r,i)},p(t,e){t.question&&o!==(o=e.question.text)&&M(i,o),(t.marked||t.$selectedPartyIds)&&C(r,"background-color",e.marked()||0===e.$selectedPartyIds.length?"transparent":"hsla(46, 92%, 75%, 1)"),(t.marked||t.answerValuesRemaining)&&C(n,"color",e.marked()?e.answerValuesRemaining()[0].answer.color:"black")},i:t,o:t,d(t){t&&p(n)}}}function Qi(t,e,n){let r,i;u(t,At,t=>{n("$opinions",r=t)}),u(t,It,t=>{n("$selectedPartyIds",i=t)});let o,a,{question:s}=e;return t.$set=(t=>{"question"in t&&n("question",s=t.question)}),t.$$.update=((t={$opinions:1,question:1,$selectedPartyIds:1,answerValuesRemaining:1})=>{(t.$opinions||t.question||t.$selectedPartyIds)&&n("answerValuesRemaining",o=(()=>r.filter(t=>t.question.id===s.id).filter(t=>t.parties.map(t=>t.id).filter(t=>i.includes(t)).length>0))),t.answerValuesRemaining&&n("marked",a=(()=>1===o().length))}),{question:s,answerValuesRemaining:o,$selectedPartyIds:i,marked:a}}class Ri extends tt{constructor(t){super(),K(this,t,Qi,Oi,s,["question"])}}function Vi(t){var e,n;function r(t){return t.$selectedPartyIds.length>1?Bi:Zi}var i=r(t),o=i(t);return{c(){e=v("div"),o.c(),e.className=n="container "+(1===t.$selectedPartyIds.length?"single-match":"multi-match")+" svelte-1hqoziq"},m(t,n){g(t,e,n),o.m(e,null)},p(t,a){i===(i=r(a))&&o?o.p(t,a):(o.d(1),(o=i(a))&&(o.c(),o.m(e,null))),t.$selectedPartyIds&&n!==(n="container "+(1===a.$selectedPartyIds.length?"single-match":"multi-match")+" svelte-1hqoziq")&&(e.className=n)},d(t){t&&p(e),o.d()}}}function Zi(t){var e,n,r,i,o,a,s,u,l=t.$filteredParties[0].name_short,c=t.$filteredParties[0].name_full.replace(/(.*)\(.*\)/gi,"$1");return{c(){(e=v("span")).textContent="matching party:",n=w(),r=v("div"),i=v("h3"),o=$(l),a=w(),s=v("p"),u=$(c),e.className="label grid-item svelte-1hqoziq",i.className="name-short svelte-1hqoziq",s.className="name-short svelte-1hqoziq",r.className="grid-item svelte-1hqoziq"},m(t,l){g(t,e,l),g(t,n,l),g(t,r,l),d(r,i),d(i,o),d(r,a),d(r,s),d(s,u)},p(t,e){t.$filteredParties&&l!==(l=e.$filteredParties[0].name_short)&&M(o,l),t.$filteredParties&&c!==(c=e.$filteredParties[0].name_full.replace(/(.*)\(.*\)/gi,"$1"))&&M(u,c)},d(t){t&&(p(e),p(n),p(r))}}}function Bi(t){var e,n,r,i,o,a,s,u,l,c,h,f,m,y,b=t.$filteredParties.length,_=`(${Math.round(t.$overlap/t.$activeQuestions.length*100)}%)`;return{c(){e=v("div"),(n=v("div")).textContent="parties matching your selection:",r=w(),i=v("span"),o=$(b),a=w(),s=v("div"),(u=v("div")).textContent="statements with same opinion:",l=w(),c=v("span"),h=$(t.$overlap),f=w(),m=v("span"),y=$(_),n.className="label svelte-1hqoziq",i.className="value svelte-1hqoziq",e.className="grid-item svelte-1hqoziq",u.className="label svelte-1hqoziq",m.className="svelte-1hqoziq",c.className="value svelte-1hqoziq",s.className="grid-item svelte-1hqoziq"},m(t,p){g(t,e,p),d(e,n),d(e,r),d(e,i),d(i,o),g(t,a,p),g(t,s,p),d(s,u),d(s,l),d(s,c),d(c,h),d(c,f),d(c,m),d(m,y)},p(t,e){t.$filteredParties&&b!==(b=e.$filteredParties.length)&&M(o,b),t.$overlap&&M(h,e.$overlap),(t.$overlap||t.$activeQuestions)&&_!==(_=`(${Math.round(e.$overlap/e.$activeQuestions.length*100)}%)`)&&M(y,_)},d(t){t&&(p(e),p(a),p(s))}}}function Xi(e){var n,r=e.$selectedPartyIds.length>0&&Vi(e);return{c(){r&&r.c(),n=b()},m(t,e){r&&r.m(t,e),g(t,n,e)},p(t,e){e.$selectedPartyIds.length>0?r?r.p(t,e):((r=Vi(e)).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&p(n)}}}function Ji(t,e,n){let r,i,o,a;return u(t,It,t=>{n("$selectedPartyIds",r=t)}),u(t,Et,t=>{n("$filteredParties",i=t)}),u(t,Ft,t=>{n("$overlap",o=t)}),u(t,zt,t=>{n("$activeQuestions",a=t)}),{$selectedPartyIds:r,$filteredParties:i,$overlap:o,$activeQuestions:a}}class Gi extends tt{constructor(t){super(),K(this,t,Ji,Xi,s,[])}}function Ki(t,e,n){const r=Object.create(t);return r.party=e[n],r}function to(t,e,n){const r=Object.create(t);return r.question=e[n],r}function eo(t){var e,n=new Ri({props:{question:t.question}});return{c(){n.$$.fragment.c()},m(t,r){J(n,t,r),e=!0},p(t,e){var r={};t.$activeQuestions&&(r.question=e.question),n.$set(r)},i(t){e||(n.$$.fragment.i(t),e=!0)},o(t){n.$$.fragment.o(t),e=!1},d(t){n.$destroy(t)}}}function no(t){for(var e,n,r,i,o,a,s,u,l,c,h,f,y,b,_=0===t.$difference?"y":"ies",x=t.$selectedPartyIds.length>1&&ro(t),N=t.$selectedPartyIds.length>1&&io(t),T=t.$filteredParties,k=[],q=0;q<T.length;q+=1)k[q]=oo(Ki(t,T,q));return{c(){e=v("div"),n=v("h2"),r=$("Matching part"),i=$(_),o=w(),x&&x.c(),a=w(),s=v("div"),N&&N.c(),u=w(),l=v("div");for(var d=0;d<k.length;d+=1)k[d].c();c=w(),h=v("div"),f=$("dont't forget to scroll"),n.className="svelte-1fredl",l.className="party-list svelte-1fredl",C(l,"max-height",t.innerHeight-460+"px"),s.className="matching-parties svelte-1fredl",C(s,"background-color",1===t.$selectedPartyIds.length?"rgb(179, 219, 186)":"#eee"),h.className="scroll-hint svelte-1fredl",C(h,"display",t.isScrolling?"block":"none"),e.className="inner svelte-1fredl"},m(p,m){g(p,e,m),d(e,n),d(n,r),d(n,i),d(e,o),x&&x.m(e,null),d(e,a),d(e,s),N&&N.m(s,null),d(s,u),d(s,l);for(var v=0;v<k.length;v+=1)k[v].m(l,null);F(()=>t.div0_binding(l,null)),d(e,c),d(e,h),d(h,f),b=!0},p(t,n){if(b&&!t.$difference||_===(_=0===n.$difference?"y":"ies")||M(i,_),n.$selectedPartyIds.length>1?x?x.p(t,n):((x=ro(n)).c(),x.m(e,a)):x&&(x.d(1),x=null),n.$selectedPartyIds.length>1?N?N.p(t,n):((N=io(n)).c(),N.m(s,u)):N&&(N.d(1),N=null),t.selectedPartyIds||t.$filteredParties){T=n.$filteredParties;for(var r=0;r<T.length;r+=1){const e=Ki(n,T,r);k[r]?k[r].p(t,e):(k[r]=oo(e),k[r].c(),k[r].m(l,null))}for(;r<k.length;r+=1)k[r].d(1);k.length=T.length}t.items&&(n.div0_binding(null,l),n.div0_binding(l,null)),b&&!t.innerHeight||C(l,"max-height",n.innerHeight-460+"px"),b&&!t.$selectedPartyIds||C(s,"background-color",1===n.$selectedPartyIds.length?"rgb(179, 219, 186)":"#eee"),b&&!t.isScrolling||C(h,"display",n.isScrolling?"block":"none")},i(t){b||(L(()=>{y||(y=B(e,Gt,{duration:200},!0)),y.run(1)}),b=!0)},o(t){y||(y=B(e,Gt,{duration:200},!1)),y.run(0),b=!1},d(n){n&&p(e),x&&x.d(),N&&N.d(),m(k,n),t.div0_binding(null,l),n&&y&&y.end()}}}function ro(t){var e,n,r,i,o,a,s,u,l,c,h,f,m,y,b,_,x,C,N,T,k,q,P,U,S,A=1===t.$overlap?"statement":"statements",I=t.$activeQuestions.length,D=`(${Math.round(t.$overlap/t.$activeQuestions.length*100)}%)`,H=1===Ft?"statement":"statements",z=t.$activeQuestions.length,E=`(${Math.round(t.$difference/t.$activeQuestions.length*100)}%)`;return{c(){e=v("div"),n=v("div"),(r=v("span")).textContent="same opinion in:",i=w(),o=v("span"),a=$(t.$overlap),s=w(),u=$(A),l=$("\n              of\n              "),c=$(I),h=w(),f=$(D),m=w(),y=v("div"),b=v("div"),(_=v("span")).innerHTML='<span class="svelte-1fredl">mixed</span>\n\t\t\t                opinions in:\n\t\t\t              ',x=w(),C=v("span"),N=$(t.$difference),T=w(),k=$(H),q=$("\n              of\n              "),P=$(z),U=w(),S=$(E),r.className="label svelte-1fredl",o.className="value svelte-1fredl",e.className="overlap-diff overlap svelte-1fredl",_.className="label svelte-1fredl",C.className="value svelte-1fredl",y.className="overlap-diff diff svelte-1fredl"},m(t,p){g(t,e,p),d(e,n),d(n,r),d(n,i),d(n,o),d(o,a),d(n,s),d(n,u),d(n,l),d(n,c),d(n,h),d(n,f),g(t,m,p),g(t,y,p),d(y,b),d(b,_),d(b,x),d(b,C),d(C,N),d(b,T),d(b,k),d(b,q),d(b,P),d(b,U),d(b,S)},p(t,e){t.$overlap&&M(a,e.$overlap),t.$overlap&&A!==(A=1===e.$overlap?"statement":"statements")&&M(u,A),t.$activeQuestions&&I!==(I=e.$activeQuestions.length)&&M(c,I),(t.$overlap||t.$activeQuestions)&&D!==(D=`(${Math.round(e.$overlap/e.$activeQuestions.length*100)}%)`)&&M(f,D),t.$difference&&M(N,e.$difference),t.$activeQuestions&&z!==(z=e.$activeQuestions.length)&&M(P,z),(t.$difference||t.$activeQuestions)&&E!==(E=`(${Math.round(e.$difference/e.$activeQuestions.length*100)}%)`)&&M(S,E)},d(t){t&&(p(e),p(m),p(y))}}}function io(t){var e,n,r,i,o=t.$selectedPartyIds.length;return{c(){e=v("span"),n=v("span"),r=$(o),i=$("\n              parties match your selection:"),n.className="svelte-1fredl",e.className="label svelte-1fredl"},m(t,o){g(t,e,o),d(e,n),d(n,r),d(e,i)},p(t,e){t.$selectedPartyIds&&o!==(o=e.$selectedPartyIds.length)&&M(r,o)},d(t){t&&p(e)}}}function oo(t){var e,n,r,i,o,a,s=t.party.name_short,u=t.party.name_full.replace(/(.*)\(.*\)/gi,"$1");return{c(){e=v("div"),n=v("h3"),r=$(s),i=w(),o=v("p"),a=$(u),n.className="svelte-1fredl",o.className="svelte-1fredl",e.className="matching-party svelte-1fredl",C(e,"padding",It.length>1?"0 0 10px 0":"10px 0")},m(t,s){g(t,e,s),d(e,n),d(n,r),d(e,i),d(e,o),d(o,a)},p(t,n){t.$filteredParties&&s!==(s=n.party.name_short)&&M(r,s),t.$filteredParties&&u!==(u=n.party.name_full.replace(/(.*)\(.*\)/gi,"$1"))&&M(a,u),t.selectedPartyIds&&C(e,"padding",It.length>1?"0 0 10px 0":"10px 0")},d(t){t&&p(e)}}}function ao(t){var e,n,r,i,o,a,s,u;L(t.onwindowresize);for(var l=t.$activeQuestions,c=[],h=0;h<l.length;h+=1)c[h]=eo(to(t,l,h));function f(t,e,n){c[t]&&(e&&Z(()=>{c[t].d(e),c[t]=null}),c[t].o(n))}var y=new ji({props:{containerHeight:t.innerHeight-150-100}}),$=t.$selectedPartyIds.length>0&&no(t),b=new Gi({});return{c(){e=v("main"),n=v("div");for(var s=0;s<c.length;s+=1)c[s].c();r=w(),y.$$.fragment.c(),i=w(),o=v("aside"),$&&$.c(),a=w(),b.$$.fragment.c(),o.className="svelte-1fredl",e.className="svelte-1fredl",u=_(window,"resize",t.onwindowresize)},m(t,u){g(t,e,u),d(e,n);for(var l=0;l<c.length;l+=1)c[l].m(n,null);d(e,r),J(y,e,null),d(e,i),d(e,o),$&&$.m(o,null),g(t,a,u),J(b,t,u),s=!0},p(t,e){if(t.$activeQuestions){l=e.$activeQuestions;for(var r=0;r<l.length;r+=1){const i=to(e,l,r);c[r]?(c[r].p(t,i),c[r].i(1)):(c[r]=eo(i),c[r].c(),c[r].i(1),c[r].m(n,null))}for(R();r<c.length;r+=1)f(r,1,1);V()}var i={};t.innerHeight&&(i.containerHeight=e.innerHeight-150-100),y.$set(i),e.$selectedPartyIds.length>0?$?($.p(t,e),$.i(1)):(($=no(e)).c(),$.i(1),$.m(o,null)):$&&(R(),Z(()=>{$.d(1),$=null}),$.o(1),V())},i(t){if(!s){for(var e=0;e<l.length;e+=1)c[e].i();y.$$.fragment.i(t),$&&$.i(),b.$$.fragment.i(t),s=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)f(t,0);y.$$.fragment.o(t),$&&$.o(),b.$$.fragment.o(t),s=!1},d(t){t&&p(e),m(c,t),y.$destroy(),$&&$.d(),t&&p(a),b.$destroy(t),u()}}}function so(t,e,n){let r,i,o,a,s;u(t,zt,t=>{n("$activeQuestions",r=t)}),u(t,It,t=>{n("$selectedPartyIds",i=t)}),u(t,Lt,t=>{n("$difference",o=t)}),u(t,Ft,t=>{n("$overlap",a=t)}),u(t,Et,t=>{n("$filteredParties",s=t)});let l,c,h=0,f=0;return S(()=>{n("isScrolling",c=!!l&&l.scrollHeight>l.clientHeight)}),{innerWidth:h,innerHeight:f,partyList:l,isScrolling:c,$activeQuestions:r,$selectedPartyIds:i,$difference:o,$overlap:a,$filteredParties:s,onwindowresize:function(){h=window.innerWidth,n("innerWidth",h),f=window.innerHeight,n("innerHeight",f)},div0_binding:function(t,e){n("partyList",l=t)}}}class uo extends tt{constructor(t){super(),K(this,t,so,ao,s,[])}}function lo(e){var n;return{c(){(n=v("footer")).innerHTML='<div class="inner svelte-1u32ov5"><p class="svelte-1u32ov5">\n\t\t\t      by\n\t\t\t      <a class="tulp-interactive svelte-1u32ov5" href="http://tulpinteractive.com" title="TULP interactive" target="_blank"><span>TULP</span>\n\t\t\t        interactive\n\t\t\t      </a></p>\n\t\t\t    <div class="links svelte-1u32ov5"><a class="about svelte-1u32ov5" href="about.html" target="_blank" title="about 2019 vote EU">\n\t\t\t        about\n\t\t\t      </a>\n\t\t\t      <a class="privacy svelte-1u32ov5" href="privacy-statement.html" target="_blank" title="privacy statement">\n\t\t\t        privacy\n\t\t\t      </a></div></div>',n.className="svelte-1u32ov5"},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}class co extends tt{constructor(t){super(),K(this,t,null,lo,s,[])}}function ho(e){var n,r,i=e.error.message;return{c(){n=v("p"),r=$(i),C(n,"color","red")},m(t,e){g(t,n,e),d(n,r)},p:t,i:t,o:t,d(t){t&&p(n)}}}function fo(e){var n,r,i=new uo({}),o=new re({});return{c(){i.$$.fragment.c(),n=w(),o.$$.fragment.c()},m(t,e){J(i,t,e),g(t,n,e),J(o,t,e),r=!0},p:t,i(t){r||(i.$$.fragment.i(t),o.$$.fragment.i(t),r=!0)},o(t){i.$$.fragment.o(t),o.$$.fragment.o(t),r=!1},d(t){i.$destroy(t),t&&p(n),o.$destroy(t)}}}function go(e){var n;return{c(){(n=v("p")).textContent="...loading data"},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function po(t){var e,r,i,o;let a={ctx:t,current:null,pending:go,then:fo,catch:ho,value:"null",error:"error",blocks:Array(3)};X(e=t.promise,a);var s=new Xt({}),u=new co({});return{c(){a.block.c(),r=w(),s.$$.fragment.c(),i=w(),u.$$.fragment.c()},m(t,e){a.block.m(t,a.anchor=e),a.mount=(()=>r.parentNode),a.anchor=r,g(t,r,e),J(s,t,e),g(t,i,e),J(u,t,e),o=!0},p(r,i){t=i,a.ctx=t,e!==(e=t.promise)&&X(e,a)||a.block.p(r,n(n({},t),a.resolved))},i(t){o||(a.block.i(),s.$$.fragment.i(t),u.$$.fragment.i(t),o=!0)},o(t){for(let t=0;t<3;t+=1){const e=a.blocks[t];e&&e.o()}s.$$.fragment.o(t),u.$$.fragment.o(t),o=!1},d(t){a.block.d(t),a=null,t&&p(r),s.$destroy(t),t&&p(i),u.$destroy(t)}}}function mo(t){return{promise:Yt("AT")}}return new class extends tt{constructor(t){super(),K(this,t,mo,po,s,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
